<HTML>
<HEAD>
<TITLE>Modelica.Media.Examples.TwoPhaseWater</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;extension of the StandardWater package&quot;">
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TwoPhaseWater<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Media.Examples.TwoPhaseWater"></A><A HREF="Modelica_Media_Examples.html#Modelica.Media.Examples"
>Modelica.Media.Examples</A>.TwoPhaseWater</H2>
<B>extension of the StandardWater package</B>
<P>
<H3>Information</H3>
<PRE></pre>
<body>
<h3>Example: TwoPhaseWater</h3>
The TwoPhaseWater package demonstrates how to extend the parsimonius
BaseProperties with a minimal set of properties from the standard water
package with most properties that are needed in two-phase situations.
The model also demonstrates how to compute additional&nbsp; properties
for the medium model. In this scenario, that builds a new medium model
with many more properties than the default, the standard BaseProperties
is used as a basis. For additional properties, a user has to:<br>
<ol>
<li>Declare a new variable of the wanted type, e.g. <span
style="color: rgb(0, 0, 153);">"<span style="color: rgb(51, 51, 255);">DynamicViscosity
eta</span>"</span>.</li>
<li>Compute that variable by calling the function form the package,
e.g. <span style="color: rgb(51, 51, 255);">eta =
dynamicViscosity(state)</span>. Note that the instance of
ThermodynamicState is used as an input to the function. This instance
"state" is declared in PartialMedium and thus available in every medium
model. A user does not have to know what actual variables are required
to compute the dynamic viscosity, because the state instance is
guaranteed to contain what is needed.&nbsp;<span
style="color: rgb(255, 0, 0);"></span></li>
<li><span style="color: rgb(255, 0, 0);">Attention</span>: Many
properties are not well defined in the two phase region and the
functions might return undesired values if called there. It is the
users responsibility&nbsp; to take care of such ituations. The example
uses one of several possible models to compute an averaged viscosity
for two-phase flows. </li>
</ol>
In two phase models, properties are often needed on the phase boundary
just outside the two phase dome, right on the border.. To compute the
thermodynamic state there, two auxiliary functions are provided: <b>setDewState(sat)</b> and <b>setBubbleState(sat)</b>. They take an
instance of SaturationProperties as input. By default they are in
one-phase, but with the optional phase argument set to 2, the output is
forced to be just inside the phase boundary. This is only needed when
derivatives like cv are computed with are different on both sides of
the boundaries. The ususal steps to compute properties on the phase
boundary are: <br>
<ol>
<li>Declare an instance of ThermodynamicState, e.g. "ThermodynamicState&nbsp; dew".</li>
<li>Compute the state, using an instance of SaturationProperties,
e.g. dew = setDewState(sat)</li>
<li>Compute properties on the phase boundary to your full desire,
e.g. "cp_d = specificHeatCapacityCp(dew)". <br>
</li>
</ol>
<p>The sample model TestTwoPhaseStates test the extended properties</p>
The same procedure can be used to compute properties at other state
points, e.g. when an isentropic reference state is computed.<br>
<br>
</body>
<pre>
</PRE><P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Media.Examples.TwoPhaseWater.ExtendedPropertiesS.png" ALT="Modelica.Media.Examples.TwoPhaseWater.ExtendedProperties" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Examples_TwoPhaseWater.html#Modelica.Media.Examples.TwoPhaseWater.ExtendedProperties"
>ExtendedProperties</A>
</TD><TD>plenty of two-phase properties</TD></TR>
<TR><TD><A HREF="Modelica_Media_Examples_TwoPhaseWater.html#Modelica.Media.Examples.TwoPhaseWater.TestTwoPhaseStates"
>TestTwoPhaseStates</A>
</TD><TD>test the above model</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ExtendedProperties<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Examples.TwoPhaseWater.ExtendedPropertiesI.png" ALT="Modelica.Media.Examples.TwoPhaseWater.ExtendedProperties" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Media.Examples.TwoPhaseWater.ExtendedProperties"></A><A HREF="Modelica_Media_Examples_TwoPhaseWater.html#Modelica.Media.Examples.TwoPhaseWater"
>Modelica.Media.Examples.TwoPhaseWater</A>.ExtendedProperties</H2>
<B>plenty of two-phase properties</B><p>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>&nbsp;</TD><TD>preferredMediumStates</TD><TD>false</TD><TD>= true if StateSelect.prefer shall be used for the independent property variables of the medium</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ExtendedProperties <font color="darkgreen">&quot;plenty of two-phase properties&quot;</font>
  <font color="blue">extends </font>BaseProperties;
  ThermodynamicState dew <font color="darkgreen">&quot;dew line Properties&quot;</font>;
  ThermodynamicState bubble <font color="darkgreen">&quot;bubble line Properties&quot;</font>;
  ThermodynamicState bubble2 <font color="darkgreen">&quot;bubble line Properties, on the 2-phase side&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.DynamicViscosity"
>DynamicViscosity</A> eta <font color="darkgreen">&quot;viscosity (McAdams mixture rules if in 2-phase)&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.DynamicViscosity"
>DynamicViscosity</A> eta_d <font color="darkgreen">&quot;dew line viscosity&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.DynamicViscosity"
>DynamicViscosity</A> eta_b <font color="darkgreen">&quot;bubble line viscosity&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermalConductivity"
>ThermalConductivity</A> lambda_d <font color="darkgreen">&quot;dew line thermal conductivity&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermalConductivity"
>ThermalConductivity</A> lambda_b <font color="darkgreen">&quot;bubble line thermal conductivity&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificHeatCapacity"
>SpecificHeatCapacity</A> cp_d <font color="darkgreen">&quot;dew line Specific heat capacity&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificHeatCapacity"
>SpecificHeatCapacity</A> cp_b <font color="darkgreen">&quot;bubble line Specific heat capacity&quot;</font>;
  Real ddhp;
  Real ddhp_d;
  Real ddhp_b <font color="darkgreen">&quot;derivatives&quot;</font>;
  Real ddph;
  Real ddph_d;
  Real ddph_b <font color="darkgreen">&quot;derivatives&quot;</font>;
  Real ddhp_b2;
  Real ddph_b2 <font color="darkgreen">&quot;derivatives&quot;</font>;
  <font color="darkgreen">// no derivatives yet, ... sat should be temporary</font>
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A> x <font color="darkgreen">&quot;steam mass fraction&quot;</font>;
  Real dTp;
  Real dTp2;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEntropy"
>SpecificEntropy</A> s_b;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEntropy"
>SpecificEntropy</A> s_d;
<font color="blue">equation </font>
  eta = <font color="blue">if </font>phase == 1<font color="blue"> then </font><font color="red">dynamicViscosity</font>(state)<font color="blue"> else </font>1/(x/eta_d + (1 - x)
    /eta_b);
  dew =<font color="red">  setDewState</font>(sat);
  bubble =<font color="red">  setBubbleState</font>(sat);
  bubble2 =<font color="red">  setBubbleState</font>(sat,2);
  x = (h - bubble.h)/<font color="red">max</font>(dew.h - bubble.h,1e-6);
  eta_d =<font color="red"> dynamicViscosity</font>(dew);
  eta_b =<font color="red"> dynamicViscosity</font>(bubble);
  lambda_d =<font color="red"> thermalConductivity</font>(dew);
  lambda_b =<font color="red"> thermalConductivity</font>(bubble);
  cp_d =<font color="red"> specificHeatCapacityCp</font>(dew);
  cp_b =<font color="red"> specificHeatCapacityCp</font>(bubble);
  s_d =<font color="red"> specificEntropy</font>(dew);
  s_b =<font color="red"> specificEntropy</font>(bubble);
  ddph =<font color="red"> density_derp_h</font>(state);
  ddph_d =<font color="red"> density_derp_h</font>(dew);
  ddph_b =<font color="red"> density_derp_h</font>(bubble);
  ddhp =<font color="red"> density_derh_p</font>(state);
  ddhp_d =<font color="red"> density_derh_p</font>(dew);
  ddhp_b =<font color="red"> density_derh_p</font>(bubble);
  ddhp_b2 =<font color="red"> density_derh_p</font>(bubble2);
  ddph_b2 =<font color="red"> density_derp_h</font>(bubble2);
  dTp =<font color="red"> saturationTemperature_derp</font>(p);
  dTp2 = (1/dew.d - 1/bubble.d)/<font color="red">max</font>(s_d - s_b,1e-6);
<font color="blue">end </font>ExtendedProperties;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestTwoPhaseStates<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Media.Examples.TwoPhaseWater.TestTwoPhaseStates"></A><A HREF="Modelica_Media_Examples_TwoPhaseWater.html#Modelica.Media.Examples.TwoPhaseWater"
>Modelica.Media.Examples.TwoPhaseWater</A>.TestTwoPhaseStates</H2>
<B>test the above model</B><p>
<H3>Information</H3>
<PRE></pre>
<body>
<h3>Example:TestTwoPhaseStates</h3>
</p> For details see the documentation of the example package TwoPhaseWater<p>
</body>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>dh</TD><TD>80000.0</TD><TD>80 kJ/second</TD></TR>
<TR><TD>&nbsp;</TD><TD>dp</TD><TD>1.0e6</TD><TD>10 bars per second</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestTwoPhaseStates <font color="darkgreen">&quot;test the above model&quot;</font>
  <A HREF="Modelica_Media_Examples_TwoPhaseWater.html#Modelica.Media.Examples.TwoPhaseWater.ExtendedProperties"
>ExtendedProperties</A> medium(p(start = 700.0),
   h(start = 8.0e5));
  <font color="blue">parameter </font>Real dh = 80000.0 <font color="darkgreen">&quot;80 kJ/second&quot;</font>;
  <font color="blue">parameter </font>Real dp = 1.0e6 <font color="darkgreen">&quot;10 bars per second&quot;</font>;
<font color="blue">equation </font>
  <font color="red">der</font>(medium.p) = dp;
  <font color="red">der</font>(medium.h) = dh;
<font color="blue">end </font>TestTwoPhaseStates;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Mar 28 11:39:33 2006.
</address></BODY>
</HTML>
