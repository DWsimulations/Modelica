<HTML>
<HEAD>
<TITLE>Modelica.Electrical.Spice3.Additionals</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Some useful additional models, e.g., from SPICE2 the polynomial sources&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Additionals<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Additionals"></A><A HREF="Modelica_Electrical_Spice3.html#Modelica.Electrical.Spice3"
>Modelica.Electrical.Spice3</A>.Additionals</H2>
<B>Some useful additional models, e.g., from SPICE2 the polynomial sources</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This package contains additional useful models which do not belong to the original SPICE3 model set.</p>
<pre></PRE><P>

<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Additionals.polyS.png" ALT="Modelica.Electrical.Spice3.Additionals.poly" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals.poly"
>poly</A>
</TD><TD>POLY function of SPICE2</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYS.png" ALT="Modelica.Electrical.Spice3.Additionals.E_VCV_POLY" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals.E_VCV_POLY"
>E_VCV_POLY</A>
</TD><TD>Polynomial voltage controlled voltage source, like SPICE2</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYS.png" ALT="Modelica.Electrical.Spice3.Additionals.G_VCC_POLY" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals.G_VCC_POLY"
>G_VCC_POLY</A>
</TD><TD>Polynomial voltage controlled current source, like SPICE2</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYS.png" ALT="Modelica.Electrical.Spice3.Additionals.H_CCV_POLY" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals.H_CCV_POLY"
>H_CCV_POLY</A>
</TD><TD>Polynomial current controlled voltage source, like SPICE2</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYS.png" ALT="Modelica.Electrical.Spice3.Additionals.F_CCC_POLY" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals.F_CCC_POLY"
>F_CCC_POLY</A>
</TD><TD>Polynomial current controlled current source, like SPICE2</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE poly<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Additionals.poly"></A><A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals"
>Modelica.Electrical.Spice3.Additionals</A>.poly</H2>
<B>POLY function of SPICE2</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>Function needed for polynomial interpolation of POLY controlled sources:</p>
<ul>
<li>E_VCV_POLY</li>
<li>G_VCC_POLY</li>
<li>H_CCV_POLY</li>
<li>F_CCC_POLY</li>
</ul>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>s[:]</TD><TD>&nbsp;</TD><TD>Variables</TD></TR>
<TR><TD>Real</TD><TD>a[:]</TD><TD>&nbsp;</TD><TD>Coefficients</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>v</TD><TD>Value of polynomial</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> poly <font color="darkgreen">&quot;POLY function of SPICE2&quot;</font>
  <font color="blue">input </font>Real s[:] <font color="darkgreen">&quot;Variables&quot;</font>;
  <font color="blue">input </font>Real a[:] <font color="darkgreen">&quot;Coefficients&quot;</font>;
  <font color="blue">output </font>Real v <font color="darkgreen">&quot;Value of polynomial&quot;</font>;
<font color="blue">protected </font>
  Integer n <font color="darkgreen">&quot;number of polynomial variables, like POLY(n)&quot;</font>;
  Integer na <font color="darkgreen">&quot;number of polynomial coefficients, like POLY(n)&quot;</font>;
  Integer ia <font color="darkgreen">&quot;state of the usage of a&quot;</font>;
<font color="blue">algorithm </font>
  n :=<font color="red"> size</font>(s,1);
  na :=<font color="red"> size</font>(a,1);
  <font color="red">assert</font>(n &gt; 0,&quot;poly: number of variables zero&quot;);
  <font color="red">assert</font>(na &gt; 0,&quot;poly: number of coefficients zero&quot;);
  ia := 0;

<font color="darkgreen">// case one coefficient</font>
  <font color="blue">if </font>(na == 1)<font color="blue"> then</font>
    v := a[1] * s[1];
    return;
  <font color="blue">end if</font>;

<font color="darkgreen">// absolute term</font>
  v := a[1];
  ia := 1;

<font color="darkgreen">// linear terms</font>
  <font color="blue">for </font>i1<font color="blue"> in </font>1:n<font color="blue"> loop</font>
    ia := ia + 1;
    <font color="blue">if </font>ia &gt; na<font color="blue"> then</font>
                    return;
                            <font color="blue">end if</font>;
    v := v + a[ia] * s[i1];
  <font color="blue">end for</font>;

<font color="darkgreen">// quadratic terms</font>
  <font color="blue">for </font>i1<font color="blue"> in </font>1:n<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>i1:n<font color="blue"> loop</font>
      ia := ia + 1;
      <font color="blue">if </font>ia &gt; na<font color="blue"> then</font>
         return;
      <font color="blue">end if</font>;
      v := v + a[ia] * s[i1] * s[i2];
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;

<font color="darkgreen">// cubic terms</font>
  <font color="blue">for </font>i1<font color="blue"> in </font>1:n<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>i1:n<font color="blue"> loop</font>
      <font color="blue">for </font>i3<font color="blue"> in </font>i2:n<font color="blue"> loop</font>
        ia := ia + 1;
        <font color="blue">if </font>ia &gt; na<font color="blue"> then</font>
           return;
        <font color="blue">end if</font>;
        v := v + a[ia] * s[i1] * s[i2] * s[i3];
      <font color="blue">end for</font>;
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;

<font color="darkgreen">// fourth potential terms</font>
  <font color="blue">for </font>i1<font color="blue"> in </font>1:n<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>i1:n<font color="blue"> loop</font>
      <font color="blue">for </font>i3<font color="blue"> in </font>i2:n<font color="blue"> loop</font>
        <font color="blue">for </font>i4<font color="blue"> in </font>i3:n<font color="blue"> loop</font>
          ia := ia + 1;
          <font color="blue">if </font>ia &gt; na<font color="blue"> then</font>
            return;
          <font color="blue">end if</font>;
          v := v + a[ia] * s[i1] * s[i2] * s[i3] * s[i4];
        <font color="blue">end for</font>;
      <font color="blue">end for</font>;
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;

 <font color="darkgreen">// fifth potential terms</font>
  <font color="blue">for </font>i1<font color="blue"> in </font>1:n<font color="blue"> loop</font>
    <font color="blue">for </font>i2<font color="blue"> in </font>i1:n<font color="blue"> loop</font>
      <font color="blue">for </font>i3<font color="blue"> in </font>i2:n<font color="blue"> loop</font>
        <font color="blue">for </font>i4<font color="blue"> in </font>i3:n<font color="blue"> loop</font>
          <font color="blue">for </font>i5<font color="blue"> in </font>i4:n<font color="blue"> loop</font>
            ia := ia + 1;
            <font color="blue">if </font>ia &gt; na<font color="blue"> then</font>
              return;
            <font color="blue">end if</font>;
            v := v + a[ia] * s[i1] * s[i2] * s[i3] * s[i4] * s[i5];
          <font color="blue">end for</font>;
        <font color="blue">end for</font>;
      <font color="blue">end for</font>;
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;

  v := na;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>poly;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE E_VCV_POLY<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYI.png" ALT="Modelica.Electrical.Spice3.Additionals.E_VCV_POLY" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Electrical.Spice3.Additionals.E_VCV_POLY"></A><A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals"
>Modelica.Electrical.Spice3.Additionals</A>.E_VCV_POLY</H2>
<B>Polynomial voltage controlled voltage source, like SPICE2</B><p>
<IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYD.png" ALT="Modelica.Electrical.Spice3.Additionals.E_VCV_POLY">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The polynomial source is a SPICE2 model, which is also known in other SPICE derivates.</p>
<p>Nonlinear voltage controlled voltage source. The &quot;right&quot; port voltage between pin p2 and n2 (=p2.v - n2.v) is controlled by the &quot;left&quot; port vector of voltages at the pin vector pc[:] via</p>
<pre>    p2.v - n2.v = f(pc[1].v - pc[2].v, pc[3].v - pc[4].v,...)</pre>
<p>The controlling port (left) current vector is zero.</p>
<p>f is a polynomial in N variables s1...sN of the following form with M+1 coefficients a0, a1, a2,...aM.</p>
<pre>f = a0 +
    a1s1 + a2s2 + ... + aNsN +
    a(N+1)s1&sup2; + a(N+2)s1s2 + ... + a(.)s1sN +
    a(.)s2&sup2; + a(.)s2s3 + ... + a(.)s2sN +
    a(.)s3&sup2; + s3s4 + ... + a(.)s4sN +
    ... +
    a(.)sN&sup2; +
    a(.)s1&sup3; + a(.)s1&sup2;s2 + a(.)s1&sup2;s3 + ... + a(.)s1&sup2;sN +
    a(.)s1s2&sup2; + a(.)s1s2s3 + ... + a(.)s1s2sN +
    ... +
    a(.)sN&sup3; + ... </pre>
<p>The Coefficients a(.) are counted in this order. Reaching M, the particular sum is canceled.</p>
<p>In connection with the VCV, s1...sN are the voltages of the controlling side: s1=pc[1].v - pc[2].v, s2=pc[3].v - pc[4].v, s3=...</p>
<p>The corresponding SPICE description of the VCV polynomial source is the following:</p>
<pre>    Ename A1 A2 POLY(N) E11 E21 ... E1N E2N P0 P1...</pre>
<p>where Ename is the name of the instance, A1 and A2 are the nodes between them the controlled voltage is gripped,</p>
<p>N is the number of the controlling voltages, E11 E12 ... E1N E2N are pairs of nodes between them the controlling voltages</p>
<p>are gripped, and P0, P1... are the coefficients that are called a0, a1, ... aM in the description of the polynomial f above.</p>
<p>To describe the SPICE line in Modelica, the following explanation would be useful:</p>
<pre>Ename -&gt; E_VCV_POLY name
A1, A2 -&gt; pins name.p2, name.p1
N -&gt; parameter N
E11 -&gt; name.pc[2]
E12 -&gt; name.pc[1]
...
E1N -&gt; name.pc[N]
E2N -&gt; name.pc[N-1]
P0, P1 -&gt; polynomial coefficients name.coeff(coeff={P0,P1,...})</pre>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>1</TD><TD>Number of controlling voltages</TD></TR>
<TR><TD>Real</TD><TD>coeff[:]</TD><TD>{1}</TD><TD>Coefficients of polynomial</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>p</TD><TD>Positive pin of the controlled (normally right) port (potential p2.v &gt; n2.v for positive voltage drop v2)</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>NegativePin</A></TD><TD>n</TD><TD>Negative pin of the controlled (normally right) port</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>pc[2*N]</TD><TD>Pin vector of controlling pins (normally left)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> E_VCV_POLY <font color="darkgreen">
  &quot;Polynomial voltage controlled voltage source, like SPICE2&quot;</font>

  <font color="blue">parameter </font>Integer N(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">&quot;Number of controlling voltages&quot;</font>;
  <font color="blue">parameter </font>Real coeff[:] = {1} <font color="darkgreen">&quot;Coefficients of polynomial&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> p <font color="darkgreen">
    &quot;Positive pin of the controlled (normally right) port (potential p2.v &gt; n2.v for positive voltage drop v2)&quot;</font>;
  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>Modelica.Electrical.Analog.Interfaces.NegativePin</A> n <font color="darkgreen">
    &quot;Negative pin of the controlled (normally right) port&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> pc[2*N] <font color="darkgreen">
    &quot;Pin vector of controlling pins (normally left)&quot;</font>;</textblock>

  Real control[N];
<font color="blue">equation </font>
  p.i + n.i = 0;
  <font color="blue">for </font>i<font color="blue"> in </font>1:2*N<font color="blue"> loop</font>
    pc[i].i = 0;
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    control[i] = pc[2*i-1].v - pc[2*i].v;
  <font color="blue">end for</font>;
  p.v - n.v =<font color="red"> poly</font>(control, coeff);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>E_VCV_POLY;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE G_VCC_POLY<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYI.png" ALT="Modelica.Electrical.Spice3.Additionals.G_VCC_POLY" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Electrical.Spice3.Additionals.G_VCC_POLY"></A><A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals"
>Modelica.Electrical.Spice3.Additionals</A>.G_VCC_POLY</H2>
<B>Polynomial voltage controlled current source, like SPICE2</B><p>
<IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYD.png" ALT="Modelica.Electrical.Spice3.Additionals.G_VCC_POLY">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The polynomial source is a SPICE2 model, which is also known in other SPICE derivates.</p>
<p>Nonlinear voltage controlled current source. The right port current at pin p2 (=p2.i) is controlled by the left port vector of voltages at the pin vector pc[:] via</p>
<pre>    p2.i = f(pc[1].v - pc[2].v, pc[3].v - pc[4].v,...)</pre>
<p>The controlling port (left) current vector is zero.</p>
<p>f is a polynomial in N variables s1...sN of the following form with M+1 coefficients a0, a1, a2,...aM.</p>
<pre>f = a0 +
    a1s1 + a2s2 + ... + aNsN +
    a(N+1)s1&sup2; + a(N+2)s1s2 + ... + a(.)s1sN +
    a(.)s2&sup2; + a(.)s2s3 + ... + a(.)s2sN +
    a(.)s3&sup2; + s3s4 + ... + a(.)s4sN +
    ... +
    a(.)sN&sup2; +
    a(.)s1&sup3; + a(.)s1&sup2;s2 + a(.)s1&sup2;s3 + ... + a(.)s1&sup2;sN +
    a(.)s1s2&sup2; + a(.)s1s2s3 + ... + a(.)s1s2sN +
    ... +
    a(.)sN&sup3; + ... </pre>
<p>The Coefficients a(.) are counted in this order. Reaching M, the particular sum is canceled.</p>
<p>In connection with the VCC, s1...sN are the voltages of the controlling side: s1=pc[1].v - pc[2].v, s2=pc[3].v - pc[4].v, s3=...</p>
<p>The corresponding SPICE description of the VCC polynomial source is the following:</p>
<pre>    Gname A1 A2 POLY(N) E11 E21 ... E1N E2N P0 P1...</pre>
<p>where Gname is the name of the instance, A1 and A2 are the nodes between them the current source is arranged, whose current is calculated,</p>
<p>N is the number of the controlling voltages, E11 E12 ... E1N E2N are pairs of nodes between them the controlling voltages</p>
<p>are gripped, and P0, P1... are the coefficients that are called a0, a1, ... aM in the description of the polynomial f above.</p>
<p>To describe the SPICE line in Modelica, the following explanation would be useful:</p>
<pre>Gname -&gt; G_VCC_POLY name
A1, A2 -&gt; pins name.p2, name.p1
N -&gt; parameter N
E11 -&gt; name.pc[2]
E12 -&gt; name.pc[1]
...
E1N -&gt; name.pc[N]
E2N -&gt; name.pc[N-1]
P0, P1 -&gt; polynomial coefficients name.coeff(coeff={P0,P1,...}) </pre>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>1</TD><TD>Number of controlling voltages</TD></TR>
<TR><TD>Real</TD><TD>coeff[:]</TD><TD>{1}</TD><TD>Coefficients of polynomial</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>p</TD><TD>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>NegativePin</A></TD><TD>n</TD><TD>Negative pin of the right port</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>pc[2*N]</TD><TD>Pin vector of controlling pins</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> G_VCC_POLY <font color="darkgreen">
  &quot;Polynomial voltage controlled current source, like SPICE2&quot;</font>

  <font color="blue">parameter </font>Integer N(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">&quot;Number of controlling voltages&quot;</font>;
  <font color="blue">parameter </font>Real coeff[:] = {1} <font color="darkgreen">&quot;Coefficients of polynomial&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> p <font color="darkgreen">
    &quot;Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)&quot;</font>;
  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>Modelica.Electrical.Analog.Interfaces.NegativePin</A> n <font color="darkgreen">
    &quot;Negative pin of the right port&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> pc[2*N] <font color="darkgreen">
    &quot;Pin vector of controlling pins&quot;</font>;</textblock>

  Real control[N];
<font color="blue">equation </font>
  p.i + n.i = 0;
  <font color="blue">for </font>i<font color="blue"> in </font>1:2*N<font color="blue"> loop</font>
    pc[i].i = 0;
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    control[i] = pc[2*i-1].v - pc[2*i].v;
  <font color="blue">end for</font>;
  p.i =<font color="red"> poly</font>(control, coeff);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>G_VCC_POLY;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE H_CCV_POLY<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYI.png" ALT="Modelica.Electrical.Spice3.Additionals.H_CCV_POLY" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Electrical.Spice3.Additionals.H_CCV_POLY"></A><A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals"
>Modelica.Electrical.Spice3.Additionals</A>.H_CCV_POLY</H2>
<B>Polynomial current controlled voltage source, like SPICE2</B><p>
<IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYD.png" ALT="Modelica.Electrical.Spice3.Additionals.H_CCV_POLY">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The polynomial source is a SPICE2 model, which is also known in other SPICE derivates.</p>
<p>Nonlinear current controlled voltage source. The right port voltage between pin p2 and n2 (=p2.v - n2.v) is controlled by the left port vector of currents at pin pc (=pc.i) via</p>
<pre>    p2.v - n2.v = f(pc[2].i, pc[4].i,...)</pre>
<p>The controlling port (left) current vector is zero.</p>
<p>The corresponding SPICE description</p>
<pre>    Hname A1 A2 POLY(N) V1...VN P0 P1...</pre>
<p>f is a polynomial in N variables s1...sN of the following form with M+1 coefficients a0, a1, a2,...aM.</p>
<pre>f = a0 +
    a1s1 + a2s2 + ... + aNsN +
    a(N+1)s1&sup2; + a(N+2)s1s2 + ... + a(.)s1sN +
    a(.)s2&sup2; + a(.)s2s3 + ... + a(.)s2sN +
    a(.)s3&sup2; + s3s4 + ... + a(.)s4sN +
    ... +
    a(.)sN&sup2; +
    a(.)s1&sup3; + a(.)s1&sup2;s2 + a(.)s1&sup2;s3 + ... + a(.)s1&sup2;sN +
    a(.)s1s2&sup2; + a(.)s1s2s3 + ... + a(.)s1s2sN +
    ... +
    a(.)sN&sup3; + ... </pre>
<p>The Coefficients a(.) are counted in this order. Reaching M, the particular sum is canceled.</p><p>In Modelica the controlling pins have to be connected to the CCV in that way, that the required currents flow through the according pins of the CCV:</p><p>s1 = pc[2].i, s2 = pc[4].i, s3 = pc[6].i,...</p><p>The pairs pc[1].i and pc[2].i, pc[3].i and pc[4].i...form ports with pc[2].i + pc[1].i = 0, pc[4].i + pc[3].i = 0, ...</p><p>The corresponding SPICE description of the CCV polynomial source is the following:</p>
<pre>    Hname A1 A2 POLY(N) V1...VN P0 P1...</pre>
<p>where Hname is the name of the instance, A1 and A2 are the nodes between them the controlled voltage is gripped.</p><p>N is the number of the controlling currents, V1...VN are the voltage sources, that are necessary in SPICE to supply the controlling currents,</p><p>and P0, P1... are the coefficients that are called a0, a1, ... aM in the description of the polynomial f above.</p>
<p>To describe the SPICE line in Modelica, the following explanation would be useful:</p>
<pre>Hname -&gt; H_CCV_POLY name
A1, A2 -&gt; pins name.p2, name.p1
N -&gt; parameter N</pre>
<p>V1 (...VN) is declared in SPICE:</p>
<pre>   V1 V1+ V1- type of voltage source (constant, pulse, sin...)</pre>
<p>In Modelica the currents through V1...VN has to be led throught the CCV. Therefore V1...VN have to be disconnected and additional nodes</p>
<pre>   V1_AD...VN_AD</pre>
<p>have to be added. In the case, that the SPICE source is</p>
<pre>   V1 n+ n- 0,</pre>
<p>this source can be eliminated.</p>
<pre>V1_AD -&gt; name.pc[2]
V1- -&gt; name.pc[1]
...
VN_AD -&gt; name.pc[N]
VN- -&gt; name.pc[N-1]
P0, P1 -&gt; polynomial coefficients name.coeff(coeff={P0,P1,...})
</pre>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>1</TD><TD>Number of controlling voltages</TD></TR>
<TR><TD>Real</TD><TD>coeff[:]</TD><TD>{1}</TD><TD>Coefficients of polynomial</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>p</TD><TD>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>NegativePin</A></TD><TD>n</TD><TD>Negative pin of the right port</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>pc[2*N]</TD><TD>Pin vector of controlling pins</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> H_CCV_POLY <font color="darkgreen">
  &quot;Polynomial current controlled voltage source, like SPICE2&quot;</font>

  <font color="blue">parameter </font>Integer N(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">&quot;Number of controlling voltages&quot;</font>;
  <font color="blue">parameter </font>Real coeff[:] = {1} <font color="darkgreen">&quot;Coefficients of polynomial&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> p <font color="darkgreen">
    &quot;Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)&quot;</font>;
  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>Modelica.Electrical.Analog.Interfaces.NegativePin</A> n <font color="darkgreen">
    &quot;Negative pin of the right port&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> pc[2*N] <font color="darkgreen">
    &quot;Pin vector of controlling pins&quot;</font>;</textblock>

  Real control[N];
<font color="blue">equation </font>
  p.i + n.i = 0;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    pc[2*i-1].i + pc[2*i].i = 0;
    pc[2*i-1].v - pc[2*i].v = 0;
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    control[i] = pc[2*i-1].i;
  <font color="blue">end for</font>;
  p.v - n.v =<font color="red"> poly</font>(control, coeff);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>H_CCV_POLY;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE F_CCC_POLY<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYI.png" ALT="Modelica.Electrical.Spice3.Additionals.F_CCC_POLY" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Electrical.Spice3.Additionals.F_CCC_POLY"></A><A HREF="Modelica_Electrical_Spice3_Additionals.html#Modelica.Electrical.Spice3.Additionals"
>Modelica.Electrical.Spice3.Additionals</A>.F_CCC_POLY</H2>
<B>Polynomial current controlled current source, like SPICE2</B><p>
<IMG SRC="Modelica.Electrical.Spice3.Additionals.E_VCV_POLYD.png" ALT="Modelica.Electrical.Spice3.Additionals.F_CCC_POLY">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The polynomial source is a SPICE2 model, which is also known in other SPICE derivates.</p>
<p>Nonlinear current controlled current source. The &quot;right&quot; port current at pin p2 (=p2.i) is controlled by the &quot;left&quot; port vector of currents at pin pc[:] via</p>
<pre>    p2.i = f(pc[2].i, pc[4].i,...)</pre>
<p>The controlling port (left) voltage is zero for each pair: pc[2].v - pc[1].v = 0, ...</p><p>Furthermore the currents of each pair are pc[2].i + pc[1].i = 0, ...</p>
<p>f is a polynomial in N variables s1...sN of the following form with M+1 coefficients a0, a1, a2,...aM.</p>
<pre>f = a0 +
    a1s1 + a2s2 + ... + aNsN +
    a(N+1)s1&sup2; + a(N+2)s1s2 + ... + a(.)s1sN +
    a(.)s2&sup2; + a(.)s2s3 + ... + a(.)s2sN +
    a(.)s3&sup2; + s3s4 + ... + a(.)s4sN +
    ... +
    a(.)sN&sup2; +
    a(.)s1&sup3; + a(.)s1&sup2;s2 + a(.)s1&sup2;s3 + ... + a(.)s1&sup2;sN +
    a(.)s1s2&sup2; + a(.)s1s2s3 + ... + a(.)s1s2sN +
    ... +
    a(.)sN&sup3; + ... </pre>
<p>The Coefficients a(.) are counted in this order. Reaching M, the particular sum is canceled.</p><p>In Modelica the controlling pins have to be connected to the CCC in that way, that the required currents flow through the according pins of the CCC:</p><p>s1=pc[2].i, s2=pc[4].i, s3=pc[6].i,...</p><p>The pairs pc[1].i and pc[2].i, pc[3].i and pc[4].i...form ports with pc[2].i + pc[1].i = 0, pc[4].i + pc[3].i = 0, ...</p><p>The corresponding SPICE description of the CCC polynomial source is the following:</p>
<pre>    Fname A1 A2 POLY(N) V1...VN P0 P1...</pre>
<p>where Fname is the name of the instance, A1 and A2 are the nodes between them the current source is arranged, whose current is calculated.</p><p>N is the number of the controlling currents, V1...VN are the voltage sources, that are necessary in SPICE to supply the controlling currents,</p><p>and P0, P1... are the coefficients that are called a0, a1, ... aM in the description of the polynomial f above.</p>
<p>To describe the SPICE line in Modelica, the following explanation would be useful:</p>
<pre>Fname -&gt; F_CCC_POLY name
A1, A2 -&gt; pins name.p2, name.p1
N -&gt; parameter N</pre>
<p>V1 (...VN) is declared in SPICE:</p>
<pre>   V1 V1+ V1- type of voltage source (constant, pulse, sin...)</pre>
<p>In Modelica the currents through V1...VN has to be led throught the CCC. Therefore V1...VN have to be disconnected and additional nodes</p>
<pre>   V1_AD...VN_AD</pre>
<p>have to be added. In the case, that the SPICE source is</p>
<pre>   V1 n+ n- 0,</pre>
<p>this source can be eliminated.</p>
<pre>V1_AD -&gt; name.pc[2]
V1- -&gt; name.pc[1]
...
VN_AD -&gt; name.pc[N]
VN- -&gt; name.pc[N-1]
P0, P1 -&gt; polynomial coefficients name.coeff(coeff={P0,P1,...})
</pre>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>1</TD><TD>Number of controlling voltages</TD></TR>
<TR><TD>Real</TD><TD>coeff[:]</TD><TD>{1}</TD><TD>Coefficients of polynomial</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>p</TD><TD>Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>NegativePin</A></TD><TD>n</TD><TD>Negative pin of the right port</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>PositivePin</A></TD><TD>pc[2*N]</TD><TD>Pin vector of controlling pins</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> F_CCC_POLY <font color="darkgreen">
  &quot;Polynomial current controlled current source, like SPICE2&quot;</font>

  <font color="blue">parameter </font>Integer N(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">&quot;Number of controlling voltages&quot;</font>;
  <font color="blue">parameter </font>Real coeff[:] = {1} <font color="darkgreen">&quot;Coefficients of polynomial&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> p <font color="darkgreen">
    &quot;Positive pin of the right port (potential p2.v &gt; n2.v for positive voltage drop v2)&quot;</font>;
  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.NegativePin"
>Modelica.Electrical.Analog.Interfaces.NegativePin</A> n <font color="darkgreen">
    &quot;Negative pin of the right port&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Electrical_Analog_Interfaces.html#Modelica.Electrical.Analog.Interfaces.PositivePin"
>Modelica.Electrical.Analog.Interfaces.PositivePin</A> pc[2*N] <font color="darkgreen">
    &quot;Pin vector of controlling pins&quot;</font>;</textblock>

  Real control[N];
<font color="blue">equation </font>
  p.i + n.i = 0;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    pc[2*i-1].i + pc[2*i].i = 0;
    pc[2*i-1].v - pc[2*i].v = 0;
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    control[i] = pc[2*i-1].i;
  <font color="blue">end for</font>;
  p.i =<font color="red"> poly</font>(control, coeff);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>F_CCC_POLY;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:46 2010.
</address></BODY>
</HTML>
