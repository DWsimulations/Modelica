<HTML>
<HEAD>
<TITLE>Modelica.Electrical.Spice3.Internal.Bjt3</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Records and functions for bjt model&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bjt3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3"></A><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal"
>Modelica.Electrical.Spice3.Internal</A>.Bjt3</H2>
<B>Records and functions for bjt model</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This package Bjt3 contains functions and records with data of the Bjt3 bipolar transistor models.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A>
</TD><TD>Record for bjt model line parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A>
</TD><TD>Record for bjt model line variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtModelLineInitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtModelLineInitEquations"
>bjtModelLineInitEquations</A>
</TD><TD>Initial calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3S.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A>
</TD><TD>Record for bjt3 device parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3S.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A>
</TD><TD>Variables for the bjt3 model</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3S.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A>
</TD><TD>Bjt3 variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3S.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"
>CurrentsCapacitances</A>
</TD><TD>Bjt3 variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquations"
>bjt3InitEquations</A>
</TD><TD>Initial calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3CalcTempDependencies" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjt3CalcTempDependencies"
>bjt3CalcTempDependencies</A>
</TD><TD>Temperature dependency calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3NoBypassCode" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjt3NoBypassCode"
>bjt3NoBypassCode</A>
</TD><TD>Calculation of currents</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.BjtS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"
>Bjt</A>
</TD><TD>Record for bjt device parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.BjtS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"
>BjtVariables</A>
</TD><TD>Variables for the bjt model</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquations"
>bjtInitEquations</A>
</TD><TD>Initial calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtNoBypassCode" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtNoBypassCode"
>bjtNoBypassCode</A>
</TD><TD>Calculation of currents</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParameters" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParameters"
>bjtRenameParameters</A>
</TD><TD>Technology parameter renaming</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDev" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDev"
>bjtRenameParametersDev</A>
</TD><TD>Temperature calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDevTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDevTemp"
>bjtRenameParametersDevTemp</A>
</TD><TD>Temperature calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersType" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersType"
>bjtRenameParametersType</A>
</TD><TD>Type</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BjtModelLineParams<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.BjtModelLineParams</H2>
<B>Record for bjt model line parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model line (also called model card) parameters that are used for the bipolar transistor model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> BjtModelLineParams <font color="darkgreen">&quot;Record for bjt model line parameters&quot;</font>

  Real m_type( start = 1) <font color="darkgreen">&quot;device type : 1 = n,  -1 = p&quot;</font>;

  Boolean m_bNPN( start = true) <font color="darkgreen">&quot;NPN type device&quot;</font>;
  Boolean m_bPNP( start = false) <font color="darkgreen">&quot;PNP type device&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> m_tnom( start=SpiceConstants.CKTnomTemp) <font color="darkgreen">
    &quot;TNOM, Parameter measurement temperature&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_satCur( start = 1.0e-16) <font color="darkgreen">&quot;IS, Saturation Current&quot;</font>;
  Real m_betaF( start = 100.0) <font color="darkgreen">&quot;BF, Ideal forward beta&quot;</font>;
  Real m_emissionCoeffF(  start = 1.0) <font color="darkgreen">&quot;NF, Forward emission coefficient&quot;</font>;
  Real m_leakBEemissionCoeff( start = 1.5) <font color="darkgreen">
    &quot;NE, B-E leakage emission coefficient&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_leakBEcurrent( start = 0.) <font color="darkgreen">
    &quot;ISE, B-E leakage saturation current&quot;</font>;
  Real m_c2( start = 0.) <font color="darkgreen">&quot;C2, Obsolete parameter name&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_leakBCcurrent( start = 0.) <font color="darkgreen">
    &quot;ISC, B-C leakage saturation current&quot;</font>;
  Real m_c4( start = 0.) <font color="darkgreen">&quot;C4, Obsolete parameter name&quot;</font>;
  Real m_leakBEcurrentIsGiven;
  Real m_c2IsGiven;
  Real m_leakBCcurrentIsGiven;
  Real m_c4IsGiven;
  Real m_betaR( start = 1.0) <font color="darkgreen">&quot;BR, Ideal reverse beta&quot;</font>;
  Real m_emissionCoeffR( start = 1.0) <font color="darkgreen">&quot;NR, Reverse emission coefficient&quot;</font>;
  Real m_leakBCemissionCoeff( start = 2.0) <font color="darkgreen">
    &quot;NC, B-C leakage emission coefficient&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_earlyVoltF( start = 0.0) <font color="darkgreen">
    &quot;VAF, Forward Early voltage&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_rollOffF( start = 0.0) <font color="darkgreen">
    &quot;IKF, Forward beta roll-off corner current&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_earlyVoltR( start = 0.0) <font color="darkgreen">
    &quot;VAR, Reverse Early voltage&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_rollOffR( start = 0.0) <font color="darkgreen">
    &quot;IKR, reverse beta roll-off corner current&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_emitterResist( start = 0.0) <font color="darkgreen">
    &quot;RE, Emitter resistance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_collectorResist( start = 0.0) <font color="darkgreen">
    &quot;RC, Collector resistance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_baseCurrentHalfResist( start = 0.0) <font color="darkgreen">
    &quot;IRB, Current for base resistance=(rb+rbm)/2&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_baseResist( start = 0.0) <font color="darkgreen">
    &quot;RB, Zero bias base resistance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_minBaseResist( start = 0.0) <font color="darkgreen">
    &quot;RBM, Minimum base resistance&quot;</font>;
  Real m_minBaseResistIsGiven;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_depletionCapBE( start = 0.0) <font color="darkgreen">
    &quot;CJE, Zero bias B-E depletion capacitance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_potentialBE( start = 0.75) <font color="darkgreen">
    &quot;VJE, B-E built in potential&quot;</font>;
  Real m_junctionExpBE( start = 0.33) <font color="darkgreen">&quot;MJE, B-E built in potential&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> m_transitTimeF( start = 0.0) <font color="darkgreen">
    &quot;TF, Ideal forward transit time&quot;</font>;
  Real m_transitTimeBiasCoeffF( start = 0.0) <font color="darkgreen">
    &quot;XTF, Coefficient for bias dependence of TF&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_transitTimeHighCurrentF( start = 0.0) <font color="darkgreen">
    &quot;ITF, High current dependence of TF&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_transitTimeFVBC( start = 0.0) <font color="darkgreen">
    &quot;VTF, Voltage giving VBC dependence of TF&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> m_excessPhase( start = 0.0) <font color="darkgreen">&quot;PTF, Excess phase&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_depletionCapBC( start = 0.0) <font color="darkgreen">
    &quot;CJC, Zero bias B-C depletion capacitance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_potentialBC( start = 0.75) <font color="darkgreen">
    &quot;VJC, B-C built in potential&quot;</font>;
  Real m_junctionExpBC( start = 0.33) <font color="darkgreen">&quot;MJC, B-C junction grading coefficient&quot;</font>;
  Real m_baseFractionBCcap( start = 1.0) <font color="darkgreen">
    &quot;XCJC, Fraction of B-C cap to internal base&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> m_transitTimeR( start = 0.0) <font color="darkgreen">
    &quot;TR, Ideal reverse transit time&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_capCS( start = 0.0) <font color="darkgreen">
    &quot;CJS, Zero bias C-S capacitance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_potentialSubstrate( start = 0.75) <font color="darkgreen">
    &quot;VJS, Zero bias C-S capacitance&quot;</font>;
  Real m_exponentialSubstrate( start = 0.0) <font color="darkgreen">
    &quot;MJS, Substrate junction grading coefficient&quot;</font>;
  Real m_betaExp( start = 0.0) <font color="darkgreen">&quot;XTB, Forward and reverse beta temp. exp.&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.GapEnergy"
>Modelica.SIunits.GapEnergy</A> m_energyGap( start = 1.11) <font color="darkgreen">
    &quot;EG, Energy gap for IS temp. dependency&quot;</font>;
  Real m_tempExpIS( start = 3.0) <font color="darkgreen">&quot;XTI,Temp. exponent for IS&quot;</font>;
  Real m_fNcoef( start = 0.0) <font color="darkgreen">&quot;KF, Flicker Noise Coefficient&quot;</font>;
  Real m_fNexp( start = 1.0) <font color="darkgreen">&quot;AF, Flicker Noise Exponent&quot;</font>;
  Real m_depletionCapCoeff( start = 0.5) <font color="darkgreen">
    &quot;FC, Forward bias junction fit parameter&quot;</font>;

  Real m_collectorConduct( start = 0.0);
  Real m_emitterConduct( start = 0.0);
  Real m_transitTimeVBCFactor( start = 0.0);
  Real m_excessPhaseFactor( start = 0.0);
  Real m_invEarlyVoltF( start = 0.0);
  Real m_invRollOffF( start = 0.0);
  Real m_invEarlyVoltR( start = 0.0);
  Real m_invRollOffR( start = 0.0);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>BjtModelLineParams;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BjtModelLineVariables<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.BjtModelLineVariables</H2>
<B>Record for bjt model line variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model line (also called model card) variables that are used for the bipolar transistor model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> BjtModelLineVariables <font color="darkgreen">&quot;Record for bjt model line variables&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_leakBEcurrent;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_leakBCcurrent;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_minBaseResist;
  Real m_invEarlyVoltF;
  Real m_invRollOffF;
  Real m_invEarlyVoltR;
  Real m_invRollOffR;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> m_collectorConduct;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> m_emitterConduct;
  Real m_transitTimeVBCFactor;
  Real m_excessPhaseFactor;

  Integer m_type;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>BjtModelLineVariables;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtModelLineInitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtModelLineInitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtModelLineInitEquations</H2>
<B>Initial calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>Within this function some parameters are initially precalculated from model line parameters.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>out_v</TD><TD>Output record with Bjt model line variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtModelLineInitEquations <font color="darkgreen">&quot;Initial calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_p <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> out_v <font color="darkgreen">
    &quot;Output record with Bjt model line variables&quot;</font>;

<font color="blue">protected </font>
  Real xfc;

<font color="blue">algorithm </font>
  out_v.m_type := <font color="blue">if </font>
                    (in_p.m_bPNP)<font color="blue"> then </font>-1<font color="blue"> else </font>1;

  <font color="blue">if </font>( <font color="blue">not </font>(in_p.m_leakBEcurrentIsGiven &gt; 0.5)<font color="blue"> and </font>(in_p.m_c2IsGiven &gt; 0.5))<font color="blue"> then</font>
    out_v.m_leakBEcurrent := in_p.m_c2 * in_p.m_satCur;
  <font color="blue">end if</font>;
  <font color="blue">if </font>( <font color="blue">not </font>(in_p.m_leakBCcurrentIsGiven &gt; 0.5)<font color="blue"> and </font>(in_p.m_c4IsGiven &gt; 0.5))<font color="blue"> then</font>
    out_v.m_leakBCcurrent := in_p.m_c4 * in_p.m_satCur;
  <font color="blue">end if</font>;
  <font color="blue">if </font>( <font color="blue">not </font>(in_p.m_minBaseResistIsGiven &gt; 0.5))<font color="blue"> then</font>
    out_v.m_minBaseResist := in_p.m_baseResist;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_earlyVoltF &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_invEarlyVoltF := 1 / in_p.m_earlyVoltF;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_rollOffF &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_invRollOffF := 1 / in_p.m_rollOffF;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_earlyVoltR &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_invEarlyVoltR := 1 / in_p.m_earlyVoltR;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_rollOffR &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_invRollOffR := 1 / in_p.m_rollOffR;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_collectorResist &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_collectorConduct := 1 / in_p.m_collectorResist;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_emitterResist &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_emitterConduct := 1 / in_p.m_emitterResist;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(in_p.m_transitTimeFVBC &lt;&gt; 0)<font color="blue"> then</font>
    out_v.m_transitTimeVBCFactor := 1 / (in_p.m_transitTimeFVBC * 1.44);
  <font color="blue">end if</font>;
  out_v.m_excessPhaseFactor := (in_p.m_excessPhase / (180.0 / Modelica.Constants.pi)) * in_p.m_transitTimeF;

  xfc  :=<font color="red"> Modelica.Math.log</font>(1 - in_p.m_depletionCapCoeff);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtModelLineInitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bjt3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.Bjt3</H2>
<B>Record for bjt3 device parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the device parameters that are used for the bipolar transistor bjt3 model in SPICE3.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> (Device Temperature).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Bjt3 <font color="darkgreen">&quot;Record for bjt3 device parameters&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A>;

 Real m_area(  start = 1.0) <font color="darkgreen">&quot;AREA&quot;</font>;
 Boolean m_bOff(  start = false) <font color="darkgreen">&quot;OFF&quot;</font>;
 <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_dICvbe( start = 0.0) <font color="darkgreen">&quot;IC_VBE&quot;</font>;
 Real m_bICvbeIsGiven( start = 0.0);
 <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_dICvce( start = 0.0) <font color="darkgreen">&quot;IC_VCE&quot;</font>;
 Real m_bICvceIsGiven( start = 0.0);
 Boolean m_bSensArea( start = false) <font color="darkgreen">&quot;SENS_AREA&quot;</font>;

  Real m_transitTimeHighCurrentF(start = 0.0);
  Real m_invRollOffF( start = 0);
  Real m_invRollOffR( start = 0);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Bjt3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bjt3Variables<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.Bjt3Variables</H2>
<B>Variables for the bjt3 model</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the bipoar transistor bjt3 model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Bjt3Variables <font color="darkgreen">&quot;Variables for the bjt3 model&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_transitTimeHighCurrentF( start = 0.0);
  Real m_invRollOffF( start = 0.0);
  Real m_invRollOffR( start = 0.0);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Bjt3Variables;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bjt3Calc<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.Bjt3Calc</H2>
<B>Bjt3 variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the bipolar transistor model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Bjt3Calc <font color="darkgreen">&quot;Bjt3 variables&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_tSatCur = 0;
  Real m_tBetaF = 1;
  Real m_tBetaR = 1;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_tBEleakCur = 1e-14;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_tBCleakCur = 1e-14;
  Real m_tBEcap = 0;
  Real m_tBEpot = 0.7;
  Real m_tBCcap = 0;
  Real m_tBCpot = 0.7;
  Real m_tDepCapBE = 0.7;
  Real m_tDepCapBC = 0.7;
  Real m_tVcrit = 0.7;
  Real m_dVt = 0.25;
  Real m_tF1c = 0;
  Real m_f2c = 0;
  Real m_f3c = 0;
  Real m_tF1e = 0;
  Real m_f2e = 0;
  Real m_f3e = 0;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Bjt3Calc;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CurrentsCapacitances<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.CurrentsCapacitances</H2>
<B>Bjt3 variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the bipoar transistor model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> CurrentsCapacitances <font color="darkgreen">&quot;Bjt3 variables&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> iBE( start = 0.0);<font color="darkgreen">  //current through diode dE1 (ideal part)</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> iBEN( start = 0.0);<font color="darkgreen"> //current through diode dE2 (non ideal part)</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> iBC( start = 0.0);<font color="darkgreen"> //current through diode dC1 (ideal part)</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> iBCN( start = 0.0);<font color="darkgreen"> //current through diode dC2 (non ideal part)</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> iCC( start = 0.0);<font color="darkgreen">  //channel current</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> capbc( start = 0.0);
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbe( start = 0.0);
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbx( start = 0.0);
  Real iXX( start = 0.0);
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capcs( start = 0.0);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CurrentsCapacitances;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjt3InitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3InitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjt3InitEquations</H2>
<B>Initial calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>Within this function some parameters are initially precalculated from model line parameters.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record Bjt3</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_pml</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>in_vl</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line variables</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A></TD><TD>out_v</TD><TD>Output record with Bjt variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjt3InitEquations <font color="darkgreen">&quot;Initial calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A> in_p <font color="darkgreen">&quot;Input record Bjt3&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_pml <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> in_vl <font color="darkgreen">
    &quot;Input record with Bjt model line variables&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A> out_v <font color="darkgreen">&quot;Output record with Bjt variables&quot;</font>;

<font color="blue">algorithm </font>
  <font color="darkgreen">// calculate the parameters that depend on the area factor</font>
  out_v.m_transitTimeHighCurrentF := in_pml.m_transitTimeHighCurrentF * in_p.m_area;
  out_v.m_invRollOffF             := in_vl.m_invRollOffF / in_p.m_area;
  out_v.m_invRollOffR             := in_vl.m_invRollOffR / in_p.m_area;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjt3InitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjt3CalcTempDependencies<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3CalcTempDependencies"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjt3CalcTempDependencies</H2>
<B>Temperature dependency calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>In this function for the bipolar transistor model temperature dependencies are calculated using temperature treating functions from the equation package.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A></TD><TD>in_p3</TD><TD>&nbsp;</TD><TD>Input record Bjt3</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>m</TD><TD>&nbsp;</TD><TD>Input record model</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>in_vl</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line variables</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A></TD><TD>out_c</TD><TD>Output record Bjt3Calc</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjt3CalcTempDependencies <font color="darkgreen">
  &quot;Temperature dependency calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A> in_p3 <font color="darkgreen">&quot;Input record Bjt3&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_p <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> m <font color="darkgreen">&quot;Input record model&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> in_vl <font color="darkgreen">
    &quot;Input record with Bjt model line variables&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A> out_c <font color="darkgreen">&quot;Output record Bjt3Calc&quot;</font>;

<font color="blue">protected </font>
  Real xfc;
  Real gmanew;
  Real fact1;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vt;
  Real fact2;
  Real egfet;
  Real arg;
  Real pbfact;
  Real ratlog;
  Real ratio1;
  Real factlog;
  Real factor;
  Real bfactor;
  Real pbo;
  Real gmaold;
<font color="blue">algorithm </font>

  fact1 := in_p.m_tnom/SpiceConstants.REFTEMP;
  vt := m.m_dTemp*SpiceConstants.CONSTKoverQ;
  fact2 := m.m_dTemp/SpiceConstants.REFTEMP;

  egfet  := 1.16 - (7.02e-4 * m.m_dTemp * m.m_dTemp) / (m.m_dTemp + 1108);

  arg := -egfet/(2*Modelica.Constants.k*m.m_dTemp) + 1.1150877/(
    Modelica.Constants.k*(SpiceConstants.REFTEMP + SpiceConstants.REFTEMP));
  pbfact := -2*vt*(1.5*<font color="red">Modelica.Math.log</font>(fact2) + SpiceConstants.CHARGE*
    arg);

  ratlog  :=<font color="red"> Modelica.Math.log</font>( m.m_dTemp / in_p.m_tnom);
  ratio1  := m.m_dTemp / in_p.m_tnom - 1;
  factlog := ratio1 * in_p.m_energyGap / vt + in_p.m_tempExpIS * ratlog;
  factor  :=<font color="red"> exp</font>( factlog);
  bfactor :=<font color="red"> exp</font>(ratlog * in_p.m_betaExp);
  pbo    := (in_p.m_potentialBE - pbfact) / fact1;
  gmaold := (in_p.m_potentialBE - pbo) / pbo;

  out_c.m_tSatCur    := in_p.m_satCur * factor * in_p3.m_area;
  out_c.m_tBetaF     := in_p.m_betaF * bfactor;
  out_c.m_tBetaR     := in_p.m_betaR * bfactor;
  out_c.m_tBEleakCur := in_vl.m_leakBEcurrent *<font color="red"> exp</font>(factlog / in_p.m_leakBEemissionCoeff) / bfactor
                        * in_p3.m_area;
  out_c.m_tBCleakCur := in_vl.m_leakBCcurrent *<font color="red"> exp</font>(factlog / in_p.m_leakBCemissionCoeff) / bfactor
                        * in_p3.m_area;

  out_c.m_tBEcap := in_p.m_depletionCapBE/(1 + in_p.m_junctionExpBE*(4e-4
    *(in_p.m_tnom - SpiceConstants.REFTEMP) - gmaold));
  out_c.m_tBEpot := fact2 * pbo + pbfact;

  gmanew := (out_c.m_tBEpot - pbo) / pbo;

  out_c.m_tBEcap := out_c.m_tBEcap*(1 + in_p.m_junctionExpBE*(4e-4*(m.m_dTemp
     - SpiceConstants.REFTEMP) - gmanew));

  pbo    := (in_p.m_potentialBC - pbfact) / fact1;
  gmaold := (in_p.m_potentialBC - pbo) / pbo;

  out_c.m_tBCcap := in_p.m_depletionCapBC/(1 + in_p.m_junctionExpBC*(4e-4
    *(in_p.m_tnom - SpiceConstants.REFTEMP) - gmaold));
  out_c.m_tBCpot := fact2 * pbo + pbfact;

  gmanew := (out_c.m_tBCpot - pbo) / pbo;

  out_c.m_tBCcap := out_c.m_tBCcap*(1 + in_p.m_junctionExpBC*(4e-4*(m.m_dTemp
     - SpiceConstants.REFTEMP) - gmanew));

  out_c.m_tDepCapBE := in_p.m_depletionCapCoeff * out_c.m_tBEpot;
  out_c.m_tDepCapBC := in_p.m_depletionCapCoeff * out_c.m_tBCpot;
  xfc               :=<font color="red"> Modelica.Math.log</font>( 1 - in_p.m_depletionCapCoeff);
  out_c.m_tVcrit := vt*<font color="red">Modelica.Math.log</font>(vt/(SpiceConstants.CONSTroot2*in_p.m_satCur));
  out_c.m_dVt       := vt;

  <font color="darkgreen">// calculate the parameters that depend on the area factor</font>
  out_c.m_tBEcap := out_c.m_tBEcap * in_p3.m_area;
  out_c.m_tBCcap := out_c.m_tBCcap * in_p3.m_area;
  (out_c.m_tF1c,out_c.m_f2c,out_c.m_f3c) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs</font>(
          in_p.m_junctionExpBC,
          in_p.m_depletionCapCoeff,
          out_c.m_tBCpot);
  (out_c.m_tF1e,out_c.m_f2e,out_c.m_f3e) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs</font>(
          in_p.m_junctionExpBE,
          in_p.m_depletionCapCoeff,
          out_c.m_tBEpot);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjt3CalcTempDependencies;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjt3NoBypassCode<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjt3NoBypassCode"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjt3NoBypassCode</H2>
<B>Calculation of currents</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function NoBypassCode calculates the currents (and the capacitances) that are necessary for the currents to be used in the toplevel model.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>in_m</TD><TD>&nbsp;</TD><TD>Input record model</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"
>Bjt</A></TD><TD>in_p3</TD><TD>&nbsp;</TD><TD>Input record Bjt3</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A></TD><TD>in_c</TD><TD>&nbsp;</TD><TD>Input record Bjt3Calc</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>in_vl</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line variables</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>in_m_pVoltageValues[6]</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Boolean</TD><TD>in_m_bInit</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"
>CurrentsCapacitances</A></TD><TD>out_cc</TD><TD>Output record with calculated currents and capacitances</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbe</TD><TD>Capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbc</TD><TD>Capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbx</TD><TD>Capacitance [F]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjt3NoBypassCode <font color="darkgreen">&quot;Calculation of currents&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> in_m <font color="darkgreen">&quot;Input record model&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"
>Bjt</A> in_p3 <font color="darkgreen">&quot;Input record Bjt3&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_p <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A> in_c <font color="darkgreen">&quot;Input record Bjt3Calc&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> in_vl <font color="darkgreen">
    &quot;Input record with Bjt model line variables&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A>[6] in_m_pVoltageValues;<font color="darkgreen"> /* 1 Col; 2 Base; 3 Emit; 4 ColP; 5 BaseP; 6 EmitP */</font>
  <font color="blue">input </font>Boolean in_m_bInit;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"
>CurrentsCapacitances</A> out_cc <font color="darkgreen">
    &quot;Output record with calculated currents and capacitances&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbe <font color="darkgreen">&quot;Capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbc <font color="darkgreen">&quot;Capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbx <font color="darkgreen">&quot;Capacitance&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vce;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vbe;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vbx;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vbc;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> gbe;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cbe;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> gbc;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cbc;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> gben;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cben;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> gbcn;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cbcn;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cjbe;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cjbc;
    Real dqbdve;
    Real dqbdvc;
    Real qb;
    Real q1;
    Real q2;
    Real arg;
    Real sqarg;
    Real cc;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cex;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> gex;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> ttime;
    Real step;
    Real laststep;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> bcex0;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> bcex1;
    Real arg1;
    Real arg2;
    Real denom;
    Real arg3;
    Real rbpr;
    Real rbpi;
    Real gx;
    Real xjrb;
    Real go;
    Real gm;
  Real captt;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> chargebe;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> chargebc;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> chargebx;
    Real argtf;
    Real exponent;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp;

    Real aux1;
    Real aux2;

<font color="blue">algorithm </font>
  vce := in_p.m_type * (in_m_pVoltageValues[4] - in_m_pVoltageValues[6]);<font color="darkgreen"> // ( ColP, EmitP);</font>
  vbe := in_p.m_type * (in_m_pVoltageValues[5] - in_m_pVoltageValues[6]);<font color="darkgreen"> // ( BaseP, EmitP);</font>
  vbx := in_p.m_type * (in_m_pVoltageValues[2] - in_m_pVoltageValues[4]);<font color="darkgreen"> // ( Base, ColP);</font>

  <font color="blue">if </font>(<font color="red">SpiceRoot.useInitialConditions</font>())<font color="blue"> then</font>
    <font color="blue">if </font>(in_p3.m_bICvbeIsGiven &gt; 0.5)<font color="blue"> then</font>
      vbe := in_p.m_type * in_p3.m_dICvbe;
    <font color="blue">end if</font>;
    <font color="blue">if </font>(in_p3.m_bICvceIsGiven &gt; 0.5)<font color="blue"> then</font>
      vce := in_p.m_type * in_p3.m_dICvce;
    <font color="blue">end if</font>;
    vbx := vbe - vce;
  <font color="blue">elseif </font>(<font color="red">SpiceRoot.initJunctionVoltages</font>())<font color="blue"> then</font>
    <font color="blue">if </font>(in_p3.m_bOff)<font color="blue"> then</font>
      vbe := 0.0;
      vce := 0.0;
      vbx := 0.0;
    <font color="blue">else</font>
      vbe := in_c.m_tVcrit;
      vce := vbe;
      vbx := 0.0;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  vbc := vbe - vce;

  <font color="darkgreen">  // junction current</font>
  (cbe,gbe) :=<font color="red"> Modelica.Electrical.Spice3.Internal.Functions.junction2</font>(
          vbe,
          in_m.m_dTemp,
          in_p.m_emissionCoeffF,
          in_c.m_tSatCur);

  out_cc.iBE   := in_p.m_type * cbe / in_c.m_tBetaF;
  (cben,gben) :=<font color="red"> Modelica.Electrical.Spice3.Internal.Functions.junction2</font>(
          vbe,
          in_m.m_dTemp,
          in_p.m_leakBEemissionCoeff,
          in_c.m_tBEleakCur);
  out_cc.iBEN  := in_p.m_type * cben;
  (cbc,gbc) :=<font color="red"> Modelica.Electrical.Spice3.Internal.Functions.junction2</font>(
          vbc,
          in_m.m_dTemp,
          in_p.m_emissionCoeffR,
          in_c.m_tSatCur);
  out_cc.iBC   := in_p.m_type * cbc / in_c.m_tBetaR;
  (cbcn,gbcn) :=<font color="red"> Modelica.Electrical.Spice3.Internal.Functions.junction2</font>(
          vbc,
          in_m.m_dTemp,
          in_p.m_leakBCemissionCoeff,
          in_c.m_tBCleakCur);
  out_cc.iBCN  := in_p.m_type * cbcn;
  cjbe         := cbe / in_c.m_tBetaF + cben;
  cjbc         := cbc / in_c.m_tBetaR + cbcn;

  <font color="darkgreen">// determine base charge terms</font>
  q1 := 1.0/(1.0 - in_p.m_invEarlyVoltF * vbc - in_p.m_invEarlyVoltR * vbe);
  <font color="blue">if </font>(in_vl.m_invRollOffF == 0<font color="blue"> and </font>in_vl.m_invRollOffR == 0)<font color="blue"> then</font>
    qb     := q1;
    dqbdve := q1*qb*in_p.m_invEarlyVoltR;
    dqbdvc := q1*qb*in_p.m_invEarlyVoltF;
  <font color="blue">else</font>
    q2    := in_vl.m_invRollOffF*cbe + in_vl.m_invRollOffR*cbc;
    arg   :=<font color="red"> max</font>( 0.0, 1+4*q2);
    sqarg := 1;
    <font color="blue">if </font>(arg &lt;&gt; 0)<font color="blue"> then</font>
      sqarg :=<font color="red"> sqrt</font>(arg);
    <font color="blue">end if</font>;
    qb     := q1*(1+sqarg)/2;
    dqbdve := q1*(qb*in_p.m_invEarlyVoltR + in_vl.m_invRollOffF*gbe/sqarg);
    dqbdvc := q1*(qb*in_p.m_invEarlyVoltF + in_vl.m_invRollOffR*gbc/sqarg);
  <font color="blue">end if</font>;

  <font color="darkgreen">// determine dc incremental conductances - Weil&#39;s approximation</font>
  cc    := 0.0;
  cex   := cbe;
  gex   := gbe;
  ttime := 1;
  <font color="blue">if </font>((in_vl.m_excessPhaseFactor &lt;&gt; 0)<font color="blue"> and </font>(ttime &gt; 0.0))<font color="blue"> then</font>
    step     :=0;
    laststep :=1;
    bcex0    :=0;
    bcex1    :=0;
    <font color="blue">if </font>( bcex1 == 0.0)<font color="blue"> then</font>
         bcex1 := cbe / qb;
         bcex0 := bcex1;

    <font color="blue">end if</font>;
    arg1  := step / in_vl.m_excessPhaseFactor;
    arg2  := 3 * arg1;
    arg1  := arg2 * arg1;
    denom := 1 + arg1 + arg2;
    arg3  := arg1 / denom;
    cc    := (bcex0 * (1 + step / laststep + arg2) -
             bcex1 * step / laststep) / denom;
    cex   := cbe * arg3;
    gex   := gbe * arg3;

  <font color="blue">end if</font>;
  cc := cc+(cex-cbc)/qb;

  <font color="darkgreen">// resistances</font>
  rbpr := in_vl.m_minBaseResist / in_p3.m_area;
  rbpi := in_p.m_baseResist / in_p3.m_area-rbpr;
  gx   := rbpr + rbpi / qb;
  xjrb := in_p.m_baseCurrentHalfResist * in_p3.m_area;
  <font color="blue">if </font>(xjrb &lt;&gt; 0)<font color="blue"> then</font>
    arg1 :=<font color="red"> max</font>( (cjbe + cjbc) / xjrb, 1e-9);
    arg2 := (-1 +<font color="red"> sqrt</font>( 1 + 14.59025 * arg1)) / 2.4317 /<font color="red"> sqrt</font>( arg1);
    arg1 :=<font color="red"> tan</font>(arg2);
    gx   := rbpr + 3 * rbpi * (arg1-arg2) / arg2 / arg1 / arg1;
  <font color="blue">end if</font>;
  <font color="blue">if </font>(gx &lt;&gt; 0)<font color="blue"> then</font>
    gx := 1 / gx;
  <font color="blue">end if</font>;

  <font color="darkgreen">// determine dc incremental conductances</font>
  go := (gbc+(cex-cbc)*dqbdvc/qb)/qb;
  gm := (gex-(cex-cbc)*dqbdve/qb)/qb - go;
  out_cc.iCC := in_p.m_type * cc;

  <font color="darkgreen">// charge storage elements and transit time calculation</font>
  captt := 0.0;
  <font color="blue">if </font>(in_p.m_transitTimeF &lt;&gt; 0.0<font color="blue"> and </font>vbe &gt; 0.0)<font color="blue"> then</font>
    argtf := 0.0;
    arg2  := 0.0;
    arg3  := 0.0;
    <font color="blue">if </font>(in_p.m_transitTimeBiasCoeffF &lt;&gt; 0.0)<font color="blue"> then</font>
      argtf := in_p.m_transitTimeBiasCoeffF;
      <font color="blue">if </font>(in_vl.m_transitTimeVBCFactor &lt;&gt; 0.0)<font color="blue"> then</font>
        exponent :=<font color="red"> min</font>( 50., vbc * in_vl.m_transitTimeVBCFactor);
        argtf    := argtf *<font color="red"> exp</font>( exponent);
      <font color="blue">end if</font>;
        arg2 := argtf;
        <font color="blue">if </font>(in_p.m_transitTimeHighCurrentF &lt;&gt; 0)<font color="blue"> then</font>
          temp  := cbe / (cbe + in_p.m_transitTimeHighCurrentF);
          argtf := argtf * temp * temp;
          arg2  := argtf * (3-temp-temp);
        <font color="blue">end if</font>;
        arg3 := cbe * argtf * in_vl.m_transitTimeVBCFactor;
    <font color="blue">end if</font>;
    cbe   := cbe * (1 + argtf) / qb;
    gbe   := (gbe * (1 + arg2) - cbe * dqbdve) / qb;
    captt := in_p.m_transitTimeF * (arg3 - cbe * dqbdvc) / qb;
  <font color="blue">end if</font>;
  (capbe,chargebe) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime</font>(
          in_c.m_tBEcap,
          vbe,
          in_c.m_tDepCapBE,
          in_p.m_junctionExpBE,
          in_c.m_tBEpot,
          in_c.m_tF1e,
          in_c.m_f2e,
          in_c.m_f3e,
          in_p.m_transitTimeF,
          gbe,
          cbe);

  out_cc.iXX        := 0;
  aux1 := in_c.m_tBCcap*in_p.m_baseFractionBCcap;
  (capbc,chargebc) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime</font>(
          aux1,
          vbc,
          in_c.m_tDepCapBC,
          in_p.m_junctionExpBC,
          in_c.m_tBCpot,
          in_c.m_tF1c,
          in_c.m_f2c,
          in_c.m_f3c,
          in_p.m_transitTimeR,
          gbc,
          cbc);

  aux2:= in_c.m_tBCcap*(1. - in_p.m_baseFractionBCcap);
  (capbx,chargebx) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCap</font>(
          aux2,
          vbx,
          in_c.m_tDepCapBC,
          in_p.m_junctionExpBC,
          in_c.m_tBCpot,
          in_c.m_tF1c,
          in_c.m_f2c,
          in_c.m_f3c);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjt3NoBypassCode;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bjt<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.Bjt</H2>
<B>Record for bjt device parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the device parameters that are used for the bipolar transistor bjt model in SPICE3.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A> (Record for bjt3 device parameters).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Real</TD><TD>m_area.start</TD><TD>1.0</TD><TD>AREA</TD></TR>
<TR><TD>Boolean</TD><TD>m_bOff.start</TD><TD>false</TD><TD>OFF</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_dICvbe.start</TD><TD>0.0</TD><TD>IC_VBE [V]</TD></TR>
<TR><TD>Real</TD><TD>m_bICvbeIsGiven.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_dICvce.start</TD><TD>0.0</TD><TD>IC_VCE [V]</TD></TR>
<TR><TD>Real</TD><TD>m_bICvceIsGiven.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
<TR><TD>Boolean</TD><TD>m_bSensArea.start</TD><TD>false</TD><TD>SENS_AREA</TD></TR>
<TR><TD>Real</TD><TD>m_transitTimeHighCurrentF.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_invRollOffF.start</TD><TD>0</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_invRollOffR.start</TD><TD>0</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Bjt <font color="darkgreen">&quot;Record for bjt device parameters&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Bjt;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BjtVariables<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.BjtVariables</H2>
<B>Variables for the bjt model</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the bipoar transistor bjt model in SPICE3.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A> (Variables for the bjt3 model).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>m_transitTimeHighCurrentF.start</TD><TD>0.0</TD><TD>[A]</TD></TR>
<TR><TD>Real</TD><TD>m_invRollOffF.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_invRollOffR.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> BjtVariables <font color="darkgreen">&quot;Variables for the bjt model&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A>;

  Real m_CScap;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>BjtVariables;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtInitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtInitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtInitEquations</H2>
<B>Initial calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>Within this function some parameters are initially precalculated from model line parameters.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"
>Bjt</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record Bjt</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_pml</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>in_vl</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line variables</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"
>BjtVariables</A></TD><TD>out_v</TD><TD>Output record with Bjt variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtInitEquations <font color="darkgreen">&quot;Initial calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt"
>Bjt</A> in_p <font color="darkgreen">&quot;Input record Bjt&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_pml <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> in_vl <font color="darkgreen">
    &quot;Input record with Bjt model line variables&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"
>BjtVariables</A> out_v <font color="darkgreen">&quot;Output record with Bjt variables&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Variables"
>Bjt3Variables</A> v3 <font color="darkgreen">&quot;Record with Bjt variables&quot;</font>;

<font color="blue">algorithm </font>
  v3 :=<font color="red"> bjt3InitEquations</font>(in_p, in_pml, in_vl);
  <font color="darkgreen">// calculate the parameters that depend on the area factor</font>
  out_v.m_CScap := in_pml.m_capCS * in_p.m_area;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtInitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtNoBypassCode<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtNoBypassCode"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtNoBypassCode</H2>
<B>Calculation of currents</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function NoBypassCode calculates the currents (and the capacitances) that are necessary for the currents to be used in the toplevel model.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>in_m</TD><TD>&nbsp;</TD><TD>Input record model</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A></TD><TD>in_p3</TD><TD>&nbsp;</TD><TD>Input record Bjt3</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with Bjt model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A></TD><TD>in_c</TD><TD>&nbsp;</TD><TD>Input record Bjt3Calc</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"
>BjtVariables</A></TD><TD>in_v</TD><TD>&nbsp;</TD><TD>Input record with Bjt variables</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A></TD><TD>in_vl</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>in_m_pVoltageValues[6]</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Boolean</TD><TD>in_m_bInit</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"
>CurrentsCapacitances</A></TD><TD>out_cc</TD><TD>Output record with calculated currents and capacitances</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbe</TD><TD>Capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbc</TD><TD>Capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capbx</TD><TD>Capacitance [F]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtNoBypassCode <font color="darkgreen">&quot;Calculation of currents&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> in_m <font color="darkgreen">&quot;Input record model&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A> in_p3 <font color="darkgreen">&quot;Input record Bjt3&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> in_p <font color="darkgreen">&quot;Input record with Bjt model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3Calc"
>Bjt3Calc</A> in_c <font color="darkgreen">&quot;Input record Bjt3Calc&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtVariables"
>BjtVariables</A> in_v <font color="darkgreen">&quot;Input record with Bjt variables&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineVariables"
>BjtModelLineVariables</A> in_vl;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A>[6] in_m_pVoltageValues;<font color="darkgreen"> /* 1 Col; 2 Base; 3 Emit; 4 Subst; 5 ColP; 6 BaseP; 7 EmitP */</font>

  <font color="blue">input </font>Boolean in_m_bInit;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.CurrentsCapacitances"
>CurrentsCapacitances</A> out_cc <font color="darkgreen">
    &quot;Output record with calculated currents and capacitances&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbe <font color="darkgreen">&quot;Capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbc <font color="darkgreen">&quot;Capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capbx <font color="darkgreen">&quot;Capacitance&quot;</font>;
<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A>[6] bjt3_VoltageValues;<font color="darkgreen"> /* 1 Col; 2 Base; 3 Emit; 4 ColP; 5 BaseP; 6 EmitP */</font>
  Integer i;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capcs;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> chargecs;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vcs;
  Real arg;
  Real sarg;

<font color="blue">algorithm </font>
  <font color="darkgreen">// Bjt3 has got only 6 pins, therefore new vector VoltageValues</font>
  <font color="blue">for </font>i<font color="blue"> in </font>1:3<font color="blue"> loop</font>
    bjt3_VoltageValues[i] := in_m_pVoltageValues[i];
  <font color="blue">end for</font>;
  <font color="blue">for </font>i<font color="blue"> in </font>4:6<font color="blue"> loop</font>
    bjt3_VoltageValues[i] := in_m_pVoltageValues[i];
  <font color="blue">end for</font>;

  (out_cc, capbe, capbc, capbx)   :=<font color="red"> bjt3NoBypassCode</font>(in_m, in_p3, in_p, in_c, in_vl, bjt3_VoltageValues,
               in_m_bInit);
  capcs    := 0;
  chargecs := 0;
  vcs      := in_p.m_type * (0- in_m_pVoltageValues[4]);<font color="darkgreen"> // ( Subst,  ColP);</font>
  <font color="blue">if </font>(vcs &lt; 0)<font color="blue"> then</font>
    arg      := 1 - vcs / in_p.m_potentialSubstrate;
    sarg     :=<font color="red"> exp</font>( -in_p.m_exponentialSubstrate *<font color="red"> Modelica.Math.log</font>( arg));
    capcs    := in_v.m_CScap * sarg;
    chargecs := in_p.m_potentialSubstrate * in_v.m_CScap *
                (1-arg*sarg)/(1-in_p.m_exponentialSubstrate);
  <font color="blue">else</font>
    capcs    := in_v.m_CScap * (1 + in_p.m_exponentialSubstrate * vcs / in_p.m_potentialSubstrate);
    chargecs := vcs * in_v.m_CScap *(1+in_p.m_exponentialSubstrate*vcs/
                                 (2*in_p.m_potentialSubstrate));
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtNoBypassCode;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtRenameParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParameters"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtRenameParameters</H2>
<B>Technology parameter renaming</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function assigns the external (given by the user, e.g., IS) technology parameters
to the internal parameters (e.g., m_satCur). It also does the analysis of the IsGiven values.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardBJT"
>ModelcardBJT</A></TD><TD>ex</TD><TD>&nbsp;</TD><TD>Modelcard with technologie parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A></TD><TD>con</TD><TD>&nbsp;</TD><TD>Spice constants</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>intern</TD><TD>Output record with Bjt model line parameters</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtRenameParameters <font color="darkgreen">&quot;Technology parameter renaming&quot;</font>
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardBJT"
>ModelcardBJT</A> ex <font color="darkgreen">&quot;Modelcard with technologie parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A> con <font color="darkgreen">&quot;Spice constants&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> intern <font color="darkgreen">
    &quot;Output record with Bjt model line parameters&quot;</font>;
<font color="blue">algorithm </font>

  intern.m_satCur := ex.IS;
  intern.m_betaF := ex.BF;
  intern.m_emissionCoeffF := ex.NF;
  intern.m_leakBEemissionCoeff := ex.NE;

  intern.m_leakBEcurrentIsGiven := <font color="blue">if </font>(ex.ISE &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  intern.m_leakBEcurrent := <font color="blue">if </font>
                              (ex.ISE &gt; -1e40)<font color="blue"> then </font>ex.ISE<font color="blue"> else </font>0;

  intern.m_c2IsGiven := <font color="blue">if </font>(ex.C2 &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  intern.m_c2 := <font color="blue">if </font>(ex.C2 &gt; -1e40)<font color="blue"> then </font>ex.C2<font color="blue"> else </font>0;

  intern.m_leakBCcurrentIsGiven := <font color="blue">if </font>(ex.ISC &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  intern.m_leakBCcurrent := <font color="blue">if </font>(ex.ISC &gt; -1e40)<font color="blue"> then </font>ex.ISC<font color="blue"> else </font>0;

  intern.m_c4IsGiven := <font color="blue">if </font>(ex.C4 &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  intern.m_c4 := <font color="blue">if </font>(ex.C4 &gt; -1e40)<font color="blue"> then </font>ex.C4<font color="blue"> else </font>0;

  intern.m_betaR := ex. BR;
  intern.m_emissionCoeffR := ex.NR;
  intern.m_leakBCemissionCoeff := ex.NC;
  intern.m_earlyVoltF := ex.VAF;
  intern.m_rollOffF := ex.IKF;
  intern.m_earlyVoltR := ex.VAR;
  intern.m_rollOffR := ex.IKR;
  intern.m_emitterResist := ex.RE;
  intern.m_collectorResist := ex.RC;
  intern.m_baseCurrentHalfResist := ex.IRB;
  intern.m_baseResist := ex.RB;

  intern.m_minBaseResistIsGiven := <font color="blue">if </font>(ex.RBM &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  intern.m_minBaseResist := <font color="blue">if </font>(ex.RBM &gt; -1e40)<font color="blue"> then </font>ex.RBM<font color="blue"> else </font>0;

  intern.m_depletionCapBE :=ex.CJE;
  intern.m_potentialBE :=ex.VJE;
  intern.m_junctionExpBE := ex.MJE;
  intern.m_transitTimeF :=ex.TF;
  intern.m_transitTimeBiasCoeffF := ex.XTF;
  intern.m_transitTimeHighCurrentF := ex.ITF;
  intern.m_transitTimeFVBC :=ex.VTF;
  intern.m_excessPhase := ex.PTF;
  intern.m_depletionCapBC := ex.CJC;
  intern.m_potentialBC := ex.VJC;
  intern.m_junctionExpBC := ex.MJC;
  intern.m_baseFractionBCcap := ex.XCJC;
  intern.m_transitTimeR := ex.TR;
  intern.m_capCS := ex.CJS;
  intern.m_potentialSubstrate := ex.VJS;
  intern.m_exponentialSubstrate := ex.MJS;
  intern.m_betaExp := ex.XTB;
  intern.m_energyGap := ex.EG;
  intern.m_tempExpIS := ex.XTI;
  intern.m_fNcoef := ex.KF;
  intern.m_fNexp := ex.AF;
  intern.m_depletionCapCoeff :=ex.FC;
  intern.m_tnom := <font color="blue">if </font>(ex.TNOM &gt; -1e40)<font color="blue"> then </font>ex.TNOM + SpiceConstants.CONSTCtoK<font color="blue"> else </font>300.15;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtRenameParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtRenameParametersDev<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDev"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtRenameParametersDev</H2>
<B>Temperature calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function assigns the external (given by the user, e.g., AREA) device parameters to the internal parameters (e.g., m_area). It also does the analysis of the IsGiven values.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>AREA</TD><TD>&nbsp;</TD><TD>Area factor</TD></TR>
<TR><TD>Boolean</TD><TD>OFF</TD><TD>&nbsp;</TD><TD>Optional initial condition: false - IC not used, true - IC used, not implemented yet</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>IC_VBE</TD><TD>&nbsp;</TD><TD>Initial condition value, not yet implemented [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>IC_VCE</TD><TD>&nbsp;</TD><TD>Initial condition value, not yet implemented [V]</TD></TR>
<TR><TD>Boolean</TD><TD>SENS_AREA</TD><TD>&nbsp;</TD><TD>Flag for sensitivity analysis, not yet implemented</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A></TD><TD>dev</TD><TD>Output record Bjt3</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtRenameParametersDev <font color="darkgreen">&quot;Temperature calculation&quot;</font>
 <font color="blue">input </font>Real AREA <font color="darkgreen">&quot;Area factor&quot;</font>;
 <font color="blue">input </font>Boolean OFF <font color="darkgreen">
    &quot;Optional initial condition: false - IC not used, true - IC used, not implemented yet&quot;</font>;
 <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> IC_VBE <font color="darkgreen">
    &quot;Initial condition value, not yet implemented&quot;</font>;
 <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> IC_VCE <font color="darkgreen">
    &quot;Initial condition value, not yet implemented&quot;</font>;
 <font color="blue">input </font>Boolean SENS_AREA <font color="darkgreen">&quot;Flag for sensitivity analysis, not yet implemented&quot;</font>;

 <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.Bjt3"
>Bjt3</A> dev <font color="darkgreen">&quot;Output record Bjt3&quot;</font>;

<font color="blue">algorithm </font>
  dev.m_area := AREA;
  dev.m_bOff := OFF;

  dev.m_bICvbeIsGiven := <font color="blue">if </font>(IC_VBE &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  dev.m_dICvbe := <font color="blue">if </font>(IC_VBE &gt; -1e40)<font color="blue"> then </font>IC_VBE<font color="blue"> else </font>0;

  dev.m_bICvceIsGiven := <font color="blue">if </font>(IC_VCE &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  dev.m_dICvce := <font color="blue">if </font>(IC_VCE &gt; -1e40)<font color="blue"> then </font>IC_VCE<font color="blue"> else </font>0;

  dev.m_bSensArea := SENS_AREA;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtRenameParametersDev;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtRenameParametersDevTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersDevTemp"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtRenameParametersDevTemp</H2>
<B>Temperature calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function calculates device parameters wehich are temperature dependent.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Temp_C</A></TD><TD>TEMP</TD><TD>&nbsp;</TD><TD>Temperature [degC]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>m</TD><TD>Output record model</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtRenameParametersDevTemp <font color="darkgreen">&quot;Temperature calculation&quot;</font>
 <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> TEMP <font color="darkgreen">&quot;Temperature&quot;</font>;

<font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> m <font color="darkgreen">&quot;Output record model&quot;</font>;
<font color="blue">algorithm </font>

 m.m_dTemp :=TEMP + SpiceConstants.CONSTCtoK;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtRenameParametersDevTemp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE bjtRenameParametersType<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Bjt3.bjtRenameParametersType"></A><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3"
>Modelica.Electrical.Spice3.Internal.Bjt3</A>.bjtRenameParametersType</H2>
<B>Type</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function assigns the external (given by the user, e.g. AREA) device parameters to the internal parameters (e.g. m_area). It also does the analysis of the IsGiven values.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>TBJT</TD><TD>&nbsp;</TD><TD>Type</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A></TD><TD>dev_type</TD><TD>Outputrecord Bjt3</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> bjtRenameParametersType <font color="darkgreen">&quot;Type&quot;</font>

 <font color="blue">input </font>Real TBJT <font color="darkgreen">&quot;Type&quot;</font>;
 <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Bjt3.html#Modelica.Electrical.Spice3.Internal.Bjt3.BjtModelLineParams"
>BjtModelLineParams</A> dev_type <font color="darkgreen">&quot;Outputrecord Bjt3&quot;</font>;
<font color="blue">algorithm </font>
  dev_type.m_type := TBJT;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>bjtRenameParametersType;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.
</address></BODY>
</HTML>
