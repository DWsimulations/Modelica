<HTML>
<HEAD>
<TITLE>Modelica.Electrical.Spice3.Internal.Diode</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Records and functions for diode model&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Diode<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode"></A><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal"
>Modelica.Electrical.Spice3.Internal</A>.Diode</H2>
<B>Records and functions for diode model</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This package Diode contains functions and record with data of the semiconductor diode model.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A>
</TD><TD>Record for Diode model line parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables"
>DiodeModelLineVariables</A>
</TD><TD>Record for Diode model line variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.DiodeParams" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A>
</TD><TD>Record for Diode device parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A>
</TD><TD>Variables for the diode model</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"
>DiodeCalc</A>
</TD><TD>Diode variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances"
>CurrentsCapacitances</A>
</TD><TD>Diode variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquations"
>diodeModelLineInitEquations</A>
</TD><TD>Initial precalculation of model line parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeInitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeInitEquations"
>diodeInitEquations</A>
</TD><TD>Initial calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeCalcTempDependencies" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeCalcTempDependencies"
>diodeCalcTempDependencies</A>
</TD><TD>Temperature dependency calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeNoBypassCode" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeNoBypassCode"
>diodeNoBypassCode</A>
</TD><TD>Calculation of currents</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeCalcAdditionalValues" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeCalcAdditionalValues"
>diodeCalcAdditionalValues</A>
</TD><TD>Calculation of additional values</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParameters" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParameters"
>diodeRenameParameters</A>
</TD><TD>Technology parameter renaming</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDev" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDev"
>diodeRenameParametersDev</A>
</TD><TD>Temperature calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDevTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDevTemp"
>diodeRenameParametersDevTemp</A>
</TD><TD>Temperature calculation</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DiodeModelLineParams<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.DiodeModelLineParams</H2>
<B>Record for Diode model line parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model line (also called model card) parameters that are used for the diode model  in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> DiodeModelLineParams <font color="darkgreen">&quot;Record for Diode model line parameters&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_satCur( start = 1.0e-14) <font color="darkgreen">&quot;IS, Saturation current&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> m_resist( start = 0.0) <font color="darkgreen">&quot;RS, Ohmic resistance&quot;</font>;
  Real m_emissionCoeff( start = 1.0) <font color="darkgreen">&quot;N, Emission Coefficient&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> m_transitTime( start = 0.0) <font color="darkgreen">&quot;TT, Transit Time&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_junctionCap( start = 0.0) <font color="darkgreen">
    &quot;CJO, Junction capacitance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_junctionPot( start = 1.0) <font color="darkgreen">&quot;VJ, Junction potential&quot;</font>;
  Real m_gradingCoeff( start = 0.5) <font color="darkgreen">&quot;M, Grading coefficient&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.ActivationEnergy"
>Modelica.SIunits.ActivationEnergy</A> m_activationEnergy( start = 1.11) <font color="darkgreen">
    &quot;EG, Activation energy&quot;</font>;
  Real m_saturationCurrentExp( start = 3.0) <font color="darkgreen">
    &quot;XTI, Saturation current temperature exp.&quot;</font>;
  Real m_depletionCapCoeff( start = 0.5) <font color="darkgreen">
    &quot;FC, Forward bias junction fit parameter&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_breakdownVoltage <font color="darkgreen">&quot;BV, Reverse breakdown voltage&quot;</font>;
  Real m_pBvIsGiven <font color="darkgreen">&quot;BV is given value&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_breakdownCurrent( start = 1.0e-3) <font color="darkgreen">
    &quot;IBV, Current at reverse breakdown voltage&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> m_nomTemp( start=SpiceConstants.CKTnomTemp) <font color="darkgreen">
    &quot;TNOM, Parameter measurement temperature&quot;</font>;
  Real m_fNcoef( start = 0.0) <font color="darkgreen">&quot;KF, flicker noise coefficient&quot;</font>;
  Real m_fNexp( start = 1.0) <font color="darkgreen">&quot;AF, flicker noise exponent&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> m_conductance <font color="darkgreen">&quot;G, Ohmic conductance&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DiodeModelLineParams;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DiodeModelLineVariables<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.DiodeModelLineVariables</H2>
<B>Record for Diode model line variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model line (also called model card) variables  that are used for the diode model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> DiodeModelLineVariables <font color="darkgreen">
  &quot;Record for Diode model line variables&quot;</font>

  Real m_gradingCoeff;
  Real m_activationEnergy;
  Real m_depletionCapCoeff;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> m_conductance;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DiodeModelLineVariables;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DiodeParams<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.DiodeParams</H2>
<B>Record for Diode device parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the device parameters that are used for the diode model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> DiodeParams <font color="darkgreen">&quot;Record for Diode device parameters&quot;</font>

  Real m_area(start = 1.0) <font color="darkgreen">&quot;AREA, Area factor&quot;</font>;
  Boolean m_bOff(start = false) <font color="darkgreen">&quot;OFF, Initially off&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_dIC(start = 0.0) <font color="darkgreen">&quot;IC, Initial device voltage&quot;</font>;
  Real m_pIcIsGiven <font color="darkgreen">&quot;IC is giben value&quot;</font>;
  Boolean m_bSensArea(start = false) <font color="darkgreen">
    &quot;SENS_AREA, flag to request sensitivity WRT area&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DiodeParams;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DiodeVariables<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.DiodeVariables</H2>
<B>Variables for the diode model</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model  variables that are used for the diode model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> DiodeVariables <font color="darkgreen">&quot;Variables for the diode model&quot;</font>

  Real m_pBvIsGiven <font color="darkgreen">&quot;Additional BV is given variable&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DiodeVariables;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DiodeCalc<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.DiodeCalc</H2>
<B>Diode variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the diode model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> DiodeCalc <font color="darkgreen">&quot;Diode variables&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_tJctPot;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_tJctCap;
  Real m_tF1;
  Real m_f2;
  Real m_f3;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_tSatCur;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_tVcrit;
  Real m_dVte;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_tBrkdwnV;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DiodeCalc;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CurrentsCapacitances<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.CurrentsCapacitances</H2>
<B>Diode variables</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record contains the model variables that are used for the diode model in SPICE3.</p>
<pre></PRE><P>

<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> CurrentsCapacitances <font color="darkgreen">&quot;Diode variables&quot;</font>

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_dCurrent;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CurrentsCapacitances;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeModelLineInitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeModelLineInitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeModelLineInitEquations</H2>
<B>Initial precalculation of model line parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>Within this function some parameters are initially precalculated from model line parameters.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with diode model line parameters</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables"
>DiodeModelLineVariables</A></TD><TD>out_v</TD><TD>Output record with diode model line variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeModelLineInitEquations <font color="darkgreen">
  &quot;Initial precalculation of model line parameters&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> in_p <font color="darkgreen">
    &quot;Input record with diode model line parameters&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineVariables"
>DiodeModelLineVariables</A> out_v <font color="darkgreen">
    &quot;Output record with diode model line variables&quot;</font>;

<font color="blue">algorithm </font>
  <font color="darkgreen">// limit grading coeff to max of 0.9</font>
  <font color="blue">if </font>(in_p.m_gradingCoeff &gt; 0.9)<font color="blue"> then</font>
    out_v.m_gradingCoeff := 0.9;
  <font color="blue">end if</font>;
  <font color="darkgreen">// limit activation energy to min of 0.1</font>
  <font color="blue">if </font>(in_p.m_activationEnergy &lt; 0.1)<font color="blue"> then</font>
    out_v.m_activationEnergy := 0.1;
  <font color="blue">end if</font>;
  <font color="darkgreen">// limit depletion cap coeff to max of 0.95</font>
  <font color="blue">if </font>(in_p.m_depletionCapCoeff &gt; 0.95)<font color="blue"> then</font>
    out_v.m_depletionCapCoeff := 0.95;
  <font color="blue">end if</font>;

  out_v.m_conductance := <font color="blue">if </font>(in_p.m_resist == 0.0)<font color="blue"> then </font>0.0<font color="blue"> else </font>1.0 / in_p.m_resist;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeModelLineInitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeInitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeInitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeInitEquations</H2>
<B>Initial calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>In this function some initial calculations for the diode model are done, especially concerning the handling of the breakthrough voltage.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with diode model line parameters</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A></TD><TD>out_v</TD><TD>Output record with diode variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeInitEquations <font color="darkgreen">&quot;Initial calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> in_p <font color="darkgreen">
    &quot;Input record with diode model line parameters&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A> out_v <font color="darkgreen">&quot;Output record with diode variables&quot;</font>;

<font color="blue">algorithm </font>
 out_v.m_pBvIsGiven := in_p.m_pBvIsGiven;
  <font color="blue">if </font>(out_v.m_pBvIsGiven &gt; 0.5)<font color="blue"> then</font>
    <font color="blue">if </font>(in_p.m_breakdownVoltage &gt; 1.0e+100)<font color="blue"> then</font>
      out_v.m_pBvIsGiven := 1.0e-41;<font color="darkgreen"> // set to false</font>
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeInitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeCalcTempDependencies<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeCalcTempDependencies"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeCalcTempDependencies</H2>
<B>Temperature dependency calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>In this function for the diode model temperature dependencies are calculated using temperature treating functions from the equation package.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record diode model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A></TD><TD>in_dp</TD><TD>&nbsp;</TD><TD>Input record diode paramters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>in_m</TD><TD>&nbsp;</TD><TD>Input record Model</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A></TD><TD>in_v</TD><TD>&nbsp;</TD><TD>Input record diode variables</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"
>DiodeCalc</A></TD><TD>out_c</TD><TD>Output record with calculated values</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeCalcTempDependencies <font color="darkgreen">
  &quot;Temperature dependency calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> in_p <font color="darkgreen">&quot;Input record diode model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A> in_dp <font color="darkgreen">&quot;Input record diode paramters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> in_m <font color="darkgreen">&quot;Input record Model&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A> in_v <font color="darkgreen">&quot;Input record diode variables&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"
>DiodeCalc</A> out_c <font color="darkgreen">&quot;Output record with calculated values&quot;</font>;

<font color="blue">algorithm </font>
  (out_c.m_tJctPot,out_c.m_tJctCap) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3</font>(
          in_p.m_junctionPot,
          in_p.m_junctionCap,
          in_p.m_gradingCoeff,
          in_m.m_dTemp,
          in_p.m_nomTemp);
  out_c.m_tJctCap := in_dp.m_area * out_c.m_tJctCap;
  (out_c.m_tF1,out_c.m_f2,out_c.m_f3) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs</font>(
          in_p.m_gradingCoeff,
          in_p.m_depletionCapCoeff,
          out_c.m_tJctPot);

  out_c.m_tSatCur :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3</font>(
          in_p.m_satCur,
          in_m.m_dTemp,
          in_p.m_nomTemp,
          in_p.m_emissionCoeff,
          in_p.m_activationEnergy,
          in_p.m_saturationCurrentExp);
  out_c.m_tVcrit :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit</font>(
          in_m.m_dTemp,
          in_p.m_emissionCoeff,
          out_c.m_tSatCur);
  out_c.m_dVte := in_m.m_dTemp*SpiceConstants.CONSTKoverQ*in_p.m_emissionCoeff;
  <font color="blue">if </font>(in_v.m_pBvIsGiven &gt; 0.5)<font color="blue"> then</font>
    out_c.m_tBrkdwnV :=
      <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3</font>(
            in_p.m_breakdownVoltage,
            in_p.m_breakdownCurrent,
            out_c.m_tSatCur,
            in_m.m_dTemp,
            in_p.m_emissionCoeff);
  <font color="blue">end if</font>;
  out_c.m_tSatCur := in_dp.m_area * out_c.m_tSatCur;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeCalcTempDependencies;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeNoBypassCode<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeNoBypassCode"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeNoBypassCode</H2>
<B>Calculation of currents</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function NoBypassCode calculates the currents (and the capacitances) that are necessary for the currents to be used in the toplevel model.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record model line parameters for diode</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A></TD><TD>in_dp</TD><TD>&nbsp;</TD><TD>Input record with parameters for diode</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"
>DiodeCalc</A></TD><TD>in_c</TD><TD>&nbsp;</TD><TD>Input record DiodeCalc</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>in_m</TD><TD>&nbsp;</TD><TD>Input record model</TD></TR>
<TR><TD>Boolean</TD><TD>in_m_mbInit</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>in_m_pVoltageValues[2]</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances"
>CurrentsCapacitances</A></TD><TD>out_cc</TD><TD>Output record with calculated currents and capacitances</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_dCap</TD><TD>Output capacitance [F]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeNoBypassCode <font color="darkgreen">&quot;Calculation of currents&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> in_p <font color="darkgreen">
    &quot;Input record model line parameters for diode&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A> in_dp <font color="darkgreen">&quot;Input record with parameters for diode&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeCalc"
>DiodeCalc</A> in_c <font color="darkgreen">&quot;Input record DiodeCalc&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> in_m <font color="darkgreen">&quot;Input record model&quot;</font>;
  <font color="blue">input </font>Boolean in_m_mbInit;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A>[2] in_m_pVoltageValues;<font color="darkgreen"> /* DPP, DN */</font>

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.CurrentsCapacitances"
>CurrentsCapacitances</A> out_cc <font color="darkgreen">
    &quot;Output record with calculated currents and capacitances&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> m_dCap <font color="darkgreen">&quot;Output capacitance&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> m_dPNVoltage <font color="darkgreen">&quot;Voltage&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_dCurrent <font color="darkgreen">&quot;Current&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> m_dCond <font color="darkgreen">&quot;Conductance&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> m_dCharge <font color="darkgreen">&quot;Charge&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> m_dCapCurrent <font color="darkgreen">&quot;Current&quot;</font>;

<font color="blue">algorithm </font>
  m_dPNVoltage := in_m_pVoltageValues[1] - in_m_pVoltageValues[2];

  <font color="blue">if </font>(<font color="red">SpiceRoot.useInitialConditions</font>()<font color="blue"> and </font>in_dp.m_pIcIsGiven &gt; 0.5)<font color="blue"> then</font>
    m_dPNVoltage := in_dp.m_dIC;
  <font color="blue">elseif </font>(<font color="red">SpiceRoot.initJunctionVoltages</font>())<font color="blue"> then</font>
    <font color="blue">if </font>(in_dp.m_bOff)<font color="blue"> then</font>
      m_dPNVoltage := 0.0;
    <font color="blue">else</font>
      m_dPNVoltage := in_c.m_tVcrit;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  <font color="blue">if </font>(in_p.m_pBvIsGiven &gt; 0.5)<font color="blue"> then</font>
    (out_cc.m_dCurrent,m_dCond) :=
      <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junction3</font>(
            m_dPNVoltage,
            in_m.m_dTemp,
            in_p.m_emissionCoeff,
            in_c.m_tSatCur,
            in_c.m_tBrkdwnV);
  <font color="blue">else</font>
    (out_cc.m_dCurrent,m_dCond) :=
      <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junction2</font>(
            m_dPNVoltage,
            in_m.m_dTemp,
            in_p.m_emissionCoeff,
            in_c.m_tSatCur);
  <font color="blue">end if</font>;

  (m_dCap,m_dCharge) :=
    <font color="red">Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime</font>(
          in_c.m_tJctCap,
          m_dPNVoltage,
          in_c.m_tJctPot*in_p.m_depletionCapCoeff,
          in_p.m_gradingCoeff,
          in_p.m_junctionPot,
          in_c.m_tF1,
          in_c.m_f2,
          in_c.m_f3,
          in_p.m_transitTime,
          m_dCond,
          m_dCurrent);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeNoBypassCode;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeCalcAdditionalValues<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeCalcAdditionalValues"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeCalcAdditionalValues</H2>
<B>Calculation of additional values</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function is prepared for additional calculations but it is plain (inputs are written to the outputs) in the actual version of this library.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A></TD><TD>in_v</TD><TD>&nbsp;</TD><TD>Input record with diode variables</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record with diode model line parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A></TD><TD>in_dp</TD><TD>&nbsp;</TD><TD>Input record with diode parameters</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>in_m_pVoltageValues[2]</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A></TD><TD>out_v</TD><TD>Output record with diode variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeCalcAdditionalValues <font color="darkgreen">&quot;Calculation of additional values&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A> in_v <font color="darkgreen">&quot;Input record with diode variables&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> in_p <font color="darkgreen">
    &quot;Input record with diode model line parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A> in_dp <font color="darkgreen">&quot;Input record with diode parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A>[2] in_m_pVoltageValues;<font color="darkgreen"> /* DP, DPP */</font>

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeVariables"
>DiodeVariables</A> out_v <font color="darkgreen">&quot;Output record with diode variables&quot;</font>;

<font color="blue">algorithm </font>
  out_v := in_v;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeCalcAdditionalValues;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeRenameParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParameters"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeRenameParameters</H2>
<B>Technology parameter renaming</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function assigns the external (given by the user, e.g., IS) technology parameters
to the internal parameters (e.g., m_satCur). It also does the analysis of the IsGiven values.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardDIODE"
>ModelcardDIODE</A></TD><TD>ex</TD><TD>&nbsp;</TD><TD>Modelcard with technologie parameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A></TD><TD>con</TD><TD>&nbsp;</TD><TD>Spice constants</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A></TD><TD>intern</TD><TD>Output record diode model line parameters</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeRenameParameters <font color="darkgreen">&quot;Technology parameter renaming&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardDIODE"
>ModelcardDIODE</A> ex <font color="darkgreen">&quot;Modelcard with technologie parameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A> con <font color="darkgreen">&quot;Spice constants&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeModelLineParams"
>DiodeModelLineParams</A> intern <font color="darkgreen">
    &quot;Output record diode model line parameters&quot;</font>;

<font color="blue">algorithm </font>
   intern.m_satCur := ex.IS;
   intern.m_resist:=ex.RS;
   intern.m_emissionCoeff := ex.N;
   intern.m_transitTime := ex.TT;
   intern.m_junctionCap := ex.CJO;
   intern.m_junctionPot := ex.VJ;

   intern.m_gradingCoeff := <font color="blue">if </font>(ex.M &gt; 0.9)<font color="blue"> then </font>0.9<font color="blue"> else </font>ex.M;
   intern.m_activationEnergy := <font color="blue">if </font>(ex.EG &lt; 0.1)<font color="blue"> then </font>0.1<font color="blue"> else </font>ex.EG;
   intern.m_saturationCurrentExp := ex.XTI;
   intern.m_depletionCapCoeff := <font color="blue">if </font>(ex.FC &gt; 0.95)<font color="blue"> then </font>0.95<font color="blue"> else </font>ex.FC;

   intern.m_pBvIsGiven := <font color="blue">if </font>(ex.BV &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
   intern.m_breakdownVoltage := <font color="blue">if </font>(ex.BV &gt; -1e40)<font color="blue"> then </font>ex.BV<font color="blue"> else </font>0;

   intern.m_breakdownCurrent := ex.IBV;
  intern.m_nomTemp := ex.TNOM + SpiceConstants.CONSTCtoK;
   intern.m_fNcoef := ex.KF;
   intern.m_fNexp := ex.AF;

   intern.m_conductance := <font color="blue">if </font>(ex.RS == 0)<font color="blue"> then </font> 0<font color="blue"> else </font>1/ex.RS;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeRenameParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeRenameParametersDev<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDev"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeRenameParametersDev</H2>
<B>Temperature calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function assigns the external (given by the user, e.g., AREA) device parameters
to the internal parameters (e.g., m_area). It also does the analysis of the IsGiven values.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>TEMP</TD><TD>&nbsp;</TD><TD>Temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>AREA</TD><TD>&nbsp;</TD><TD>Area factor</TD></TR>
<TR><TD>Real</TD><TD>IC</TD><TD>&nbsp;</TD><TD>Initial condition value (VD, not implemented yet</TD></TR>
<TR><TD>Boolean</TD><TD>OFF</TD><TD>&nbsp;</TD><TD>Optional initial condition: false - IC not used, true - IC used, not implemented yet</TD></TR>
<TR><TD>Boolean</TD><TD>SENS_AREA</TD><TD>&nbsp;</TD><TD>Flag to request sensitivity WRT area, not implemented yet</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A></TD><TD>dev</TD><TD>Output record with calculated diode parameters</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeRenameParametersDev <font color="darkgreen">&quot;Temperature calculation&quot;</font>
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> TEMP <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">input </font>Real AREA <font color="darkgreen">&quot;Area factor&quot;</font>;
  <font color="blue">input </font>Real IC <font color="darkgreen">&quot;Initial condition value (VD, not implemented yet&quot;</font>;
  <font color="blue">input </font>Boolean OFF <font color="darkgreen">
    &quot;Optional initial condition: false - IC not used, true - IC used, not implemented yet&quot;</font>;
  <font color="blue">input </font>Boolean SENS_AREA <font color="darkgreen">
    &quot;Flag to request sensitivity WRT area, not implemented yet&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode.DiodeParams"
>DiodeParams</A> dev <font color="darkgreen">&quot;Output record with calculated diode parameters&quot;</font>;

<font color="blue">algorithm </font>
<font color="darkgreen">/*device parameters*/</font>
  dev.m_area := AREA;

  dev.m_pIcIsGiven := <font color="blue">if </font>(IC &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
  dev.m_dIC := <font color="blue">if </font>
                 (IC &gt; -1e40)<font color="blue"> then </font>IC<font color="blue"> else </font>0;
  dev.m_bOff := OFF;
  dev.m_bSensArea := SENS_AREA;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeRenameParametersDev;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE diodeRenameParametersDevTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Diode.diodeRenameParametersDevTemp"></A><A HREF="Modelica_Electrical_Spice3_Internal_Diode.html#Modelica.Electrical.Spice3.Internal.Diode"
>Modelica.Electrical.Spice3.Internal.Diode</A>.diodeRenameParametersDevTemp</H2>
<B>Temperature calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function calculates device parameters wehich are temperature dependent.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Temp_C</A></TD><TD>TEMP</TD><TD>&nbsp;</TD><TD>Temperature [degC]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model</A></TD><TD>dev_temp</TD><TD>Input record Model</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> diodeRenameParametersDevTemp <font color="darkgreen">&quot;Temperature calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> TEMP <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Model.html#Modelica.Electrical.Spice3.Internal.Model.Model"
>Model.Model</A> dev_temp <font color="darkgreen">&quot;Input record Model&quot;</font>;

<font color="blue">algorithm </font>
  dev_temp.m_dTemp := TEMP + SpiceConstants.CONSTCtoK;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>diodeRenameParametersDevTemp;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.
</address></BODY>
</HTML>
