<HTML>
<HEAD>
<TITLE>Modelica.Electrical.Spice3.Internal.Functions</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Equations for semiconductor calculation&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Functions<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions"></A><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal"
>Modelica.Electrical.Spice3.Internal</A>.Functions</H2>
<B>Equations for semiconductor calculation</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>The package Equation contains functions that are needed to model the semiconductor models. Some of these functions are used by several semiconductor models.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTemp"
>energyGapDepTemp</A>
</TD><TD>Temperature dependency of energy gap</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionPotDepTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionPotDepTemp"
>junctionPotDepTemp</A>
</TD><TD>Temperature dependency of junction potential</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3MOSFET" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3MOSFET"
>saturationCurDepTempSPICE3MOSFET</A>
</TD><TD>Temperature dependency of saturation current</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit"
>junctionVCrit</A>
</TD><TD>Voltage limitation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3"
>junctionParamDepTempSPICE3</A>
</TD><TD>Temperature dependency of junction parameters</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs"
>junctionCapCoeffs</A>
</TD><TD>Coefficient calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junction2SPICE3MOSFET" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction2SPICE3MOSFET"
>junction2SPICE3MOSFET</A>
</TD><TD>Junction current and conductance calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionCap" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCap"
>junctionCap</A>
</TD><TD>Junction capacity</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3"
>saturationCurDepTempSPICE3</A>
</TD><TD>Temperature dependency of saturation current</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3"
>junctionVoltage23SPICE3</A>
</TD><TD>Junction Voltage</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junction3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction3"
>junction3</A>
</TD><TD>Junction current and conductance calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime"
>junctionCapTransTime</A>
</TD><TD>Junction capacitance transittime calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.junction2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.junction2"
>junction2</A>
</TD><TD>Junction current and conductance calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.resDepTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.resDepTemp"
>resDepTemp</A>
</TD><TD>Temperature dependent conductance</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTempS.png" ALT="Modelica.Electrical.Spice3.Internal.Functions.resDepGeom" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions.resDepGeom"
>resDepGeom</A>
</TD><TD>Resistance dependent from width and narrow</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE energyGapDepTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.energyGapDepTemp"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.energyGapDepTemp</H2>
<B>Temperature dependency of energy gap</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the temperature dependent energy gap based on the actual temperature, and two coefficients given as input to the function.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Temperature [K]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>ret</TD><TD>Output voltage [V]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> energyGapDepTemp <font color="darkgreen">&quot;Temperature dependency of energy gap&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Temperature&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> ret <font color="darkgreen">&quot;Output voltage&quot;</font>;

<font color="blue">protected </font>
   <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> gap0 =   1.16;
   Real coeff1( <font color="blue">final </font>unit = &quot;V/K&quot;) = 7.02e-4;
   <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> coeff2 = 1108.0;

<font color="blue">algorithm </font>
  ret := gap0 - (coeff1 * temp * temp) / (temp + coeff2);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>energyGapDepTemp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionPotDepTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionPotDepTemp"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionPotDepTemp</H2>
<B>Temperature dependency of junction potential</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the temperature dependent junction potential based on the actual and the nominal temperature.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>phi0</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>tnom</TD><TD>&nbsp;</TD><TD>Nominal Temperature [K]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>ret</TD><TD>Output voltage [V]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionPotDepTemp <font color="darkgreen">
  &quot;Temperature dependency of junction potential&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> phi0;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> tnom <font color="darkgreen">&quot;Nominal Temperature&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> ret <font color="darkgreen">&quot;Output voltage&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> phibtemp;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> phibtnom;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vt;

<font color="blue">algorithm </font>
  phibtemp :=<font color="red"> energyGapDepTemp</font>( temp);
  phibtnom :=<font color="red"> energyGapDepTemp</font>( tnom);
  vt       := SpiceConstants.CONSTKoverQ * temp;
  ret := (phi0 - phibtnom) * temp / tnom + phibtemp + vt * 3 *<font color="red"> Modelica.Math.log</font>( tnom / temp);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionPotDepTemp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE saturationCurDepTempSPICE3MOSFET<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3MOSFET"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.saturationCurDepTempSPICE3MOSFET</H2>
<B>Temperature dependency of saturation current</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the temperature dependent saturation current based on the actual and the nominal temperature.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur0</TD><TD>&nbsp;</TD><TD>Satuaration current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>tnom</TD><TD>&nbsp;</TD><TD>Nominal Temperature [K]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>ret</TD><TD>Output current [A]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> saturationCurDepTempSPICE3MOSFET <font color="darkgreen">
  &quot;Temperature dependency of saturation current&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur0 <font color="darkgreen">&quot;Satuaration current&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> tnom <font color="darkgreen">&quot;Nominal Temperature&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> ret <font color="darkgreen">&quot;Output current&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vt;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vtnom;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> energygaptnom;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> energygaptemp;

<font color="blue">algorithm </font>
  vt            := SpiceConstants.CONSTKoverQ * temp;
  vtnom         := SpiceConstants.CONSTKoverQ * tnom;
  energygaptnom :=<font color="red"> energyGapDepTemp</font>( tnom);
  energygaptemp :=<font color="red"> energyGapDepTemp</font>( temp);
  ret           := satcur0  *<font color="red"> exp</font>( energygaptnom / vtnom - energygaptemp / vt);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>saturationCurDepTempSPICE3MOSFET;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionVCrit<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionVCrit"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionVCrit</H2>
<B>Voltage limitation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function limits the junction voltage. If it increases 1.e10, it is hold to be constant at that value.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>ncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>ret</TD><TD>Output value</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionVCrit <font color="darkgreen">&quot;Voltage limitation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;temperature&quot;</font>;
  <font color="blue">input </font>Real ncoeff;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur <font color="darkgreen">&quot;Saturation current&quot;</font>;

  <font color="blue">output </font>Real ret <font color="darkgreen">&quot;Output value&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vte;

<font color="blue">algorithm </font>
  vte := SpiceConstants.CONSTKoverQ * temp * ncoeff;
  ret := vte *<font color="red"> Modelica.Math.log</font>( vte / (<font color="red">sqrt</font>(2) * satcur));
  ret := <font color="blue">if </font>( ret &gt; 1e10)<font color="blue"> then </font> 1e10<font color="blue"> else </font>ret;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionVCrit;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionParamDepTempSPICE3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionParamDepTempSPICE3"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionParamDepTempSPICE3</H2>
<B>Temperature dependency of junction parameters</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates several temperature dependent junction parameters based on the actual and the nominal temperature.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>phi0</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>cap0</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>mcoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>tnom</TD><TD>&nbsp;</TD><TD>Nominal temperature [K]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>junctionpot</TD><TD>Junction potential</TD></TR>
<TR><TD>Real</TD><TD>jucntioncap</TD><TD>Junction capacitance</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionParamDepTempSPICE3 <font color="darkgreen">
  &quot;Temperature dependency of junction parameters&quot;</font>

  <font color="blue">input </font>Real phi0;
  <font color="blue">input </font>Real cap0;
  <font color="blue">input </font>Real mcoeff;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device temperature&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> tnom <font color="darkgreen">&quot;Nominal temperature&quot;</font>;

  <font color="blue">output </font>Real junctionpot <font color="darkgreen">&quot;Junction potential&quot;</font>;
  <font color="blue">output </font>Real jucntioncap <font color="darkgreen">&quot;Junction capacitance&quot;</font>;

<font color="blue">protected </font>
  Real phibtemp;
  Real phibtnom;
  Real vt;
  Real vtnom;
  Real arg;
  Real fact2;
  Real pbfact;
  Real arg1;
  Real fact1;
  Real pbfact1;
  Real pbo;
  Real gmaold;
  Real gmanew;

<font color="blue">algorithm </font>
  phibtemp    :=<font color="red"> energyGapDepTemp</font>( temp);
  phibtnom    :=<font color="red"> energyGapDepTemp</font>( tnom);
  vt          := SpiceConstants.CONSTKoverQ * temp;
  vtnom       := SpiceConstants.CONSTKoverQ * tnom;
  arg         := -phibtemp/(2*Modelica.Constants.k*temp) +
                 1.1150877/(Modelica.Constants.k*(2*SpiceConstants.REFTEMP));
  fact2       := temp/SpiceConstants.REFTEMP;
  pbfact      := -2*vt*(1.5*<font color="red">Modelica.Math.log</font>(fact2)+SpiceConstants.CHARGE*arg);
  arg1        := -phibtnom/(Modelica.Constants.k*2*tnom) +
                 1.1150877/(2*Modelica.Constants.k*SpiceConstants.REFTEMP);
  fact1       := tnom/SpiceConstants.REFTEMP;
  pbfact1     := -2 * vtnom*(1.5*<font color="red">Modelica.Math.log</font>(fact1)+SpiceConstants.CHARGE*arg1);
  pbo         := (phi0-pbfact1)/fact1;
  junctionpot := pbfact+fact2*pbo;
  gmaold      := (phi0 -pbo)/pbo;
  gmanew      := (junctionpot-pbo)/pbo;
  jucntioncap := cap0 /
                 (1+mcoeff* (400e-6*(tnom-SpiceConstants.REFTEMP)-gmaold))  *
                 (1+mcoeff* (400e-6*(temp-SpiceConstants.REFTEMP)-gmanew));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionParamDepTempSPICE3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionCapCoeffs<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionCapCoeffs"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionCapCoeffs</H2>
<B>Coefficient calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal auxiliary function calculates some coefficients which are necessary for the calculation of junction capacities.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>mj</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>fc</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>phij</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>f1</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>f2</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>f3</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionCapCoeffs <font color="darkgreen">&quot;Coefficient calculation&quot;</font>

  <font color="blue">input </font>Real mj;
  <font color="blue">input </font>Real fc;
  <font color="blue">input </font>Real phij;

  <font color="blue">output </font>Real f1;
  <font color="blue">output </font>Real f2;
  <font color="blue">output </font>Real f3;

<font color="blue">protected </font>
  Real xfc;

<font color="blue">algorithm </font>
  xfc :=<font color="red"> Modelica.Math.log</font>(1 - fc);
  f1  := phij * (1 -<font color="red"> exp</font>(( 1 - mj)  * xfc)) / (1 - mj);
  f2  :=<font color="red"> exp</font>(( 1 + mj) * xfc);
  f3  := 1 - fc * (1 + mj);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionCapCoeffs;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junction2SPICE3MOSFET<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junction2SPICE3MOSFET"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junction2SPICE3MOSFET</H2>
<B>Junction current and conductance calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>current</TD><TD>&nbsp;</TD><TD>Input current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>cond</TD><TD>&nbsp;</TD><TD>Input conductance [S]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>voltage</TD><TD>&nbsp;</TD><TD>Input voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>ncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>out_current</TD><TD>Calculated current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>out_cond</TD><TD>Calculated conductance [S]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junction2SPICE3MOSFET <font color="darkgreen">
  &quot;Junction current and conductance calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> current <font color="darkgreen">&quot;Input current&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> cond <font color="darkgreen">&quot;Input conductance&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> voltage <font color="darkgreen">&quot;Input voltage&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font>Real ncoeff;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur <font color="darkgreen">&quot;Saturation current&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> out_current <font color="darkgreen">&quot;Calculated current&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> out_cond <font color="darkgreen">&quot;Calculated conductance&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vte;
  Real max_exponent;
  Real evbd;
  Real evd;
  <font color="blue">constant </font>Real max_exp =     50.;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> max_current = 1.e4;

<font color="blue">algorithm </font>
  out_current := current;
  out_cond := cond;
  <font color="blue">if </font>(satcur &gt; 1e-101)<font color="blue"> then</font>
    vte := SpiceConstants.CONSTKoverQ * temp * ncoeff;

    max_exponent :=<font color="red"> Modelica.Math.log</font>(max_current/satcur);
    max_exponent :=<font color="red"> min</font>(max_exp, max_exponent);

    <font color="blue">if </font>(voltage &lt;= 0)<font color="blue"> then</font>
      out_cond    := satcur/vte;
      out_current := out_cond * voltage;
      out_cond    := out_cond + SpiceConstants.CKTgmin;
    <font color="blue">elseif </font>(voltage &gt;= max_exponent * vte)<font color="blue"> then</font>
      evd         :=<font color="red"> exp</font>( max_exponent);
      out_cond    := satcur * evd / vte;
      out_current := satcur * (evd - 1) + out_cond * (voltage - max_exponent * vte);

    <font color="blue">else</font>
      evbd        :=<font color="red"> exp</font>( voltage / vte);
      out_cond    := satcur*evbd/vte + SpiceConstants.CKTgmin;
      out_current := satcur *(evbd-1);
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    out_current := 0.;
    out_cond    := 0.;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junction2SPICE3MOSFET;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionCap<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionCap"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionCap</H2>
<B>Junction capacity</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the charge and the capacitance of the junction capacity dependent from the given voltage.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capin</TD><TD>&nbsp;</TD><TD>Input capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>voltage</TD><TD>&nbsp;</TD><TD>Input voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>depcap</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>mj</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>phij</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>f1</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>f2</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>f3</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capout</TD><TD>Output capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</A></TD><TD>charge</TD><TD>Output charge [C]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionCap <font color="darkgreen">&quot;Junction capacity&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capin <font color="darkgreen">&quot;Input capacitance&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> voltage <font color="darkgreen">&quot;Input voltage&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> depcap;
  <font color="blue">input </font>Real mj;
  <font color="blue">input </font>Real phij;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> f1;
  <font color="blue">input </font>Real f2;
  <font color="blue">input </font>Real f3;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capout <font color="darkgreen">&quot;Output capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> charge <font color="darkgreen">&quot;Output charge&quot;</font>;

<font color="blue">protected </font>
  Real arg;
  Real sarg;
  Real czof2;

<font color="blue">algorithm </font>
  <font color="blue">if </font>(voltage &lt; depcap)<font color="blue"> then</font>
    arg  := 1 - (voltage / phij);
    <font color="blue">if </font>(mj == 0.5)<font color="blue"> then</font>
      sarg := 1 /<font color="red"> sqrt</font>(arg);
    <font color="blue">else</font>
      sarg :=<font color="red"> exp</font>( -1 * mj *<font color="red"> Modelica.Math.log</font>( arg));
    <font color="blue">end if</font>;
    capout := capin * sarg;
    charge := phij * (capin * (1 - arg * sarg) / (1 - mj));
  <font color="blue">else</font>
    czof2  := capin / f2;
    capout := czof2 * (f3 + mj * voltage / phij);
    charge := capin * f1 + czof2 *
              (f3 * (voltage - depcap) + (mj / (2*phij)) * (voltage^2 - depcap^2));
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionCap;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE saturationCurDepTempSPICE3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.saturationCurDepTempSPICE3"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.saturationCurDepTempSPICE3</H2>
<B>Temperature dependency of saturation current</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the temperature dependent saturation current based on the actual and the nominal temperature.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur0</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>tnom</TD><TD>&nbsp;</TD><TD>Nominal Temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>emissioncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>energygap</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>satcurexp</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>ret</TD><TD>Output value [A]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> saturationCurDepTempSPICE3 <font color="darkgreen">
  &quot;Temperature dependency of saturation current&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur0 <font color="darkgreen">&quot;Saturation current&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> tnom <font color="darkgreen">&quot;Nominal Temperature&quot;</font>;
  <font color="blue">input </font>Real emissioncoeff;
  <font color="blue">input </font>Real energygap;
  <font color="blue">input </font>Real satcurexp;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> ret <font color="darkgreen">&quot;Output value&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vt;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vte;

<font color="blue">algorithm </font>
    vt := SpiceConstants.CONSTKoverQ*temp;
  vte := emissioncoeff * vt;
  ret := satcur0 *<font color="red"> exp</font>( ((temp / tnom) - 1) * energygap / vte
         + satcurexp / emissioncoeff *<font color="red"> Modelica.Math.log</font>( temp / tnom));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>saturationCurDepTempSPICE3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionVoltage23SPICE3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionVoltage23SPICE3"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionVoltage23SPICE3</H2>
<B>Junction Voltage</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the junction voltage based on the actual temperature, voltage and saturation current.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>vb</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>ivb</TD><TD>&nbsp;</TD><TD>[A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>ncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>v23</TD><TD>Output value [V]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionVoltage23SPICE3 <font color="darkgreen">&quot;Junction Voltage&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vb;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> ivb;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur <font color="darkgreen">&quot;Saturation current&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device temperature&quot;</font>;
  <font color="blue">input </font>Real ncoeff;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> v23 <font color="darkgreen">&quot;Output value&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vt;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> cbv;
  Real tol;
  Integer iter;

<font color="blue">algorithm </font>
    vt := SpiceConstants.CONSTKoverQ*temp;
  v23 := vb;
  cbv := ivb;

  <font color="blue">if </font>(cbv &lt; satcur * vb / vt)<font color="blue"> then</font>
    cbv := satcur * vb / vt;
  <font color="blue">else</font>
      tol := SpiceConstants.CKTreltol*cbv;
    v23 := vb - vt *<font color="red"> Modelica.Math.log</font>( 1 + cbv / satcur);
    <font color="blue">for </font>iter<font color="blue"> in </font>0:24<font color="blue"> loop</font>
      v23 := vb - vt *<font color="red"> Modelica.Math.log</font>( cbv / satcur + 1 - v23 / vt);
      <font color="blue">if </font>(<font color="red">abs</font>( satcur * (<font color="red"> exp</font>(( vb - v23) / vt) - 1 + v23 / vt) - cbv) &lt;= tol)<font color="blue"> then</font>

      <font color="blue">end if</font>;
    <font color="blue">end for</font>;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionVoltage23SPICE3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junction3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junction3"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junction3</H2>
<B>Junction current and conductance calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>voltage</TD><TD>&nbsp;</TD><TD>Input voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>ncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>v23</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>current</TD><TD>Output curret [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>cond</TD><TD>Output conductance [S]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junction3 <font color="darkgreen">&quot;Junction current and conductance calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> voltage <font color="darkgreen">&quot;Input voltage&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font>Real ncoeff;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur <font color="darkgreen">&quot;Saturation current&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> v23;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> current <font color="darkgreen">&quot;Output curret&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> cond <font color="darkgreen">&quot;Output conductance&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">constant </font>Real max_exp = 50.0;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> max_current = 1.0e4;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vte;
  Real max_exponent;
  Real evd;
  Real arg;
  Real evrev;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vr;

<font color="blue">algorithm </font>
  <font color="blue">if </font>(satcur &gt; 1.0e-101)<font color="blue"> then</font>
      vte := SpiceConstants.CONSTKoverQ*temp*ncoeff;
    max_exponent :=<font color="red"> Modelica.Math.log</font>( max_current / satcur);
    max_exponent :=<font color="red"> min</font>( max_exp, max_exponent);
    <font color="blue">if </font>(voltage &gt;= max_exponent * vte)<font color="blue"> then</font>
      evd     :=<font color="red"> exp</font>( max_exponent);
      cond    := satcur * evd / vte;
      current := satcur * (evd - 1) + cond * (voltage - max_exponent * vte);
    <font color="blue">elseif </font>(voltage &gt;= -3 * vte)<font color="blue"> then</font>
      evd     :=<font color="red"> exp</font>( voltage / vte);
        current := satcur*(evd - 1) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*evd/vte + SpiceConstants.CKTgmin;
    <font color="blue">elseif </font>(voltage &gt;= -v23)<font color="blue"> then</font>
        arg := 3*vte/(voltage*SpiceConstants.CONSTe);
      arg     := arg * arg * arg;
        current := -1.*satcur*(1 + arg) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*3*arg/voltage + SpiceConstants.CKTgmin;
    <font color="blue">else</font>
      vr := -( v23 + voltage);
      <font color="blue">if </font>(vr &gt; max_exponent * vte)<font color="blue"> then</font>
        evd     :=<font color="red"> exp</font>( max_exponent);
        cond    := satcur * evd / vte;
        current := -1. * (satcur * (evd - 1) + cond * (vr - max_exponent * vte));
      <font color="blue">else</font>
        evrev   :=<font color="red"> exp</font>( vr / vte);
          current := -1.*satcur*evrev + SpiceConstants.CKTgmin*voltage;
          cond := satcur*evrev/vte + SpiceConstants.CKTgmin;
      <font color="blue">end if</font>;
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    current := 0.0;
    cond    := 0.0;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junction3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junctionCapTransTime<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junctionCapTransTime"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junctionCapTransTime</H2>
<B>Junction capacitance transittime calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the capacitance and the charge dependent on the transittime.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capin</TD><TD>&nbsp;</TD><TD>Input capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>voltage</TD><TD>&nbsp;</TD><TD>Input voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>depcap</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>mj</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>phij</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>f1</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>f2</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>f3</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>transittime</TD><TD>&nbsp;</TD><TD>[s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>conduct</TD><TD>&nbsp;</TD><TD>Input conductance [S]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>current</TD><TD>&nbsp;</TD><TD>Input current [A]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>capout</TD><TD>Output capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</A></TD><TD>charge</TD><TD>Output charge [C]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junctionCapTransTime <font color="darkgreen">
  &quot;Junction capacitance transittime calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capin <font color="darkgreen">&quot;Input capacitance&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> voltage <font color="darkgreen">&quot;Input voltage&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> depcap;
  <font color="blue">input </font>Real mj;
  <font color="blue">input </font>Real phij;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> f1;
  <font color="blue">input </font>Real f2;
  <font color="blue">input </font>Real f3;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> transittime;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> conduct <font color="darkgreen">&quot;Input conductance&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> current <font color="darkgreen">&quot;Input current&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Modelica.SIunits.Capacitance</A> capout <font color="darkgreen">&quot;Output capacitance&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Modelica.SIunits.Charge</A> charge <font color="darkgreen">&quot;Output charge&quot;</font>;

<font color="blue">algorithm </font>
    (capout,charge) :=<font color="red"> junctionCap</font>(
          capin,
          voltage,
          depcap,
          mj,
          phij,
          f1,
          f2,
          f3);
  capout := capout + transittime * conduct;
  charge := charge + transittime * current;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junctionCapTransTime;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE junction2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.junction2"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.junction2</H2>
<B>Junction current and conductance calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates both the junction current and the junction conductance dependent from the given voltage.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>voltage</TD><TD>&nbsp;</TD><TD>Input Voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device Temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>ncoeff</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>satcur</TD><TD>&nbsp;</TD><TD>Saturation current [A]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>current</TD><TD>Output current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>cond</TD><TD>Output conductance [S]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> junction2 <font color="darkgreen">&quot;Junction current and conductance calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> voltage <font color="darkgreen">&quot;Input Voltage&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device Temperature&quot;</font>;
  <font color="blue">input </font>Real ncoeff;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> satcur <font color="darkgreen">&quot;Saturation current&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Modelica.SIunits.Current</A> current <font color="darkgreen">&quot;Output current&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> cond <font color="darkgreen">&quot;Output conductance&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">constant </font>Real max_exp = 50.0;
  <font color="blue">constant </font>Real max_current = 1.0e4;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vte;
  Real max_exponent;
  Real evd;
  Real arg;

<font color="blue">algorithm </font>
  <font color="blue">if </font>(satcur &gt; 1.0e-101)<font color="blue"> then</font>
      vte := SpiceConstants.CONSTKoverQ*temp*ncoeff;
    max_exponent :=<font color="red"> Modelica.Math.log</font>( max_current / satcur);
    max_exponent :=<font color="red"> min</font>( max_exp, max_exponent);
    <font color="blue">if </font>(voltage &gt;= max_exponent * vte)<font color="blue"> then</font>
      evd     :=<font color="red"> exp</font>( max_exponent);
      cond    := satcur * evd / vte;
      current := satcur * (evd - 1) + cond * (voltage - max_exponent * vte);

    <font color="blue">elseif </font>(voltage &gt;= -5 * vte)<font color="blue"> then</font>
      evd     :=<font color="red"> exp</font>( voltage / vte);
        current := satcur*(evd - 1) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*evd/vte + SpiceConstants.CKTgmin;
    <font color="blue">else</font>
        arg := 3*vte/(voltage*SpiceConstants.CONSTe);
      arg     := arg * arg * arg;
        current := -1*satcur*(1 + arg) + SpiceConstants.CKTgmin*voltage;
        cond := satcur*3*arg/voltage + SpiceConstants.CKTgmin;
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    current := 0.0;
    cond    := 0.0;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>junction2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE resDepTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.resDepTemp"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.resDepTemp</H2>
<B>Temperature dependent conductance</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the conductance in dependency from the temperature.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</A></TD><TD>resist</TD><TD>&nbsp;</TD><TD>Input resistance [Ohm]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>temp</TD><TD>&nbsp;</TD><TD>Device temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Temp_K</A></TD><TD>tnom</TD><TD>&nbsp;</TD><TD>Nominal temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>tc1</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>tc2</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Conductance</A></TD><TD>conduct</TD><TD>Output conductance [S]</TD></TR>
<TR><TD>Real</TD><TD>dCond_dTemp</TD><TD>Output value</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> resDepTemp <font color="darkgreen">&quot;Temperature dependent conductance&quot;</font>

<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Modelica.SIunits.Resistance</A> resist <font color="darkgreen">&quot;Input resistance&quot;</font>;
<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> temp <font color="darkgreen">&quot;Device temperature&quot;</font>;
<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_K"
>Modelica.SIunits.Temp_K</A> tnom <font color="darkgreen">&quot;Nominal temperature&quot;</font>;
<font color="blue">input </font>Real tc1;
<font color="blue">input </font>Real tc2;

<font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Conductance"
>Modelica.SIunits.Conductance</A> conduct <font color="darkgreen">&quot;Output conductance&quot;</font>;
<font color="blue">output </font>Real dCond_dTemp <font color="darkgreen">&quot;Output value&quot;</font>;

<font color="blue">protected </font>
  Real difference;
  Real factor;

<font color="blue">algorithm </font>
  difference := temp - tnom;
  factor := 1.0 + tc1 * difference + tc2 * difference * difference;
  conduct := 1.0 /(resist * factor);
  dCond_dTemp := (tc1 + 2 * tc2 * difference) * conduct * conduct;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>resDepTemp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE resDepGeom<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Functions.resDepGeom"></A><A HREF="Modelica_Electrical_Spice3_Internal_Functions.html#Modelica.Electrical.Spice3.Internal.Functions"
>Modelica.Electrical.Spice3.Internal.Functions</A>.resDepGeom</H2>
<B>Resistance dependent from width and narrow</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This internal function calculates the resistance in dependency from the geometrical values (width, narrow) and resistivity.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>rsh</TD><TD>&nbsp;</TD><TD>Input sheet resistance</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>width</TD><TD>&nbsp;</TD><TD>Input transistor width [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>length</TD><TD>&nbsp;</TD><TD>Input transistor length [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>narrow</TD><TD>&nbsp;</TD><TD>Input narrow [m]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>out</TD><TD>Output value</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> resDepGeom <font color="darkgreen">&quot;Resistance dependent from width and narrow&quot;</font>

<font color="blue">input </font>Real rsh <font color="darkgreen">&quot;Input sheet resistance&quot;</font>;
<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> width <font color="darkgreen">&quot;Input transistor width&quot;</font>;
<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> length <font color="darkgreen">&quot;Input transistor length&quot;</font>;
<font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> narrow <font color="darkgreen">&quot;Input narrow&quot;</font>;

<font color="blue">output </font>Real out <font color="darkgreen">&quot;Output value&quot;</font>;

<font color="blue">algorithm </font>
  out :=rsh*(length - narrow)/(width - narrow);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>resDepGeom;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.
</address></BODY>
</HTML>
