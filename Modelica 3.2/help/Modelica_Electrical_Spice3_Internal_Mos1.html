<HTML>
<HEAD>
<TITLE>Modelica.Electrical.Spice3.Internal.Mos1</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Records and functions for Mosfets level 1&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Mos1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1"></A><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal"
>Modelica.Electrical.Spice3.Internal</A>.Mos1</H2>
<B>Records and functions for Mosfets level 1</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This package Mos1 contains functions and record with data of the mosfet model level 1.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"
>Mos1ModelLineParams</A>
</TD><TD>Record for Mosfet model line parameters (for level 1)</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParamsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"
>Mos1Calc</A>
</TD><TD>Further mosfet variables (for level 1)</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquations"
>mos1ModelLineParamsInitEquations</A>
</TD><TD>Initial precalculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.drainCur" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.drainCur"
>drainCur</A>
</TD><TD>Drain current calculation</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParameters" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParameters"
>mos1RenameParameters</A>
</TD><TD>Parameter renaming to internal names</TD></TR>
<TR><TD><IMG SRC="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquationsS.png" ALT="Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParametersDev" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParametersDev"
>mos1RenameParametersDev</A>
</TD><TD>Device parameter renaming to internal names</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Mos1ModelLineParams<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.Mos1ModelLineParams</H2>
<B>Record for Mosfet model line parameters (for level 1)</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record Mos1ModelLineParams contains the model line parameters that are used for the mosfet transistors level 1 in SPICE3.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineParams"
>Mos.MosModelLineParams</A> (Record for Mosfet model line parameters (for level 1, 2, 3 and 6)).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Real</TD><TD>m_jctSatCurDensity.start</TD><TD>0.0</TD><TD>JS, Bulk jct. sat. current density, input - use tSatCurDens</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</A></TD><TD>m_sheetResistance.start</TD><TD>0.0</TD><TD>RSH, Sheet resistance [Ohm]</TD></TR>
<TR><TD>Real</TD><TD>m_bulkJctPotential.start</TD><TD>0.8</TD><TD>PB, Bulk junction potential, input - use tBulkPot</TD></TR>
<TR><TD>Real</TD><TD>m_bulkJctBotGradingCoeff.start</TD><TD>0.5</TD><TD>MJ, Bottom grading coefficient</TD></TR>
<TR><TD>Real</TD><TD>m_bulkJctSideGradingCoeff.start</TD><TD>0.5</TD><TD>MJSW, Side grading coefficient</TD></TR>
<TR><TD>Real</TD><TD>m_oxideThickness.start</TD><TD>1.0e-7</TD><TD>TOX, Oxide thickness unit: micron</TD></TR>
<TR><TD>Real</TD><TD>m_gateSourceOverlapCapFactor.start</TD><TD>0.0</TD><TD>CGS0, Gate-source overlap cap</TD></TR>
<TR><TD>Real</TD><TD>m_gateDrainOverlapCapFactor.start</TD><TD>0.0</TD><TD> CGD0, Gate-drain overlap cap</TD></TR>
<TR><TD>Real</TD><TD>m_gateBulkOverlapCapFactor.start</TD><TD>0.0</TD><TD>CGB0, Gate-bulk overlap cap</TD></TR>
<TR><TD>Real</TD><TD>m_fNcoef.start</TD><TD>0.0</TD><TD>KF, Flicker noise coefficient</TD></TR>
<TR><TD>Real</TD><TD>m_fNexp.start</TD><TD>1.0</TD><TD>AF, Flicker noise exponent</TD></TR>
<TR><TD>Real</TD><TD>m_oxideCapFactor.start</TD><TD>0.0</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_vt0.start</TD><TD>0.0</TD><TD>VTO, Threshold voltage [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_capBD.start</TD><TD>0.0</TD><TD>CBD, B-D junction capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_capBS.start</TD><TD>0.0</TD><TD>CBS, B-S junction capacitance [F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.CapacitancePerArea"
>CapacitancePerArea</A></TD><TD>m_bulkCapFactor.start</TD><TD>0.0</TD><TD>CJ, Bottom junction cap per area [F/m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Permittivity"
>Permittivity</A></TD><TD>m_sideWallCapFactor.start</TD><TD>0.0</TD><TD>CJSW, Side grading coefficient [F/m]</TD></TR>
<TR><TD>Real</TD><TD>m_fwdCapDepCoeff.start</TD><TD>0.5</TD><TD>FC, Forward bias jct. fit parm.</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_phi.start</TD><TD>0.6</TD><TD>PHI, Surface potential [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_gamma.start</TD><TD>0.0</TD><TD>GAMMA, Bulk threshold parameter [V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.InversePotential"
>InversePotential</A></TD><TD>m_lambda.start</TD><TD>0.0</TD><TD>Channel-length modulation [1/V]</TD></TR>
<TR><TD>Real</TD><TD>m_substrateDoping.start</TD><TD>0.0</TD><TD>NSUB, Substrate doping</TD></TR>
<TR><TD>Real</TD><TD>m_gateType.start</TD><TD>1.0</TD><TD>TPG, Gate type</TD></TR>
<TR><TD><A HREF="Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.PerArea_cm"
>PerArea_cm</A></TD><TD>m_surfaceStateDensity.start</TD><TD>0.0</TD><TD>NSS, Gate type [1/cm2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Area_cmPerVoltageSecond"
>Area_cmPerVoltageSecond</A></TD><TD>m_surfaceMobility.start</TD><TD>600.0</TD><TD>UO, Surface mobility [cm2/(V.s)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>m_latDiff.start</TD><TD>0.0</TD><TD>LD, Lateral diffusion [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>m_jctSatCur.start</TD><TD>1.0e-14</TD><TD>IS, Bulk junction sat. current [A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</A></TD><TD>m_drainResistance.start</TD><TD>0</TD><TD>RD, Drain ohmic resistance [Ohm]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Resistance"
>Resistance</A></TD><TD>m_sourceResistance.start</TD><TD>0</TD><TD>RS, Source ohmic resistance [Ohm]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Transconductance"
>Transconductance</A></TD><TD>m_transconductance.start</TD><TD>2.0e-5</TD><TD>input - use tTransconductance [A/V2]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Mos1ModelLineParams <font color="darkgreen">
  &quot;Record for Mosfet model line parameters (for level 1)&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineParams"
>Mos.MosModelLineParams</A>(
   m_lambda( start = 0.0),
   m_transconductance( start = 2.0e-5));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Mos1ModelLineParams;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Mos1Calc<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.Mos1Calc</H2>
<B>Further mosfet variables (for level 1)</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This record Mos1Calc contains further mosfet variables (for level 1) that are needed for the calculations.</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosCalc"
>Mos.MosCalc</A> (Further mosfet variables (for level 1, 2, 3 and 6)).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Integer</TD><TD>m_mode.start</TD><TD>1</TD><TD>Mode</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Transconductance"
>Transconductance</A></TD><TD>m_tTransconductance.start</TD><TD>0.</TD><TD>[A/V2]</TD></TR>
<TR><TD>Real</TD><TD>m_tSurfMob.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_tPhi.start</TD><TD>0.7</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_tVto.start</TD><TD>1.</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>m_tSatCurDens.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>m_tDrainSatCur.start</TD><TD>0.</TD><TD>[A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>m_tSourceSatCur.start</TD><TD>0.</TD><TD>[A]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_tCBDb.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_tCBDs.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_tCBSb.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_tCBSs.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD>Real</TD><TD>m_tCj.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_tCjsw.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_tBulkPot.start</TD><TD>0.7</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>m_tDepCap.start</TD><TD>0.35</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_tVbi.start</TD><TD>1.</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_VBScrit.start</TD><TD>0.7</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>m_VBDcrit.start</TD><TD>0.7</TD><TD>[V]</TD></TR>
<TR><TD>Real</TD><TD>m_f1b.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_f2b.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_f3b.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_f1s.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_f2s.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_f3s.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>m_dVt.start</TD><TD>0.</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_capgd.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_capgs.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Capacitance"
>Capacitance</A></TD><TD>m_capgb.start</TD><TD>0.</TD><TD>[F]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</A></TD><TD>m_qgs.start</TD><TD>0.</TD><TD>[C]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</A></TD><TD>m_qgd.start</TD><TD>0.</TD><TD>[C]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Charge"
>Charge</A></TD><TD>m_qgb.start</TD><TD>0.</TD><TD>[C]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> Mos1Calc <font color="darkgreen">&quot;Further mosfet variables (for level 1)&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosCalc"
>Mos.MosCalc</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Mos1Calc;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE mos1ModelLineParamsInitEquations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.mos1ModelLineParamsInitEquations"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.mos1ModelLineParamsInitEquations</H2>
<B>Initial precalculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function mos1ModelLineParamsInitEquation does the initial precalculation of the mosfet model line parameters for level 1.</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"
>Mos1ModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record model line parameters for MOS1</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A></TD><TD>in_C</TD><TD>&nbsp;</TD><TD>Spice constants</TD></TR>
<TR><TD>Integer</TD><TD>in_m_type</TD><TD>&nbsp;</TD><TD>Type of MOS transistor</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineVariables"
>MosModelLineVariables</A></TD><TD>out_v</TD><TD>Output record model line variables</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> mos1ModelLineParamsInitEquations <font color="darkgreen">&quot;Initial precalculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"
>Mos1ModelLineParams</A> in_p <font color="darkgreen">&quot;Input record model line parameters for MOS1&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A> in_C <font color="darkgreen">&quot;Spice constants&quot;</font>;
  <font color="blue">input </font>Integer in_m_type <font color="darkgreen">&quot;Type of MOS transistor&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineVariables"
>Mos.MosModelLineVariables</A> out_v <font color="darkgreen">&quot;Output record model line variables&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vtnom;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> fermis;
  Real fermig;
  Real wkfng;
  Real wkfngs;
  Real egfet1;
  Real vfb;

<font color="blue">algorithm </font>
  out_v.m_oxideCapFactor   := in_p.m_oxideCapFactor;
  out_v.m_transconductance := in_p.m_transconductance;
  out_v.m_phi              := in_p.m_phi;
  out_v.m_gamma            := in_p.m_gamma;
  out_v.m_vt0              := in_p.m_vt0;

  vtnom  := in_p.m_tnom*SpiceConstants.CONSTKoverQ;
  egfet1 := 1.16 - (7.02e-4*in_p.m_tnom*in_p.m_tnom)/(in_p.m_tnom + 1108);

  <font color="blue">if </font>(<font color="blue">not </font>(in_p.m_oxideThicknessIsGiven &gt; 0.5)<font color="blue"> or </font>in_p.m_oxideThickness == 0)<font color="blue"> then</font>
    <font color="blue">if </font>
      (in_p.m_oxideThickness == 0)<font color="blue"> then</font>
      out_v.m_oxideCapFactor := 0;
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    out_v.m_oxideCapFactor := 3.9 * 8.854214871e-12 / in_p.m_oxideThickness;

    <font color="blue">if </font>(out_v.m_oxideCapFactor &lt;&gt; 0)<font color="blue"> then</font>

      <font color="blue">if </font>(<font color="blue">not </font>(in_p.m_transconductanceIsGiven &gt; 0.5))<font color="blue"> then</font>
        out_v.m_transconductance := in_p.m_surfaceMobility * out_v.m_oxideCapFactor * 1e-4;<font color="darkgreen"> // (m**2/cm**2)</font>
      <font color="blue">end if</font>;
      <font color="blue">if </font>(in_p.m_substrateDopingIsGiven &gt; 0.5)<font color="blue"> then</font>
        <font color="blue">if </font>(in_p.m_substrateDoping * 1e6 &gt; 1.45e16)<font color="blue"> then</font><font color="darkgreen"> // (cm**3/m**3)</font>
          <font color="blue">if </font>(<font color="blue">not </font>(in_p.m_phiIsGiven &gt; 0.5))<font color="blue"> then</font>
            out_v.m_phi := 2*vtnom*<font color="red">Modelica.Math.log</font>(in_p.m_substrateDoping*1e6/1.45e16);<font color="darkgreen"> // (cm**3/m**3)</font>
            out_v.m_phi :=<font color="red"> max</font>(0.1, out_v.m_phi);
          <font color="blue">end if</font>;
          fermis := in_m_type *0.5  * out_v.m_phi;
          wkfng  := 3.2;
          <font color="blue">if </font>(in_p.m_gateType &lt;&gt; 0)<font color="blue"> then</font>
            fermig := in_m_type * in_p.m_gateType *0.5  * egfet1;
            wkfng  := 3.25 +0.5  * egfet1 - fermig;
          <font color="blue">end if</font>;
          wkfngs := wkfng - (3.25 +0.5  * egfet1 + fermis);
          <font color="blue">if </font>(<font color="blue">not </font>(in_p.m_gammaIsGiven &gt; 0.5))<font color="blue"> then</font>
            out_v.m_gamma :=<font color="red"> sqrt</font>(2 * 11.70 * 8.854214871e-12 * SpiceConstants.CHARGE *
                             in_p.m_substrateDoping * 1e6 / out_v.m_oxideCapFactor);<font color="darkgreen">         // (cm**3/m**3)</font>
          <font color="blue">end if</font>;
          <font color="blue">if </font>(<font color="blue">not </font>(in_p.m_vtOIsGiven &gt; 0.5))<font color="blue"> then</font>
            vfb         := wkfngs - in_p.m_surfaceStateDensity * 1e4 * SpiceConstants.CHARGE / out_v.m_oxideCapFactor;<font color="darkgreen"> // (cm**2/m**2)</font>
            out_v.m_vt0 := vfb + in_m_type * (out_v.m_gamma *<font color="red"> sqrt</font>(out_v.m_phi) + out_v.m_phi);
           <font color="blue">end if</font>;
        <font color="blue">end if</font>;
      <font color="blue">end if</font>;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>mos1ModelLineParamsInitEquations;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE drainCur<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.drainCur"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.drainCur</H2>
<B>Drain current calculation</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function drainCur calculates the main currents that flows from drain node to source node (level 1).</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>vb</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>vg</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Voltage</A></TD><TD>vds</TD><TD>&nbsp;</TD><TD>[V]</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"
>Mos1Calc</A></TD><TD>in_c</TD><TD>&nbsp;</TD><TD>Input record Mos1Calc</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"
>Mos1ModelLineParams</A></TD><TD>in_p</TD><TD>&nbsp;</TD><TD>Input record model line parameters for MOS1</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A></TD><TD>in_C</TD><TD>&nbsp;</TD><TD>Spice constants</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineVariables"
>MosModelLineVariables</A></TD><TD>in_vp</TD><TD>&nbsp;</TD><TD>Input record model line variables</TD></TR>
<TR><TD>Integer</TD><TD>in_m_type</TD><TD>&nbsp;</TD><TD>Type of Mos transistor</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"
>Mos1Calc</A></TD><TD>out_c</TD><TD>Output record Mos1Calc</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> drainCur <font color="darkgreen">&quot;Drain current calculation&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vb;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vg;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vds;

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"
>Mos1Calc</A> in_c <font color="darkgreen">&quot;Input record Mos1Calc&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1ModelLineParams"
>Mos1ModelLineParams</A> in_p <font color="darkgreen">&quot;Input record model line parameters for MOS1&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A> in_C <font color="darkgreen">&quot;Spice constants&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineVariables"
>Mos.MosModelLineVariables</A> in_vp <font color="darkgreen">&quot;Input record model line variables&quot;</font>;
  <font color="blue">input </font>Integer in_m_type <font color="darkgreen">&quot;Type of Mos transistor&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1.Mos1Calc"
>Mos1Calc</A> out_c <font color="darkgreen">&quot;Output record Mos1Calc&quot;</font>;

<font color="blue">protected </font>
  Real arg;
  Real betap;
  Real sarg;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Voltage"
>Modelica.SIunits.Voltage</A> vgst;

<font color="blue">algorithm </font>
  out_c := in_c;

   <font color="blue">if </font>(vb &lt;= 0)<font color="blue"> then</font>
      sarg :=<font color="red"> sqrt</font>( out_c.m_tPhi - vb);
   <font color="blue">else</font>
      sarg :=<font color="red"> sqrt</font>( out_c.m_tPhi);
      sarg := sarg - vb / (sarg + sarg);
      sarg :=<font color="red"> max</font>( 0., sarg);
   <font color="blue">end if</font>;

   out_c.m_von   := (out_c.m_tVbi * in_m_type) + in_vp.m_gamma * sarg;
   vgst          := vg - out_c.m_von;
   out_c.m_vdsat :=<font color="red"> max</font>( vgst, 0.);
   arg           := <font color="blue">if </font>(sarg &lt;= 0)<font color="blue"> then </font>0<font color="blue"> else </font>in_vp.m_gamma / (sarg + sarg);

   <font color="blue">if </font>(vgst &lt;= 0)<font color="blue"> then</font>
    <font color="darkgreen">  /* cutoff region */</font>
      out_c.m_cdrain := 0;
      out_c.m_gm     := 0;
      out_c.m_gds    := 0;
      out_c.m_gmbs   := 0;

   <font color="blue">else</font>
      betap := out_c.m_Beta*(1 + in_p.m_lambda*vds);

      <font color="blue">if </font>(vgst &lt;= vds)<font color="blue"> then</font>
      <font color="darkgreen">   /* saturation region */</font>
         out_c.m_cdrain := betap * vgst * vgst * 0.5;
         out_c.m_gm     := betap * vgst;
         out_c.m_gds    := in_p.m_lambda * out_c.m_Beta * vgst * vgst * 0.5;
         out_c.m_gmbs   := out_c.m_gm * arg;
      <font color="blue">else</font>
      <font color="darkgreen">   /* linear region */</font>
         out_c.m_cdrain := betap * vds * (vgst - 0.5 * vds);
         out_c.m_gm     := betap * vds;
         out_c.m_gds    := betap * (vgst - vds) + in_p.m_lambda * out_c.m_Beta * vds * (vgst - 0.5  * vds);
         out_c.m_gmbs   := out_c.m_gm * arg;
      <font color="blue">end if</font>;
   <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>drainCur;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE mos1RenameParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParameters"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.mos1RenameParameters</H2>
<B>Parameter renaming to internal names</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function mos1RenameParameters assigns the external (given by the user, e.g., RD) technology parameters
to the internal parameters (e.g., m_drainResistance). It also does the analysis of the IsGiven values (level 1).</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardMOS"
>ModelcardMOS</A></TD><TD>ex</TD><TD>&nbsp;</TD><TD>Modelcard with technologieparameters</TD></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A></TD><TD>con</TD><TD>&nbsp;</TD><TD>Spice constants</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineParams"
>MosModelLineParams</A></TD><TD>intern</TD><TD>Output record model line parameters</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> mos1RenameParameters <font color="darkgreen">&quot;Parameter renaming to internal names&quot;</font>

  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardMOS"
>ModelcardMOS</A> ex <font color="darkgreen">&quot;Modelcard with technologieparameters&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.SpiceConstants"
>SpiceConstants</A> con <font color="darkgreen">&quot;Spice constants&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Mos.html#Modelica.Electrical.Spice3.Internal.Mos.MosModelLineParams"
>Mos.MosModelLineParams</A> intern <font color="darkgreen">&quot;Output record model line parameters&quot;</font>;

<font color="blue">algorithm </font>
    intern.m_oxideCapFactor := 0;

    intern.m_vtOIsGiven := <font color="blue">if </font>         (ex.VTO &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_vt0 := <font color="blue">if </font>        (ex.VTO &gt; -1e40)<font color="blue"> then </font>ex.VTO<font color="blue"> else </font>0;

    intern.m_capBDIsGiven := <font color="blue">if </font>         (ex.CBD &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_capBD := <font color="blue">if </font>        (ex.CBD &gt; -1e40)<font color="blue"> then </font>ex.CBD<font color="blue"> else </font>0;

    intern.m_capBSIsGiven := <font color="blue">if </font>         (ex.CBS &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_capBS := <font color="blue">if </font>        (ex.CBS &gt; -1e40)<font color="blue"> then </font>ex.CBS<font color="blue"> else </font>0;

      intern.m_bulkCapFactorIsGiven := <font color="blue">if </font>         (ex.CJ &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_bulkCapFactor := <font color="blue">if </font>        (ex.CJ &gt; -1e40)<font color="blue"> then </font>ex.CJ<font color="blue"> else </font>0;

    intern.m_sideWallCapFactor := ex.CJSW <font color="darkgreen">
    &quot;F/m zero-bias junction sidewall cap. per meter of junction perimeter (default 0)&quot;</font>;
    intern.m_fwdCapDepCoeff := ex.FC <font color="darkgreen">
    &quot;Coefficient for forward-bias depletion capacitance formula (default 0.5)&quot;</font>;

    intern.m_phiIsGiven := <font color="blue">if </font>         (ex.PHI &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_phi := <font color="blue">if </font>        (ex.PHI &gt; -1e40)<font color="blue"> then </font>ex.PHI<font color="blue"> else </font>0.6;

     intern.m_gammaIsGiven := <font color="blue">if </font>         (ex.GAMMA &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_gamma := <font color="blue">if </font>        (ex.GAMMA &gt; -1e40)<font color="blue"> then </font>ex.GAMMA<font color="blue"> else </font>0;

    intern.m_lambda := ex.LAMBDA <font color="darkgreen">&quot;1/V channel-length modulation (default 0)&quot;</font>;

    intern.m_substrateDopingIsGiven := <font color="blue">if </font>         (ex.NSUB &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_substrateDoping := <font color="blue">if </font>        (ex.NSUB &gt; -1e40)<font color="blue"> then </font>ex.NSUB<font color="blue"> else </font>0;

    intern.m_gateType := ex.TPG <font color="darkgreen">
    &quot;Type of gate material: +1 opp. to substrate, -1 same as substrate, 0 Al gate (default 1)&quot;</font>;
    intern.m_surfaceStateDensity := ex.NSS <font color="darkgreen">
    &quot;IN 1/(cm*cm) surface state density (default 0)&quot;</font>;
    intern.m_surfaceMobility := ex.UO <font color="darkgreen">
    &quot;In (cm*cm)/(Vs) surface mobility (default 600)&quot;</font>;
    intern.m_latDiff := ex.LD <font color="darkgreen">&quot;In m lateral diffusion (default 0)&quot;</font>;
    intern.m_jctSatCur := ex.IS <font color="darkgreen">
    &quot;A bulk junction saturation current (defaul 1e-14)&quot;</font>;

    intern.m_drainResistanceIsGiven := <font color="blue">if </font>
                                         (ex.RD &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_drainResistance := <font color="blue">if </font>
                                 (ex.RD &gt; -1e40)<font color="blue"> then </font>ex.RD<font color="blue"> else </font>0;

    intern.m_sourceResistanceIsGiven := <font color="blue">if </font>
                                         (ex.RS &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_sourceResistance := <font color="blue">if </font>
                                 (ex.RS &gt; -1e40)<font color="blue"> then </font>ex.RS<font color="blue"> else </font>0;

    intern.m_transconductanceIsGiven := <font color="blue">if </font>         (ex.KP &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_transconductance := <font color="blue">if </font>        (ex.KP &gt; -1e40)<font color="blue"> then </font>ex.KP<font color="blue"> else </font>2e-5;

    intern.m_tnom := <font color="blue">if </font>(ex.TNOM &gt; -1e40)<font color="blue"> then </font>ex.TNOM + SpiceConstants.CONSTCtoK<font color="blue"> else </font>300.15 <font color="darkgreen">
    &quot;parameter measurement temperature (default 27 deg C)&quot;</font>;

   intern.m_jctSatCurDensity := ex.JS <font color="darkgreen">
    &quot;A/(m*m) bulk junction saturation current per sq-meter of junction area (default 0)&quot;</font>;
   intern.m_sheetResistance := ex.RSH <font color="darkgreen">
    &quot;Ohm drain and source diffusion sheet resistance (default 0)&quot;</font>;
   intern.m_bulkJctPotential := ex.PB <font color="darkgreen">&quot;V bulk junction potential (default 0.8)&quot;</font>;
   intern.m_bulkJctBotGradingCoeff := ex.MJ <font color="darkgreen">
    &quot;bulk junction bottom grading coeff. (default 0.5)&quot;</font>;
   intern.m_bulkJctSideGradingCoeff := ex.MJSW <font color="darkgreen">
    &quot;bulk junction sidewall grading coeff. (default 0.5)&quot;</font>;

   intern.m_oxideThicknessIsGiven := <font color="blue">if </font>         (ex.TOX &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0;
    intern.m_oxideThickness := <font color="blue">if </font>        (ex.TOX &gt; -1e40)<font color="blue"> then </font>ex.TOX<font color="blue"> else </font>0;

   intern.m_gateSourceOverlapCapFactor := ex.CGSO <font color="darkgreen">
    &quot; F/m gate-source overlap capacitance per meter channel width (default 0)&quot;</font>;
   intern.m_gateDrainOverlapCapFactor := ex.CGDO <font color="darkgreen">
    &quot;F/m gate-drain overlap capacitance per meter channel width (default 0)&quot;</font>;
   intern.m_gateBulkOverlapCapFactor := ex.CGBO <font color="darkgreen">
    &quot;F/m gate-bulk overlap capacitance per meter channel width (default 0)&quot;</font>;
   intern.m_fNcoef := ex.KF <font color="darkgreen">&quot;Flicker-noise coefficient (default 0)&quot;</font>;
   intern.m_fNexp := ex.AF <font color="darkgreen">&quot;Flicker-noise exponent (default 1)&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>mos1RenameParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE mos1RenameParametersDev<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Electrical.Spice3.Internal.Mos1.mos1RenameParametersDev"></A><A HREF="Modelica_Electrical_Spice3_Internal_Mos1.html#Modelica.Electrical.Spice3.Internal.Mos1"
>Modelica.Electrical.Spice3.Internal.Mos1</A>.mos1RenameParametersDev</H2>
<B>Device parameter renaming to internal names</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>This function mos1RenameParametersDev assigns the external (given by the user) device parameters to the internal parameters. It also does the analysis of the IsGiven values (level 1).</p>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardMOS"
>ModelcardMOS</A></TD><TD>ex</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Integer</TD><TD>mtype</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>W</TD><TD>&nbsp;</TD><TD>Channel Width [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>L</TD><TD>&nbsp;</TD><TD>Channel Length [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>AD</TD><TD>&nbsp;</TD><TD>Area of the drain diffusion [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>AS</TD><TD>&nbsp;</TD><TD>Area of the source diffusion [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>PD</TD><TD>&nbsp;</TD><TD>Perimeter of the drain junction [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>PS</TD><TD>&nbsp;</TD><TD>Perimeter of the source junction [m]</TD></TR>
<TR><TD>Real</TD><TD>NRD</TD><TD>&nbsp;</TD><TD>Number of squares of the drain diffusions</TD></TR>
<TR><TD>Real</TD><TD>NRS</TD><TD>&nbsp;</TD><TD>Number of squares of the source diffusions</TD></TR>
<TR><TD>Integer</TD><TD>OFF</TD><TD>&nbsp;</TD><TD>Optional initial condition: 0 - IC not used, 1 - IC used, not implemented yet</TD></TR>
<TR><TD>Real</TD><TD>IC</TD><TD>&nbsp;</TD><TD>Initial condition values, not implemented yet</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Temp_C</A></TD><TD>TEMP</TD><TD>&nbsp;</TD><TD>Temperature [degC]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Electrical_Spice3_Internal_Mosfet.html#Modelica.Electrical.Spice3.Internal.Mosfet.Mosfet"
>Mosfet</A></TD><TD>dev</TD><TD>Output record Mosfet</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> mos1RenameParametersDev <font color="darkgreen">
  &quot;Device parameter renaming to internal names&quot;</font>
  <font color="blue">input </font><A HREF="Modelica_Electrical_Spice3_Internal.html#Modelica.Electrical.Spice3.Internal.ModelcardMOS"
>ModelcardMOS</A> ex;
  <font color="blue">input </font>Integer mtype;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> W <font color="darkgreen">&quot;Channel Width&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> L <font color="darkgreen">&quot;Channel Length&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> AD <font color="darkgreen">&quot;Area of the drain diffusion&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> AS <font color="darkgreen">&quot;Area of the source diffusion&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> PD <font color="darkgreen">&quot;Perimeter of the drain junction&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> PS <font color="darkgreen">&quot;Perimeter of the source junction&quot;</font>;
  <font color="blue">input </font>Real NRD <font color="darkgreen">&quot;Number of squares of the drain diffusions&quot;</font>;
  <font color="blue">input </font>Real NRS <font color="darkgreen">&quot;Number of squares of the source diffusions&quot;</font>;
  <font color="blue">input </font>Integer OFF <font color="darkgreen">
    &quot;Optional initial condition: 0 - IC not used, 1 - IC used, not implemented yet&quot;</font>;
  <font color="blue">input </font>Real IC <font color="darkgreen">&quot;Initial condition values, not implemented yet&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temp_C"
>Modelica.SIunits.Temp_C</A> TEMP <font color="darkgreen">&quot;Temperature&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_Electrical_Spice3_Internal_Mosfet.html#Modelica.Electrical.Spice3.Internal.Mosfet.Mosfet"
>Mosfet.Mosfet</A> dev <font color="darkgreen">&quot;Output record Mosfet&quot;</font>;

<font color="blue">algorithm </font>
<font color="darkgreen">/*device parameters*/</font>
  dev.m_len := L <font color="darkgreen">&quot;L, length of channel region&quot;</font>;
  dev.m_width := W <font color="darkgreen">&quot;W, width of channel region&quot;</font>;
  dev.m_drainArea := AD <font color="darkgreen">&quot;AD, area of drain diffusion&quot;</font>;
  dev.m_sourceArea := AS <font color="darkgreen">&quot;AS, area of source diffusion&quot;</font>;
  dev.m_drainSquares := NRD <font color="darkgreen">&quot;NRD, length of drain in squares&quot;</font>;
  dev.m_sourceSquares := NRS <font color="darkgreen">&quot;NRS, length of source in squares&quot;</font>;
  dev.m_drainPerimiter := PD <font color="darkgreen">&quot;PD, Drain perimeter&quot;</font>;
  dev.m_sourcePerimiter := PS <font color="darkgreen">&quot;PS, Source perimeter&quot;</font>;

    dev.m_dICVDSIsGiven := <font color="blue">if </font>         (IC &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;ICVDS IsGivenValue&quot;</font>;
    dev.m_dICVDS := <font color="blue">if </font>        (IC &gt; -1e40)<font color="blue"> then </font>IC<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;Initial condition of VDS&quot;</font>;

    dev.m_dICVGSIsGiven := <font color="blue">if </font>         (IC &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;ICVGS IsGivenValue&quot;</font>;
    dev.m_dICVGS := <font color="blue">if </font>        (IC &gt; -1e40)<font color="blue"> then </font>IC<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;Initial condition of VGS&quot;</font>;

    dev.m_dICVBSIsGiven := <font color="blue">if </font>         (IC &gt; -1e40)<font color="blue"> then </font>1<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;ICVBS IsGivenValue&quot;</font>;
    dev.m_dICVBS := <font color="blue">if </font>        (IC &gt; -1e40)<font color="blue"> then </font>IC<font color="blue"> else </font>0 <font color="darkgreen">
    &quot;Initial condition of VBS&quot;</font>;

  dev.m_off := OFF <font color="darkgreen">&quot;Non-zero to indicate device is off for dc analysis&quot;</font>;
  dev.m_bPMOS := mtype <font color="darkgreen">&quot;P type MOSfet model&quot;</font>;
  dev.m_nLevel := ex.LEVEL <font color="darkgreen">&quot;Level&quot;</font>;
  <font color="red">assert</font>(ex.LEVEL== 1, &quot;only MOS Level1 implemented&quot;);
  dev.m_dTemp :=TEMP + SpiceConstants.CONSTCtoK <font color="darkgreen">&quot;Device temperature&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>mos1RenameParametersDev;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:29:47 2010.
</address></BODY>
</HTML>
