<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Dissipation.PressureLoss.Valve</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Package for pressure loss calculation of valves&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Valve<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.PressureLoss.Valve"></A><A HREF="Modelica_Fluid_Dissipation_PressureLoss.html#Modelica.Fluid.Dissipation.PressureLoss"
>Modelica.Fluid.Dissipation.PressureLoss</A>.Valve</H2>
<B>Package for pressure loss calculation of valves</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<h4>Valve</h4>
<h5>Several geometries</h5>
<p>
Calculation of pressure loss for a valve with different geometries at overall flow regime for incompressible and single-phase fluid flow in dependence of its opening.
<A HREF="Modelica_Fluid_Dissipation_Utilities_SharedDocumentation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.Utilities.SharedDocumentation.PressureLoss.Valve.dp_severalGeometryOverall"
>See more information</a>.
</p>

<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</A> (Icon for package containing variants).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DPS.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP"
>dp_severalGeometryOverall_DP</A>
</TD><TD>Pressure loss of valve | calculate pressure loss | several geometries | overall flow regime</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DPS.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW"
>dp_severalGeometryOverall_MFLOW</A>
</TD><TD>Pressure loss of valve | calculate mass flow rate | several geometries | overall flow regime</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_conS.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"
>dp_severalGeometryOverall_IN_con</A>
</TD><TD>Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_conS.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"
>dp_severalGeometryOverall_IN_var</A>
</TD><TD>Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE dp_severalGeometryOverall_DP<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP"></A><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>.dp_severalGeometryOverall_DP</H2>
<B>Pressure loss of valve | calculate pressure loss | several geometries | overall flow regime</B><p>
<IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DPD.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Calculation of pressure loss for a valve with different geometries at overall flow regime for incompressible and single-phase fluid flow in dependence of its opening.
</p>

<p>
Generally this function is numerically best used for the <b> incompressible case </b>, where the mass flow rate (m_flow) is known (as state variable) in the used model and the corresponding pressure loss (DP) has to be calculated. On the other hand the function <A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW"
>dp_severalGeometryOverall_MFLOW</a> is numerically best used for the <b> compressible case </b> if the pressure loss (dp) is known (out of pressures as state variable) and the mass flow rate (M_FLOW) has to be calculated. <A HREF="Modelica_Fluid_Dissipation_Utilities_SharedDocumentation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.Utilities.SharedDocumentation.PressureLoss.Valve.dp_severalGeometryOverall"
>See more information</a>.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d"
>Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d</A> (Icon for valve).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Constant inputs</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"
>dp_severalGeometryOverall_IN_con</A></TD><TD>IN_con</TD><TD>&nbsp;</TD><TD>Input record for function dp_severalGeometryOverall_DP</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Variable inputs</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"
>dp_severalGeometryOverall_IN_var</A></TD><TD>IN_var</TD><TD>&nbsp;</TD><TD>Input record for function dp_severalGeometryOverall_DP</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Input</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>&nbsp;</TD><TD>Mass flow rate [kg/s]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>DP</TD><TD>Pressure loss [Pa]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> dp_severalGeometryOverall_DP <font color="darkgreen">
  &quot;Pressure loss of valve | calculate pressure loss | several geometries | overall flow regime&quot;</font>
  <font color="blue">import </font>FD = <A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>;
  <font color="blue">import </font>SMOOTH = <A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother"
>Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother</A>;
  <font color="blue">import </font>TYP = <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types"
>Modelica.Fluid.Dissipation.Utilities.Types</A>;

  <font color="darkgreen">//icon</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d"
>Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d</A>;

  <font color="darkgreen">//input records</font>
  <font color="blue">input </font><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"
>Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con</A>
    IN_con <font color="darkgreen">&quot;Input record for function dp_severalGeometryOverall_DP&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"
>Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var</A>
    IN_var <font color="darkgreen">&quot;Input record for function dp_severalGeometryOverall_DP&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate&quot;</font>;

  <font color="darkgreen">//output variables</font>
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> DP <font color="darkgreen">&quot;Pressure loss&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">type</font> TYP1 =
      <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient</A>;
  <font color="blue">type</font> TYP2 = <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry</A>;

  Real MIN=Modelica.Constants.eps;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>SI.Area</A> Av=<font color="blue">if </font>IN_con.valveCoefficient == TYP1.AV<font color="blue"> then </font>IN_con.Av<font color="blue"> else </font><font color="blue">if </font>
      IN_con.valveCoefficient == TYP1.KV<font color="blue"> then </font>IN_con.Kv*27.7e-6<font color="blue"> else </font><font color="blue">if </font>IN_con.valveCoefficient
       == TYP1.CV<font color="blue"> then </font>IN_con.Cv*24e-6<font color="blue"> else </font><font color="blue">if </font>IN_con.valveCoefficient == TYP1.OP<font color="blue"> then </font>
            IN_con.m_flow_nominal/<font color="red">max</font>(MIN, IN_con.opening_nominal*(IN_con.rho_nominal
      *IN_con.dp_nominal)^0.5)<font color="blue"> else </font>MIN <font color="darkgreen">&quot;Av (metric) flow coefficient [Av]=m^2&quot;</font>;

  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_bal=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*10^(-3.8397*IN_var.opening + 2.9449) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Ball valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_dia=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*10^(2.2596*<font color="red">exp</font>(-1.8816*IN_var.opening)) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Diaphragm valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_but=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*619.81*<font color="red">exp</font>(-7.3211*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Butterfly valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_gat=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*51.45*<font color="red">exp</font>(-6.046*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Gate valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_slu=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*248.89*<font color="red">exp</font>(-7.8265*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Sluice valves&quot;</font>;

  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_TOT=<font color="blue">if </font>IN_con.geometry == TYP2.Ball<font color="blue"> then </font>
      zeta_bal<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry == TYP2.Diaphragm<font color="blue"> then </font>zeta_dia<font color="blue"> else </font><font color="blue">if </font>
      IN_con.geometry == TYP2.Butterfly<font color="blue"> then </font>zeta_but<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry
       == TYP2.Gate<font color="blue"> then </font>zeta_gat<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry == TYP2.Sluice<font color="blue"> then </font>
      zeta_slu<font color="blue"> else </font>0 <font color="darkgreen">&quot;Pressure loss coefficient of chosen valve&quot;</font>;

  Real valveCharacteristic=(2/<font color="red">min</font>(IN_con.zeta_TOT_max,<font color="red"> max</font>(MIN,<font color="red"> max</font>(IN_con.zeta_TOT_min,
      <font color="red">abs</font>(zeta_TOT)))))^0.5 <font color="darkgreen">
    &quot;Valve characteristic considering opening of chosen valve&quot;</font>;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_small=valveCharacteristic*Av*(IN_var.rho)^0.5*(IN_con.dp_small)
      ^0.5 <font color="darkgreen">&quot;Mass flow rate at linearisation&quot;</font>;

  <font color="darkgreen">//Documentation</font>

<font color="blue">algorithm </font>
  DP := 1/((valveCharacteristic*Av)^2*IN_var.rho)*
    <font color="red">Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower</font>(
          m_flow,
          m_flow_small,
          2);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>dp_severalGeometryOverall_DP;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE dp_severalGeometryOverall_MFLOW<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW"></A><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>.dp_severalGeometryOverall_MFLOW</H2>
<B>Pressure loss of valve | calculate mass flow rate | several geometries | overall flow regime</B><p>
<IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DPD.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Calculation of pressure loss for a valve with different geometries at overall flow regime for incompressible and single-phase fluid flow in dependence of its opening.
</p>

<p>
Generally this  function is numerically best used for the <b> compressible case </b>, where the pressure loss (dp) is known (out of pressures as state variable) in the used model and the corresponding mass flow rate (M_FLOW) has to be calculated. On the other hand the  function <A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP"
>dp_severalGeometryOverall_DP</a> is numerically best used for the <b> incompressible case </b> if the mass flow rate (m_flow) is known (as state variable) and the pressure loss (DP) has to be calculated. <A HREF="Modelica_Fluid_Dissipation_Utilities_SharedDocumentation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.Utilities.SharedDocumentation.PressureLoss.Valve.dp_severalGeometryOverall"
>See more information</a>.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d"
>Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d</A> (Icon for valve).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Constant inputs</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"
>dp_severalGeometryOverall_IN_con</A></TD><TD>IN_con</TD><TD>&nbsp;</TD><TD>Input record for function dp_severalGeometryOverall_MFLOW</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Variable inputs</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"
>dp_severalGeometryOverall_IN_var</A></TD><TD>IN_var</TD><TD>&nbsp;</TD><TD>Input record for function dp_severalGeometryOverall_MFLOW</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Input</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>&nbsp;</TD><TD>Pressure loss [Pa]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>M_FLOW</TD><TD>Mass flow rate [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> dp_severalGeometryOverall_MFLOW <font color="darkgreen">
  &quot;Pressure loss of valve | calculate mass flow rate | several geometries | overall flow regime&quot;</font>
  <font color="blue">import </font>FD = <A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>;
  <font color="blue">import </font>SMOOTH = <A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother"
>Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother</A>;
  <font color="blue">import </font>TYP = <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types"
>Modelica.Fluid.Dissipation.Utilities.Types</A>;

  <font color="darkgreen">//icon</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Dissipation_Utilities_Icons_PressureLoss.html#Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d"
>Modelica.Fluid.Dissipation.Utilities.Icons.PressureLoss.Valve_d</A>;

  <font color="darkgreen">//input records</font>
  <font color="blue">input </font><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"
>Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con</A>
    IN_con <font color="darkgreen">&quot;Input record for function dp_severalGeometryOverall_MFLOW&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"
>Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var</A>
    IN_var <font color="darkgreen">&quot;Input record for function dp_severalGeometryOverall_MFLOW&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure loss&quot;</font>;

  <font color="darkgreen">//output variables</font>
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> M_FLOW <font color="darkgreen">&quot;Mass flow rate&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">type</font> TYP1 =
      <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient</A>;
  <font color="blue">type</font> TYP2 = <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry</A>;

  Real MIN=Modelica.Constants.eps;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>SI.Area</A> Av=<font color="blue">if </font>IN_con.valveCoefficient == TYP1.AV<font color="blue"> then </font>IN_con.Av<font color="blue"> else </font><font color="blue">if </font>
      IN_con.valveCoefficient == TYP1.KV<font color="blue"> then </font>IN_con.Kv*27.7e-6<font color="blue"> else </font><font color="blue">if </font>IN_con.valveCoefficient
       == TYP1.CV<font color="blue"> then </font>IN_con.Cv*24e-6<font color="blue"> else </font><font color="blue">if </font>IN_con.valveCoefficient == TYP1.OP<font color="blue"> then </font>
            IN_con.m_flow_nominal/<font color="red">max</font>(MIN, IN_con.opening_nominal*(IN_con.rho_nominal
      *IN_con.dp_nominal)^0.5)<font color="blue"> else </font>MIN <font color="darkgreen">&quot;Av (metric) flow coefficient [Av]=m^2&quot;</font>;

  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_bal=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*10^(-3.8397*IN_var.opening + 2.9449) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Ball valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_dia=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*10^(2.2596*<font color="red">exp</font>(-1.8816*IN_var.opening)) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Diaphragm valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_but=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*619.81*<font color="red">exp</font>(-7.3211*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Butterfly valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_gat=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*51.45*<font color="red">exp</font>(-6.046*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Gate valves&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_slu=<font color="red">SMOOTH</font>(
      0.05,
      0,
      IN_var.opening)*248.89*<font color="red">exp</font>(-7.8265*IN_var.opening) +<font color="red"> SMOOTH</font>(
      0,
      0.05,
      IN_var.opening)*IN_con.zeta_TOT_max <font color="darkgreen">&quot;Sluice valves&quot;</font>;

  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.PressureLossCoefficient"
>TYP.PressureLossCoefficient</A> zeta_TOT=<font color="blue">if </font>IN_con.geometry == TYP2.Ball<font color="blue"> then </font>
      zeta_bal<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry == TYP2.Diaphragm<font color="blue"> then </font>zeta_dia<font color="blue"> else </font><font color="blue">if </font>
      IN_con.geometry == TYP2.Butterfly<font color="blue"> then </font>zeta_but<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry
       == TYP2.Gate<font color="blue"> then </font>zeta_gat<font color="blue"> else </font><font color="blue">if </font>IN_con.geometry == TYP2.Sluice<font color="blue"> then </font>
      zeta_slu<font color="blue"> else </font>0 <font color="darkgreen">&quot;Pressure loss coefficient of chosen valve&quot;</font>;

  Real valveCharacteristic=(2/<font color="red">min</font>(IN_con.zeta_TOT_max,<font color="red"> max</font>(MIN,<font color="red"> max</font>(IN_con.zeta_TOT_min,
      <font color="red">abs</font>(zeta_TOT)))))^0.5 <font color="darkgreen">
    &quot;Valve characteristic considering opening of chosen valve&quot;</font>;

  <font color="darkgreen">//Documentation</font>

<font color="blue">algorithm </font>
  M_FLOW := valveCharacteristic*Av*(IN_var.rho)^0.5*
    <font color="red">Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower</font>(
          dp,
          IN_con.dp_small,
          0.5);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>dp_severalGeometryOverall_MFLOW;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE dp_severalGeometryOverall_IN_con<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_conI.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_con"></A><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>.dp_severalGeometryOverall_IN_con</H2>
<B>Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This record is used as <b> input record </b> for the pressure loss function
<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP"
> dp_severalGeometryOverall_DP</a> and
<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW"
> dp_severalGeometryOverall_MFLOW</a>.
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A> (Icon for records).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Valve</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry"
>ValveGeometry</A></TD><TD>geometry</TD><TD>Dissipation.Utilities.Types....</TD><TD>Choice of geometry for valve</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient"
>ValveCoefficient</A></TD><TD>valveCoefficient</TD><TD>Modelica.Fluid.Dissipation.U...</TD><TD>Choice of valve coefficient</TD></TR>
<TR><TD>Real</TD><TD>Av</TD><TD>PI*0.1^2/4</TD><TD>Av (metric) flow coefficient [Av]=m^2</TD></TR>
<TR><TD>Real</TD><TD>Kv</TD><TD>Av/27.7e-6</TD><TD>Kv (metric) flow coefficient [Kv]=m^3/h</TD></TR>
<TR><TD>Real</TD><TD>Cv</TD><TD>Av/24.6e-6</TD><TD>Cv (US) flow coefficient [Cv]=USG/min</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>1e3</TD><TD>Nominal pressure loss [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>opening_nominal*Av*(rho_nomi...</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_nominal</TD><TD>1000</TD><TD>Nominal inlet density [kg/m3]</TD></TR>
<TR><TD>Real</TD><TD>opening_nominal</TD><TD>0.5</TD><TD>Nominal opening</TD></TR>
<TR><TD>Real</TD><TD>zeta_TOT_min</TD><TD>1e-3</TD><TD>Minimal pressure loss coefficient at full opening</TD></TR>
<TR><TD>Real</TD><TD>zeta_TOT_max</TD><TD>1e8</TD><TD>Maximum pressure loss coefficient at closed opening</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Linearisation</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_small</TD><TD>0.01*dp_nominal</TD><TD>Linearisation for a pressure loss smaller then dp_small [Pa]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> dp_severalGeometryOverall_IN_con <font color="darkgreen">
  &quot;Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A>;

  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveGeometry</A> geometry=Dissipation.Utilities.Types.ValveGeometry.Ball <font color="darkgreen">
    &quot;Choice of geometry for valve&quot;</font>;
  <A HREF="Modelica_Fluid_Dissipation_Utilities_Types.html#Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient"
>Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient</A>
    valveCoefficient=
      Modelica.Fluid.Dissipation.Utilities.Types.ValveCoefficient.AV <font color="darkgreen">
    &quot;Choice of valve coefficient&quot;</font>;

  <font color="darkgreen">//valve variables</font>
  Real Av=PI*0.1^2/4 <font color="darkgreen">&quot;Av (metric) flow coefficient [Av]=m^2&quot;</font>;
  Real Kv=Av/27.7e-6 <font color="darkgreen">&quot;Kv (metric) flow coefficient [Kv]=m^3/h&quot;</font>;
  Real Cv=Av/24.6e-6 <font color="darkgreen">&quot;Cv (US) flow coefficient [Cv]=USG/min&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp_nominal=1e3 <font color="darkgreen">&quot;Nominal pressure loss&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_nominal=opening_nominal*Av*(rho_nominal*dp_nominal)^
      0.5 <font color="darkgreen">&quot;Nominal mass flow rate&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_nominal=1000 <font color="darkgreen">&quot;Nominal inlet density&quot;</font>;
  Real opening_nominal=0.5 <font color="darkgreen">&quot;Nominal opening&quot;</font>;
  Real zeta_TOT_min=1e-3 <font color="darkgreen">&quot;Minimal pressure loss coefficient at full opening&quot;</font>;
  Real zeta_TOT_max=1e8 <font color="darkgreen">&quot;Maximum pressure loss coefficient at closed opening&quot;</font>;

  <font color="darkgreen">//numerical aspects</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp_small=0.01*dp_nominal <font color="darkgreen">
    &quot;Linearisation for a pressure loss smaller then dp_small&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>dp_severalGeometryOverall_IN_con;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE dp_severalGeometryOverall_IN_var<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_conI.png" ALT="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_IN_var"></A><A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve"
>Modelica.Fluid.Dissipation.PressureLoss.Valve</A>.dp_severalGeometryOverall_IN_var</H2>
<B>Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
This record is used as <b> input record </b> for the pressure loss function
<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_DP"
> dp_severalGeometryOverall_DP</a> and
<A HREF="Modelica_Fluid_Dissipation_PressureLoss_Valve.html#Modelica.Fluid.Dissipation.PressureLoss.Valve.dp_severalGeometryOverall_MFLOW"
> dp_severalGeometryOverall_MFLOW</a>.
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A> (Icon for records).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Valve</TD></TR>
<TR><TD>Real</TD><TD>opening</TD><TD>1</TD><TD>Opening of valve | 0==closed and 1== fully openend</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Fluid properties</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>eta</TD><TD>&nbsp;</TD><TD>Dynamic viscosity of fluid [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho</TD><TD>&nbsp;</TD><TD>Density of fluid [kg/m3]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> dp_severalGeometryOverall_IN_var <font color="darkgreen">
  &quot;Input record for function dp_severalGeometryOverall_DP and dp_severalGeometryOverall_MFLOW&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A>;

  <font color="darkgreen">//valve variables</font>
  Real opening=1 <font color="darkgreen">&quot;Opening of valve | 0==closed and 1== fully openend&quot;</font>;

  <font color="darkgreen">//fluid property variables</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> eta <font color="darkgreen">&quot;Dynamic viscosity of fluid&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho <font color="darkgreen">&quot;Density of fluid&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>dp_severalGeometryOverall_IN_var;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:23 2010.
</address></BODY>
</HTML>
