<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Dissipation.Utilities.Functions.General</TITLE>
<META name="HTML-Generator" content="Dymola">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE General<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions.html#Modelica.Fluid.Dissipation.Utilities.Functions"
>Modelica.Fluid.Dissipation.Utilities.Functions</A>.General</H2>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_DP" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_DP"
>CubicInterpolation_DP</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_MFLOW" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_MFLOW"
>CubicInterpolation_MFLOW</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW"
>LambertW</A>
</TD><TD>Closed approximation of lambert&#39;s w function for solving f(x) = x exp(x) for x</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertWIter" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertWIter"
>LambertWIter</A>
</TD><TD>Iterative form of lambert&#39;s w function for solving f(x) = x exp(x) for x</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.PrandtlNumber" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.PrandtlNumber"
>PrandtlNumber</A>
</TD><TD>calculation of Prandtl number</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.HeatTransfer.TwoPhase.kc_twoPhase_condensationHorizontal_KCS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.ReynoldsNumber" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.ReynoldsNumber"
>ReynoldsNumber</A>
</TD><TD>calculation of Reynolds number</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower"
>SmoothPower</A>
</TD><TD>Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der"
>SmoothPower_der</A>
</TD><TD>The derivative of function SmoothPower</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother"
>Stepsmoother</A>
</TD><TD>Continuous interpolation for x </TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerS.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der"
>Stepsmoother_der</A>
</TD><TD>Derivative of function Stepsmoother</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CubicInterpolation_DP<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_DP"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.CubicInterpolation_DP</H2>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>Re_turbulent</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re1</TD><TD>&nbsp;</TD><TD>[1]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re2</TD><TD>&nbsp;</TD><TD>[1]</TD></TR>
<TR><TD>Real</TD><TD>Delta</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>lambda2</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re</TD><TD>[1]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> CubicInterpolation_DP
  <font color="blue">import </font><A HREF="Modelica_Math.html#Modelica.Math"
>Modelica.Math</A>;
  <font color="blue">input </font>Real Re_turbulent;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re1;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re2;
  <font color="blue">input </font>Real Delta;
  <font color="blue">input </font>Real lambda2;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re;
  <font color="darkgreen">// point lg(lambda2(Re1)) with derivative at lg(Re1)</font>
<font color="blue">protected </font>
  Real x1=<font color="red">Math.log10</font>(64*Re1);
  Real y1=<font color="red">Math.log10</font>(Re1);
  Real yd1=1;

  <font color="darkgreen">// Point lg(lambda2(Re2)) with derivative at lg(Re2)</font>
  Real aux1=(0.5/<font color="red">Math.log</font>(10))*5.74*0.9;
  Real aux2=Delta/3.7 + 5.74/Re2^0.9;
  Real aux3=<font color="red">Math.log10</font>(aux2);
  Real L2=0.25*(Re2/aux3)^2;
  Real aux4=2.51/<font color="red">sqrt</font>(L2) + 0.27*Delta;
  Real aux5=-2*<font color="red">sqrt</font>(L2)*<font color="red">Math.log10</font>(aux4);
  Real x2=<font color="red">Math.log10</font>(L2);
  Real y2=<font color="red">Math.log10</font>(aux5);
  Real yd2=0.5 + (2.51/<font color="red">Math.log</font>(10))/(aux5*aux4);

  <font color="darkgreen">// Constants: Cubic polynomial between lg(Re1) and lg(Re2)</font>
  Real diff_x=x2 - x1;
  Real m=(y2 - y1)/diff_x;
  Real c2=(3*m - 2*yd1 - yd2)/diff_x;
  Real c3=(yd1 + yd2 - 2*m)/(diff_x*diff_x);
  Real lambda2_1=64*Re1;
  Real dx=<font color="red">Math.log10</font>(lambda2/lambda2_1);

<font color="blue">algorithm </font>
  Re := Re1*(lambda2/lambda2_1)^(1 + dx*(c2 + dx*c3));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CubicInterpolation_DP;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CubicInterpolation_MFLOW<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.CubicInterpolation_MFLOW"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.CubicInterpolation_MFLOW</H2>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re</TD><TD>&nbsp;</TD><TD>[1]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re1</TD><TD>&nbsp;</TD><TD>[1]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re2</TD><TD>&nbsp;</TD><TD>[1]</TD></TR>
<TR><TD>Real</TD><TD>Delta</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>lambda2</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> CubicInterpolation_MFLOW
  <font color="blue">import </font><A HREF="Modelica_Math.html#Modelica.Math"
>Modelica.Math</A>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re1;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re2;
  <font color="blue">input </font>Real Delta;
  <font color="blue">output </font>Real lambda2;
  <font color="darkgreen">// point lg(lambda2(Re1)) with derivative at lg(Re1)</font>
<font color="blue">protected </font>
  Real x1=<font color="red">Math.log10</font>(Re1);
  Real y1=<font color="red">Math.log10</font>(64*Re1);
  Real yd1=1;

  <font color="darkgreen">// Point lg(lambda2(Re2)) with derivative at lg(Re2)</font>
  Real aux1=(0.5/<font color="red">Math.log</font>(10))*5.74*0.9;
  Real aux2=Delta/3.7 + 5.74/Re2^0.9;
  Real aux3=<font color="red">Math.log10</font>(aux2);
  Real L2=0.25*(Re2/aux3)^2;
  Real aux4=2.51/<font color="red">sqrt</font>(L2) + 0.27*Delta;
  Real aux5=-2*<font color="red">sqrt</font>(L2)*<font color="red">Math.log10</font>(aux4);
  Real x2=<font color="red">Math.log10</font>(Re2);
  Real y2=<font color="red">Math.log10</font>(L2);
  Real yd2=2 + 4*aux1/(aux2*aux3*(Re2)^0.9);

  <font color="darkgreen">// Constants: Cubic polynomial between lg(Re1) and lg(Re2)</font>
  Real diff_x=x2 - x1;
  Real m=(y2 - y1)/diff_x;
  Real c2=(3*m - 2*yd1 - yd2)/diff_x;
  Real c3=(yd1 + yd2 - 2*m)/(diff_x*diff_x);
  Real dx=<font color="red">Math.log10</font>(Re/Re1);

<font color="blue">algorithm </font>
  lambda2 := 64*Re1*(Re/Re1)^(1 + dx*(c2 + dx*c3));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CubicInterpolation_MFLOW;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LambertW<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.LambertW</H2>
<B>Closed approximation of lambert&#39;s w function for solving f(x) = x exp(x) for x</B><p>
<P><H3>Information</H3></P>
<PRE></pre>

<p>
This function calculates an approximation of the <b> inverse </b> for
<pre>
    f(x) = y = x * exp( x )
</pre>
</p>
<p>
within &infin; > y > -1/e.  The relative deviation of this approximation for lambert's w function <b>x = W(y)</b> is diplayed in the following graph.
</p>

<img src="../Resources/Images/Fluid/Dissipation/utilities/LambertW_deviation.png" alt="LambertW_deviation"/>

<p>
For y > 10 and higher values the relative deviation is smaller 2%.
</p>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y</TD><TD>&nbsp;</TD><TD>f(x)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>x</TD><TD>W(y)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> LambertW <font color="darkgreen">
  &quot;Closed approximation of lambert&#39;s w function for solving f(x) = x exp(x) for x&quot;</font>
  <font color="blue">input </font>Real y <font color="darkgreen">&quot;f(x)&quot;</font>;
  <font color="blue">output </font>Real x <font color="darkgreen">&quot;W(y)&quot;</font>;
<font color="blue">protected </font>
  Real xl;

<font color="blue">algorithm </font>
  <font color="blue">if </font>(y &lt;= 500.0)<font color="blue"> then</font>
    xl :=<font color="red"> Modelica.Math.log</font>(y + 1.0);
    x := 0.665*(1 + 0.0195*xl)*xl + 0.04;
  <font color="blue">else</font>
    xl := 0;
    x :=<font color="red"> Modelica.Math.log</font>(y - 4.0) - (1.0 - 1.0/<font color="red">Modelica.Math.log</font>(y))*
      <font color="red">Modelica.Math.log</font>(<font color="red">Modelica.Math.log</font>(y));
  <font color="blue">end if</font>;

  <font color="red">assert</font>(y &gt; -1/<font color="red">Modelica.Math.exp</font>(1),
    &quot;Lambert-w-function is only valid for inputs y &gt; -1/Modelica.Math.exp(1)!&quot;);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>LambertW;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LambertWIter<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertWIter"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.LambertWIter</H2>
<B>Iterative form of lambert&#39;s w function for solving f(x) = x exp(x) for x</B><p>
<P><H3>Information</H3></P>
<PRE></pre>

<p>
This function calculates an approximation of the <b> inverse </b> for
<pre>
    f(x) = y = x * exp( x )
</pre>
</p>
<p>
within &infin; > y > -1/e. Please note, that for negative inputs <b>two</b> solutions exists. The function currently delivers the result x = -1 ... 0 for that particular range.
</p>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y</TD><TD>&nbsp;</TD><TD>f(x)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>x</TD><TD>W(y)</TD></TR>
<TR><TD>Integer</TD><TD>iter</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> LambertWIter <font color="darkgreen">
  &quot;Iterative form of lambert&#39;s w function for solving f(x) = x exp(x) for x&quot;</font>
  <font color="blue">input </font>Real y <font color="darkgreen">&quot;f(x)&quot;</font>;
  <font color="blue">output </font>Real x <font color="darkgreen">&quot;W(y)&quot;</font>;
  <font color="blue">output </font>Integer iter;
<font color="blue">protected </font>
  Real w;
  Real prec=1e-12;
  Real c1;
  Real c2;
  Real dw;
  Real w1;
  <font color="darkgreen">/*Real wTimesExpW;
  Real wPlusOneTimesExpW;*/</font>
  Real dev;
  Integer i;

<font color="blue">algorithm </font>
  w := <font color="blue">if </font>y &gt; 0.1<font color="blue"> then </font><font color="red">Modelica.Fluid.Dissipation.Utilities.Functions.General.LambertW</font>(
    y)<font color="blue"> else </font><font color="red">sqrt</font>(5.43656*<font color="red">max</font>(y, -1/<font color="red">Modelica.Math.exp</font>(1)) + 2) - 1;
  dev := 1;
  i := 0;
  <font color="blue">while </font>prec &lt; dev<font color="blue"> and </font>i &lt; 100<font color="blue"> loop</font>
    <font color="darkgreen">/*wTimesExpW := w*Modelica.Math.exp(w);
                wPlusOneTimesExpW := (w+1)*Modelica.Math.exp(w);
                w := w-(wTimesExpW-y)/(wPlusOneTimesExpW-(w+2)*(wTimesExpW-y)/(2*w+2));
                dev := abs((y-wTimesExpW)/wPlusOneTimesExpW);
                i := i+1;*/</font>

    c1 :=<font color="red"> Modelica.Math.exp</font>(w);
    c2 := w*c1 - y;
    w1 := <font color="blue">if </font>w &lt;&gt; 1<font color="blue"> then </font>w + 1<font color="blue"> else </font>w;
    dw := c2/(c1*w1 - ((w + 2)*c2/(2*w1)));
    w := w - dw;
    <font color="darkgreen">//dev := abs(dw)/(2+abs(w));</font>
    dev :=<font color="red"> abs</font>((y - w*c1)/(w + 1)*c1);
    i := i + 1;
  <font color="blue">end while</font>;
  x := w;
  iter := i;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>LambertWIter;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PrandtlNumber<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.PrandtlNumber"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.PrandtlNumber</H2>
<B>calculation of Prandtl number</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacityAtConstantPressure"
>SpecificHeatCapacityAtConstantPressure</A></TD><TD>cp</TD><TD>&nbsp;</TD><TD>specific heat capacity of fluid at constant pressure [J/(kg.K)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>eta</TD><TD>&nbsp;</TD><TD>dynamic viscosity of fluid [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>ThermalConductivity</A></TD><TD>lambda</TD><TD>&nbsp;</TD><TD>thermal conductivity of fluid [W/(m.K)]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.PrandtlNumber"
>PrandtlNumber</A></TD><TD>Pr</TD><TD>Prandtl number [1]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> PrandtlNumber <font color="darkgreen">&quot;calculation of Prandtl number&quot;</font>

  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font>MIN = Modelica.Constants.eps;

  <font color="darkgreen">//fluid properties</font>
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacityAtConstantPressure"
>SI.SpecificHeatCapacityAtConstantPressure</A> cp <font color="darkgreen">
    &quot;specific heat capacity of fluid at constant pressure&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> eta <font color="darkgreen">&quot;dynamic viscosity of fluid&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>SI.ThermalConductivity</A> lambda <font color="darkgreen">&quot;thermal conductivity of fluid&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.PrandtlNumber"
>SI.PrandtlNumber</A> Pr <font color="darkgreen">&quot;Prandtl number&quot;</font>;

<font color="blue">algorithm </font>
  Pr := eta*cp/<font color="red">max</font>(MIN, lambda);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PrandtlNumber;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ReynoldsNumber<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.ReynoldsNumber"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.ReynoldsNumber</H2>
<B>calculation of Reynolds number</B><p>
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>A_cross</TD><TD>&nbsp;</TD><TD>Cross sectional area [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>perimeter</TD><TD>&nbsp;</TD><TD>Wetted perimeter [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho</TD><TD>&nbsp;</TD><TD>Density of fluid [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>eta</TD><TD>&nbsp;</TD><TD>Dynamic viscosity of fluid [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>&nbsp;</TD><TD>Mass flow rate [kg/s]</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re</TD><TD>Reynolds number [1]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>velocity</TD><TD>Mean velocity [m/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> ReynoldsNumber <font color="darkgreen">&quot;calculation of Reynolds number&quot;</font>

  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font>MIN = Modelica.Constants.eps;

  <font color="darkgreen">//geometry</font>
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>SI.Area</A> A_cross <font color="darkgreen">&quot;Cross sectional area&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> perimeter <font color="darkgreen">&quot;Wetted perimeter&quot;</font>;

  <font color="darkgreen">//fluid properties</font>
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho <font color="darkgreen">&quot;Density of fluid&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> eta <font color="darkgreen">&quot;Dynamic viscosity of fluid&quot;</font>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate&quot;</font>;

  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re <font color="darkgreen">&quot;Reynolds number&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> velocity <font color="darkgreen">&quot;Mean velocity&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> d_hyd=4*A_cross/<font color="red">max</font>(MIN, perimeter) <font color="darkgreen">&quot;Hydraulic diameter&quot;</font>;

<font color="blue">algorithm </font>
  Re := 4*<font color="red">abs</font>(m_flow)/<font color="red">max</font>(MIN, (perimeter*eta));
  velocity := m_flow/<font color="red">max</font>(MIN, (rho*A_cross));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ReynoldsNumber;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SmoothPower<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.SmoothPower</H2>
<B>Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The function is used to limit the derivative of the following function at x=0:
<pre>
   y = <b>if</b> x &ge; 0 <b>then</b> x<sup><b>pow</b></sup> <b>else</b> -(-x)<sup><b>pow</b></sup>;  // pow &gt; 0
</pre>
</p>
<p>
by approximating the function in the range -<b>deltax</b>&lt; x &lt; <b>deltax</b>
with a third order polynomial that has the same derivative at <b>abs</b>(x)=deltax, as the
function above.
</p>

<h4>Example </h4>
<p>
In the picture below the input x is increased from -1 to 1. The range of interpolation is defined by the same range. Displayed is the output of the function SmoothPower compared to
<pre>
y=x*|x|
</pre>
</p>
For |x| &gt; 1 both functions return identical results.
</p>

<img src="../Resources/Images/Fluid/Dissipation/utilities/SmoothPower.png" alt="SmoothPower"/>

<h4>References</h4>
<dl>
<dt>ThermoFluid Library</dt>
    <dd><b><a href="http://sourceforge.net/projects/thermofluid/"> http://sourceforge.net/projects/thermofluid/</b>.</dd>
</dl>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>x</TD><TD>&nbsp;</TD><TD>input variable</TD></TR>
<TR><TD>Real</TD><TD>deltax</TD><TD>&nbsp;</TD><TD>range for interpolation</TD></TR>
<TR><TD>Real</TD><TD>pow</TD><TD>&nbsp;</TD><TD>exponent for x</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y</TD><TD>output variable</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> SmoothPower <font color="darkgreen">
  &quot;Limiting the derivative of function y = if x&gt;=0 then x^pow else -(-x)^pow&quot;</font>
  annotation(derivative=<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der"
>SmoothPower_der</A>);
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font>Real x <font color="darkgreen">&quot;input variable&quot;</font>;
  <font color="blue">input </font>Real deltax <font color="darkgreen">&quot;range for interpolation&quot;</font>;
  <font color="blue">input </font>Real pow <font color="darkgreen">&quot;exponent for x&quot;</font>;
  <font color="blue">output </font>Real y <font color="darkgreen">&quot;output variable&quot;</font>;
<font color="blue">protected </font>
  Real adeltax=<font color="red">abs</font>(deltax);
  Real C3=(pow - 1)/2*adeltax^(pow - 3);
  Real C1=(3 - pow)/2*adeltax^(pow - 1);

<font color="blue">algorithm </font>
  y := <font color="blue">if </font>x &gt;= adeltax<font color="blue"> then </font>x^pow<font color="blue"> else </font><font color="blue">if </font>x &lt;= -adeltax<font color="blue"> then </font>-(-x)^pow<font color="blue"> else </font>(C1
     + C3*x*x)*x;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SmoothPower;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SmoothPower_der<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPower_der"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.SmoothPower_der</H2>
<B>The derivative of function SmoothPower</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>x</TD><TD>&nbsp;</TD><TD>input variable</TD></TR>
<TR><TD>Real</TD><TD>deltax</TD><TD>&nbsp;</TD><TD>range of interpolation</TD></TR>
<TR><TD>Real</TD><TD>pow</TD><TD>&nbsp;</TD><TD>exponent for x</TD></TR>
<TR><TD>Real</TD><TD>dx</TD><TD>&nbsp;</TD><TD>derivative of x</TD></TR>
<TR><TD>Real</TD><TD>ddeltax</TD><TD>&nbsp;</TD><TD>derivative of deltax</TD></TR>
<TR><TD>Real</TD><TD>dpow</TD><TD>&nbsp;</TD><TD>derivative of pow</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>dy</TD><TD>derivative of SmoothPower</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> SmoothPower_der <font color="darkgreen">&quot;The derivative of function SmoothPower&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font>Real x <font color="darkgreen">&quot;input variable&quot;</font>;
  <font color="blue">input </font>Real deltax <font color="darkgreen">&quot;range of interpolation&quot;</font>;
  <font color="blue">input </font>Real pow <font color="darkgreen">&quot;exponent for x&quot;</font>;
  <font color="blue">input </font>Real dx <font color="darkgreen">&quot;derivative of x&quot;</font>;
  <font color="blue">input </font>Real ddeltax <font color="darkgreen">&quot;derivative of deltax&quot;</font>;
  <font color="blue">input </font>Real dpow <font color="darkgreen">&quot;derivative of pow&quot;</font>;
  <font color="blue">output </font>Real dy <font color="darkgreen">&quot;derivative of SmoothPower&quot;</font>;
<font color="blue">protected </font>
  Real C3;
  Real C1;
  Real adeltax;

<font color="blue">algorithm </font>
  adeltax :=<font color="red"> abs</font>(deltax);
  <font color="blue">if </font><font color="red">noEvent</font>(x &gt;= adeltax)<font color="blue"> then</font>
    dy := dx*pow*x^(pow - 1);
  <font color="blue">elseif </font><font color="red">noEvent</font>(x &lt;= -adeltax)<font color="blue"> then</font>
    dy := -dx*pow*(-x)^(pow - 1);
  <font color="blue">else</font>
    C3 := (pow - 1)/2*adeltax^(pow - 3);
    C1 := (3 - pow)/2*adeltax^(pow - 1);
    dy := (C1 + 3*C3*x*x)*dx;
  <font color="blue">end if</font>;
<font color="blue">end </font>SmoothPower_der;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Stepsmoother<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.Stepsmoother</H2>
<B>Continuous interpolation for x </B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The function is used for continuous fading of variable inputs within a defined range. It allows a differentiable and smooth transition between function outputs, e.g., laminar and turbulent pressure drop or correlations for certain ranges.
</p>
<h4>Function </h4>
<p>
The tanh-function is used, since it provides an existing derivative and the derivative is zero at the borders [<b>nofunc</b>, <b>func</b>] of the interpolation domain (smooth derivative for transitions).<br>
<br>
In order to work correctly, the internal interpolation range in terms of the external arbitrary input <b> x </b> needs to be scaled such that:
<pre>
f(func)   = 0.5 &pi;
f(nofunc) = -0.5 &pi;
</pre>
</p>
<h4>Example </h4>
<p>
In the picture below the input x is increased from 0 to 1. The range of interpolation is defined by:
<ul>
<li> func = 0.75</li>
<li> nofunc = 0.25</li>
</ul>
</p>

<img src="../Resources/Images/Fluid/Dissipation/utilities/Stepsmoother.png" alt="Stepsmoother"/>

<h4>References</h4>
<dl>
<dt>Wischhusen, St.</dt>
    <dd><b>Simulation von K&auml;ltemaschinen-Prozessen mit MODELICA / DYMOLA</b>.
    Diploma thesis, Hamburg University of Technology, Institute of Thermofluiddynamics, 2000.</dd>
</dl><pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>func</TD><TD>&nbsp;</TD><TD>input value for that result = 100%</TD></TR>
<TR><TD>Real</TD><TD>nofunc</TD><TD>&nbsp;</TD><TD>input value for that result = 0%</TD></TR>
<TR><TD>Real</TD><TD>x</TD><TD>&nbsp;</TD><TD>input variable for continuous interpolation</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>result</TD><TD>output value</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> Stepsmoother <font color="darkgreen">&quot;Continuous interpolation for x &quot;</font>
  annotation(derivative=<A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der"
>Stepsmoother_der</A>);

  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font>Real func <font color="darkgreen">&quot;input value for that result = 100%&quot;</font>;
  <font color="blue">input </font>Real nofunc <font color="darkgreen">&quot;input value for that result = 0%&quot;</font>;
  <font color="blue">input </font>Real x <font color="darkgreen">&quot;input variable for continuous interpolation&quot;</font>;
  <font color="blue">output </font>Real result <font color="darkgreen">&quot;output value&quot;</font>;

<font color="blue">protected </font>
  Real m=Modelica.Constants.pi/(func - nofunc);
  Real b=-Modelica.Constants.pi/2 - m*nofunc;
  Real r_1=<font color="red">tan</font>(m*x + b);

<font color="blue">algorithm </font>
  result := <font color="blue">if </font>x &gt;= 0.999999*(func - nofunc) + nofunc<font color="blue"> and </font>func &gt; nofunc<font color="blue"> or </font>x
     &lt;= 0.999999*(func - nofunc) + nofunc<font color="blue"> and </font>nofunc &gt; func<font color="blue"> then </font>1<font color="blue"> else </font><font color="blue">if </font>x
     &lt;= 0.000001*(func - nofunc) + nofunc<font color="blue"> and </font>func &gt; nofunc<font color="blue"> or </font>x &gt;= 0.000001*(
    func - nofunc) + nofunc<font color="blue"> and </font>nofunc &gt; func<font color="blue"> then </font>0<font color="blue"> else </font>((0.5*(<font color="red">exp</font>(r_1) -<font color="red"> exp</font>(
    -r_1))/(0.5*(<font color="red">exp</font>(r_1) +<font color="red"> exp</font>(-r_1))) + 1)/2);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Stepsmoother;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Stepsmoother_der<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Dissipation.Utilities.Functions.General.SmoothPowerI.png" ALT="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Dissipation.Utilities.Functions.General.Stepsmoother_der"></A><A HREF="Modelica_Fluid_Dissipation_Utilities_Functions_General.html#Modelica.Fluid.Dissipation.Utilities.Functions.General"
>Modelica.Fluid.Dissipation.Utilities.Functions.General</A>.Stepsmoother_der</H2>
<B>Derivative of function Stepsmoother</B><p>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>func</TD><TD>&nbsp;</TD><TD>input for that result = 100%</TD></TR>
<TR><TD>Real</TD><TD>nofunc</TD><TD>&nbsp;</TD><TD>input for that result = 0%</TD></TR>
<TR><TD>Real</TD><TD>x</TD><TD>&nbsp;</TD><TD>input for interpolation</TD></TR>
<TR><TD>Real</TD><TD>dfunc</TD><TD>&nbsp;</TD><TD>derivative of func</TD></TR>
<TR><TD>Real</TD><TD>dnofunc</TD><TD>&nbsp;</TD><TD>derivative of nofunc</TD></TR>
<TR><TD>Real</TD><TD>dx</TD><TD>&nbsp;</TD><TD>derivative of x</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>dresult</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> Stepsmoother_der <font color="darkgreen">&quot;Derivative of function Stepsmoother&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font>Real func <font color="darkgreen">&quot;input for that result = 100%&quot;</font>;
  <font color="blue">input </font>Real nofunc <font color="darkgreen">&quot;input for that result = 0%&quot;</font>;
  <font color="blue">input </font>Real x <font color="darkgreen">&quot;input for interpolation&quot;</font>;
  <font color="blue">input </font>Real dfunc <font color="darkgreen">&quot;derivative of func&quot;</font>;
  <font color="blue">input </font>Real dnofunc <font color="darkgreen">&quot;derivative of nofunc&quot;</font>;
  <font color="blue">input </font>Real dx <font color="darkgreen">&quot;derivative of x&quot;</font>;
  <font color="blue">output </font>Real dresult;

<font color="blue">protected </font>
  Real m=Modelica.Constants.pi/(func - nofunc);
  Real b=-Modelica.Constants.pi/2 - m*nofunc;

<font color="blue">algorithm </font>
  dresult := <font color="blue">if </font>x &gt;= 0.999*(func - nofunc) + nofunc<font color="blue"> and </font>func &gt; nofunc<font color="blue"> or </font>x &lt;=
    0.999*(func - nofunc) + nofunc<font color="blue"> and </font>nofunc &gt; func<font color="blue"> or </font>x &lt;= 0.001*(func -
    nofunc) + nofunc<font color="blue"> and </font>func &gt; nofunc<font color="blue"> or </font>x &gt;= 0.001*(func - nofunc) + nofunc<font color="blue">
     and </font>nofunc &gt; func<font color="blue"> then </font>0<font color="blue"> else </font>(1 -<font color="red"> Modelica.Math.tanh</font>(<font color="red">Modelica.Math.tan</font>(m*
    x + b))^2)*(1 +<font color="red"> Modelica.Math.tan</font>(m*x + b)^2)*m*dx;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Stepsmoother_der;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:24 2010.
</address></BODY>
</HTML>
