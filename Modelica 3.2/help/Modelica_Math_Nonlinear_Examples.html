<HTML>
<HEAD>
<TITLE>Modelica.Math.Nonlinear.Examples</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Examples demonstrating the usage of the functions in package Nonlinear&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Examples<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Math.Nonlinear.Examples"></A><A HREF="Modelica_Math_Nonlinear.html#Modelica.Math.Nonlinear"
>Modelica.Math.Nonlinear</A>.Examples</H2>
<B>Examples demonstrating the usage of the functions in package Nonlinear</B>
<P>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage"
>Modelica.Icons.ExamplesPackage</A> (Icon for packages containing runnable examples).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.quadratureLobattoS.png" ALT="Modelica.Math.Nonlinear.Examples.quadratureLobatto1" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples.quadratureLobatto1"
>quadratureLobatto1</A>
</TD><TD>Integrate integral with fixed inputs</TD></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.quadratureLobattoS.png" ALT="Modelica.Math.Nonlinear.Examples.quadratureLobatto2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples.quadratureLobatto2"
>quadratureLobatto2</A>
</TD><TD>Integrate integral with user dependent inputs</TD></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.quadratureLobattoS.png" ALT="Modelica.Math.Nonlinear.Examples.solveNonlinearEquations1" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples.solveNonlinearEquations1"
>solveNonlinearEquations1</A>
</TD><TD>Solve nonlinear equations with fixed inputs</TD></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.quadratureLobattoS.png" ALT="Modelica.Math.Nonlinear.Examples.solveNonlinearEquations2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples.solveNonlinearEquations2"
>solveNonlinearEquations2</A>
</TD><TD>Solve nonlinear equations with user dependent inputs</TD></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.Examples.quadratureLobatto3S.png" ALT="Modelica.Math.Nonlinear.Examples.quadratureLobatto3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples.quadratureLobatto3"
>quadratureLobatto3</A>
</TD><TD>Integrate function in a model</TD></TR>
<TR><TD><IMG SRC="Modelica.Math.Nonlinear.Examples.UtilityFunctionsS.png" ALT="Modelica.Math.Nonlinear.Examples.UtilityFunctions" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Math_Nonlinear_Examples_UtilityFunctions.html#Modelica.Math.Nonlinear.Examples.UtilityFunctions"
>UtilityFunctions</A>
</TD><TD>Utility functions that are used as function arguments to the examples</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE quadratureLobatto1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Math.Nonlinear.Examples.quadratureLobatto1"></A><A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples"
>Modelica.Math.Nonlinear.Examples</A>.quadratureLobatto1</H2>
<B>Integrate integral with fixed inputs</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This examples integrates the following integrands with function
<A HREF="Modelica_Math_Nonlinear.html#Modelica.Math.Nonlinear.quadratureLobatto"
>quadratureLobatto</a>
and compares the result with an analytical solution.
The examples also demonstrate how additional input arguments to the integrand
function can be passed as additional arguments.
The following integrals are computed:
</p>

<ul>
<li> integral(sin(x)*dx) from x=0 to x=1 </li>
<li> integral(sin(5*x)*dx) from x=0 to x=13 </li>
<li> elliptic integral from x=0 to pi/2 </li>
</ul>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>tolerance</TD><TD>1e-5</TD><TD>Error tolerance of integral values</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> quadratureLobatto1 <font color="darkgreen">&quot;Integrate integral with fixed inputs&quot;</font>
  <font color="blue">input </font>Real tolerance=1e-5 <font color="darkgreen">&quot;Error tolerance of integral values&quot;</font>;

  <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

<font color="blue">protected </font>
  Real I_numerical[3] <font color="darkgreen">&quot;Numerical integral values&quot;</font>;
  Real I_analytical[<font color="red">size</font>(I_numerical, 1)] <font color="darkgreen">&quot;Analytical integral values&quot;</font>;
  Real I_err[<font color="red">size</font>(I_numerical, 1)] <font color="darkgreen">
    &quot;Absolute errors between numerical and analytical integral values&quot;</font>;

<font color="blue">algorithm </font>
  I_numerical[1] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun4</font>(),
      0,
      1,
      tolerance);
  I_analytical[1] := -<font color="red">cos</font>(1) +<font color="red"> cos</font>(0);

  I_numerical[2] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun5</font>(w=5),
      0,
      13,
      tolerance);
  I_analytical[2] := -<font color="red">cos</font>(5*13)/5 +<font color="red"> cos</font>(5*0)/5;

  I_numerical[3] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun6</font>(k=1/
      <font color="red">sqrt</font>(2)),
      0,
      Modelica.Constants.pi/2,
      tolerance);
  I_analytical[3] := 1.8540746773013719184338503;

  I_err :=<font color="red"> abs</font>(I_numerical - I_analytical);

  <font color="red">print</font>(&quot;\n... Results of Modelica.Math.Nonlinear.Examples.quadratureLobatto1:&quot;);
  <font color="red">print</font>(&quot;Function 1 ( integral(sin(x)*dx) from x=0 to x=1): &quot;);
  <font color="red">print</font>(&quot;Analytical integral value = &quot; +<font color="red"> String</font>(I_analytical[1], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I_numerical[1], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference       = &quot; +<font color="red"> String</font>(I_err[1], format=&quot;2.0e&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 2 (integral(sin(5*x)*dx) from x=0 to x=13): &quot;);
  <font color="red">print</font>(&quot;Analytical integral value = &quot; +<font color="red"> String</font>(I_analytical[2], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I_numerical[2], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference       = &quot; +<font color="red"> String</font>(I_err[2], format=&quot;2.0e&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 3 (Elliptic integral from x=0 to pi/2): &quot;);
  <font color="red">print</font>(&quot;Analytical integral value = &quot; +<font color="red"> String</font>(I_analytical[3], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I_numerical[3], format=
    &quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference       = &quot; +<font color="red"> String</font>(I_err[3], format=&quot;2.0e&quot;));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>quadratureLobatto1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE quadratureLobatto2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Math.Nonlinear.Examples.quadratureLobatto2"></A><A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples"
>Modelica.Math.Nonlinear.Examples</A>.quadratureLobatto2</H2>
<B>Integrate integral with user dependent inputs</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This examples solves the following integrands with function
<A HREF="Modelica_Math_Nonlinear.html#Modelica.Math.Nonlinear.quadratureLobatto"
>quadratureLobatto</a>.
The user can set the parameters, like "w" or "k", and can experiment with
different integration intervals.
The following integrals are computed:
</p>

<ul>
<li> integral(sin(x)*dx) </li>
<li> integral(sin(w*x)*dx) </li>
<li> elliptic integral </li>
</ul>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>General</TD></TR>
<TR><TD>Real</TD><TD>Tolerance</TD><TD>1e-5</TD><TD>Error tolerance of integral value</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Sine</TD></TR>
<TR><TD>Real</TD><TD>a1</TD><TD>0</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>b1</TD><TD>1</TD><TD>Upper limit</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Sine w</TD></TR>
<TR><TD>Real</TD><TD>a2</TD><TD>0</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>b2</TD><TD>13</TD><TD>Upper limit</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>5</TD><TD>Angular velocity</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Elliptic integral</TD></TR>
<TR><TD>Real</TD><TD>a3</TD><TD>0</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>b3</TD><TD>Modelica.Constants.pi/2</TD><TD>Upper limit</TD></TR>
<TR><TD>Real</TD><TD>k</TD><TD>1/sqrt(2)</TD><TD>Modul</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> quadratureLobatto2 <font color="darkgreen">
  &quot;Integrate integral with user dependent inputs&quot;</font>
  <font color="blue">input </font>Real Tolerance=1e-5 <font color="darkgreen">&quot;Error tolerance of integral value&quot;</font>;
  <font color="blue">input </font>Real a1=0 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real b1=1 <font color="darkgreen">&quot;Upper limit&quot;</font>;

  <font color="blue">input </font>Real a2=0 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real b2=13 <font color="darkgreen">&quot;Upper limit&quot;</font>;
  <font color="blue">input </font>Real w=5 <font color="darkgreen">&quot;Angular velocity&quot;</font>;

  <font color="blue">input </font>Real a3=0 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real b3=Modelica.Constants.pi/2 <font color="darkgreen">&quot;Upper limit&quot;</font>;
  <font color="blue">input </font>Real k=1/<font color="red">sqrt</font>(2) <font color="darkgreen">&quot;Modul&quot;</font>;

  <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

<font color="blue">protected </font>
  Real I[3] <font color="darkgreen">&quot;Numerical integral values&quot;</font>;

<font color="blue">algorithm </font>
  I[1] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun4</font>(),
      a1,
      b1,
      Tolerance);

  I[2] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun5</font>(w=w),
      a2,
      b2,
      Tolerance);

  I[3] :=<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun6</font>(k=k),
      a3,
      b3,
      Tolerance);

  <font color="red">print</font>(&quot;\n... Results of Modelica.Math.Nonlinear.Examples.quadratureLobatto2:&quot;);
  <font color="red">print</font>(&quot;Function 1 (integral(sin(x)*dx)): &quot;);
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I[1], format=&quot;2.16f&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 2 (integral(sin(w*x)*dx)): &quot;);
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I[2], format=&quot;2.16f&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 3 (Elliptic integral): &quot;);
  <font color="red">print</font>(&quot;Numerical integral value  = &quot; +<font color="red"> String</font>(I[3], format=&quot;2.16f&quot;));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>quadratureLobatto2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE solveNonlinearEquations1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Math.Nonlinear.Examples.solveNonlinearEquations1"></A><A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples"
>Modelica.Math.Nonlinear.Examples</A>.solveNonlinearEquations1</H2>
<B>Solve nonlinear equations with fixed inputs</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This examples solves the following nonlinear equations with function
<A HREF="Modelica_Math_Nonlinear.html#Modelica.Math.Nonlinear.solveOneNonlinearEquation"
>solveOneNonlinearEquation</a>
and compares the result with the available analytical solution.
The examples also demonstrate how additional input arguments to the nonlinear equation
function can be passes as additional arguments.
The following nonlinear equations are solved:
</p>

<ul>
<li> 0 = u^2 - 1 </li>
<li> 0 = 3*u - sin(3*u) - 1 </li>
<li> 0 = 5 + log(u) - u </li>
</ul>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>tolerance</TD><TD>100*Modelica.Constants.eps</TD><TD>Relative tolerance of solution u</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> solveNonlinearEquations1 <font color="darkgreen">
  &quot;Solve nonlinear equations with fixed inputs&quot;</font>
  <font color="blue">input </font>Real tolerance=100*Modelica.Constants.eps <font color="darkgreen">
    &quot;Relative tolerance of solution u&quot;</font>;

<font color="blue">protected </font>
  Real u_numerical[3];
  Real u_analytical[3];
  Real u_err[3];

  <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

<font color="blue">algorithm </font>
  u_numerical[1] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun1</font>(),
      -0.5,
      10,
      tolerance);
  u_analytical[1] := 1.0;

  u_numerical[2] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun2</font>(w=3),
      0,
      5,
      tolerance);
  u_analytical[2] := 0.6448544035840080891877538;

  u_numerical[3] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun3</font>(p={5,1},
      m=1),
      1,
      8,
      tolerance);
  u_analytical[3] := 6.9368474072202187221643182;

  u_err :=<font color="red"> abs</font>(u_numerical - u_analytical);

  <font color="red">print</font>(&quot;\n... Results of Modelica.Math.Nonlinear.Examples.solveNonlinearEquations1:&quot;);
  <font color="red">print</font>(&quot;Solve 3 nonlinear equations with relative tolerance = &quot; +<font color="red"> String</font>(tolerance) +&quot;\n&quot;);
  <font color="red">print</font>(&quot;Function 1 (u^2 - 1 = 0): &quot;);
  <font color="red">print</font>(&quot;Analytical zero     = &quot; +<font color="red"> String</font>(u_analytical[1], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical zero      = &quot; +<font color="red"> String</font>(u_numerical[1], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference = &quot; +<font color="red"> String</font>(u_err[1], format=&quot;2.0e&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 2 (3*u - sin(3*u) - 1 = 0): &quot;);
  <font color="red">print</font>(&quot;Analytical zero     = &quot; +<font color="red"> String</font>(u_analytical[2], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical zero      = &quot; +<font color="red"> String</font>(u_numerical[2], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference = &quot; +<font color="red"> String</font>(u_err[2], format=&quot;2.0e&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 3 (5 + log(u) - u = 0): &quot;);
  <font color="red">print</font>(&quot;Analytical zero     = &quot; +<font color="red"> String</font>(u_analytical[3], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Numerical zero      = &quot; +<font color="red"> String</font>(u_numerical[3], format=&quot;2.16f&quot;));
  <font color="red">print</font>(&quot;Absolute difference = &quot; +<font color="red"> String</font>(u_err[3], format=&quot;2.0e&quot;));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>solveNonlinearEquations1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE solveNonlinearEquations2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Math.Nonlinear.Examples.solveNonlinearEquations2"></A><A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples"
>Modelica.Math.Nonlinear.Examples</A>.solveNonlinearEquations2</H2>
<B>Solve nonlinear equations with user dependent inputs</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This examples solves the following nonlinear equations with function
<A HREF="Modelica_Math_Nonlinear.html#Modelica.Math.Nonlinear.solveOneNonlinearEquation"
>solveOneNonlinearEquation</a>.
The user can set the parameters, like "w" or "m", and can experiment with
different start intervals.
The following nonlinear equations are solved:
</p>

<ul>
<li> 0 = u^2 - 1 </li>
<li> 0 = 3*u - sin(w*u) - 1 </li>
<li> 0 = p[1] + log(p[2]*u) - m*u </li>
</ul>

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>General</TD></TR>
<TR><TD>Real</TD><TD>tolerance</TD><TD>100*Modelica.Constants.eps</TD><TD>Relative tolerance of solution u</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>u^2-1</TD></TR>
<TR><TD>Real</TD><TD>u_min1</TD><TD>-0.5</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>u_max1</TD><TD>10</TD><TD>Upper limit</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>3*u - sin(w*u) - 1</TD></TR>
<TR><TD>Real</TD><TD>u_min2</TD><TD>0</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>u_max2</TD><TD>5</TD><TD>Upper limit</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>3</TD><TD>Angular velocity </TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>p[1] + log(p[2]*u) - m*u</TD></TR>
<TR><TD>Real</TD><TD>u_min3</TD><TD>1</TD><TD>Lower limit</TD></TR>
<TR><TD>Real</TD><TD>u_max3</TD><TD>8</TD><TD>Upper limit</TD></TR>
<TR><TD>Real</TD><TD>p[2]</TD><TD>{5,1}</TD><TD>Parameter vector</TD></TR>
<TR><TD>Real</TD><TD>m</TD><TD>1</TD><TD>Parameter</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> solveNonlinearEquations2 <font color="darkgreen">
  &quot;Solve nonlinear equations with user dependent inputs&quot;</font>
    <font color="blue">input </font>Real tolerance=100*Modelica.Constants.eps <font color="darkgreen">
    &quot;Relative tolerance of solution u&quot;</font>;
  <font color="blue">input </font>Real u_min1=-0.5 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real u_max1=10 <font color="darkgreen">&quot;Upper limit&quot;</font>;
  <font color="blue">input </font>Real u_min2=0 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real u_max2=5 <font color="darkgreen">&quot;Upper limit&quot;</font>;
  <font color="blue">input </font>Real w=3 <font color="darkgreen">&quot;Angular velocity &quot;</font>;
  <font color="blue">input </font>Real u_min3=1 <font color="darkgreen">&quot;Lower limit&quot;</font>;
  <font color="blue">input </font>Real u_max3=8 <font color="darkgreen">&quot;Upper limit&quot;</font>;
  <font color="blue">input </font>Real p[2]={5,1} <font color="darkgreen">&quot;Parameter vector&quot;</font>;
  <font color="blue">input </font>Real m=1 <font color="darkgreen">&quot;Parameter&quot;</font>;

<font color="blue">protected </font>
  Real u[3];

  <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;

<font color="blue">algorithm </font>
  u[1] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun1</font>(),
      u_min1,
      u_max1,
      tolerance);

  u[2] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun2</font>(w=w),
      u_min2,
      u_max2,
      tolerance);

  u[3] :=<font color="red"> Modelica.Math.Nonlinear.solveOneNonlinearEquation</font>(
      <font color="blue">function </font><font color="red">Modelica.Math.Nonlinear.Examples.UtilityFunctions.fun3</font>(p=p, m=
      m),
      u_min3,
      u_max3,
      tolerance);

  <font color="red">print</font>(&quot;\n... Results of Modelica.Math.Nonlinear.Examples.solveNonlinearEquations2:&quot;);
  <font color="red">print</font>(&quot;Solve 3 nonlinear equations with relative tolerance = &quot; +<font color="red"> String</font>(tolerance) +&quot;\n&quot;);

  <font color="red">print</font>(&quot;Function 1 (u^2 - 1): &quot;);
  <font color="red">print</font>(&quot;Numerical zero = &quot; +<font color="red"> String</font>(u[1], format=&quot;2.16f&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 2 (3*u - sin(w*u) - 1): &quot;);
  <font color="red">print</font>(&quot;Numerical zero = &quot; +<font color="red"> String</font>(u[2], format=&quot;2.16f&quot;));

  <font color="red">print</font>(&quot;&quot;);
  <font color="red">print</font>(&quot;Function 3 (p[1] + log(p[2]*u) - m*u): &quot;);
  <font color="red">print</font>(&quot;Numerical zero = &quot; +<font color="red"> String</font>(u[3], format=&quot;2.16f&quot;));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>solveNonlinearEquations2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE quadratureLobatto3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Math.Nonlinear.Examples.quadratureLobatto3I.png" ALT="Modelica.Math.Nonlinear.Examples.quadratureLobatto3" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Math.Nonlinear.Examples.quadratureLobatto3"></A><A HREF="Modelica_Math_Nonlinear_Examples.html#Modelica.Math.Nonlinear.Examples"
>Modelica.Math.Nonlinear.Examples</A>.quadratureLobatto3</H2>
<B>Integrate function in a model</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This example demonstrates how to utilize a function as input argument
to a function in a model.
</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>A</TD><TD>1</TD><TD>Amplitude of integrand of s</TD></TR>
<TR><TD>Real</TD><TD>ws</TD><TD>2</TD><TD>Angular frequency of integrand of s</TD></TR>
<TR><TD>Real</TD><TD>wq</TD><TD>3</TD><TD>Angular frequency of q</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> quadratureLobatto3 <font color="darkgreen">&quot;Integrate function in a model&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  <font color="blue">parameter </font>Real A=1 <font color="darkgreen">&quot;Amplitude of integrand of s&quot;</font>;
  <font color="blue">parameter </font>Real ws=2 <font color="darkgreen">&quot;Angular frequency of integrand of s&quot;</font>;
  <font color="blue">parameter </font>Real wq=3 <font color="darkgreen">&quot;Angular frequency of q&quot;</font>;
  Real q(start=1, fixed=true);
  Real qd(start=0, fixed=true);
  Real x;
  <font color="blue">final </font><font color="blue">parameter </font>Real s =<font color="red"> Modelica.Math.Nonlinear.quadratureLobatto</font>(
                              <font color="blue">function </font><font color="red">UtilityFunctions.fun7</font>(A=A, w=ws),
                              0,1);
<font color="blue">equation </font>
  qd =<font color="red"> der</font>(q);
  <font color="red">der</font>(qd) + wq*q = 0;
  x = s*q;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>quadratureLobatto3;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:49 2010.
</address></BODY>
</HTML>
