<HTML>
<HEAD>
<TITLE>Modelica.Mechanics.MultiBody.Visualizers.Colors</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library of functions operating on color&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Colors<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody.Visualizers.Colors"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers"
>Modelica.Mechanics.MultiBody.Visualizers</A>.Colors</H2>
<B>Library of functions operating on color</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This package contains functions to operate on colors.
Note, a color is represented as a Real array with 3 elements where
the elements are the red, green, blue values of the RGB color model.
Every element must be in the range 0..255.
The type of a color is Real and not Integer in order that a color
can be used with less problems in a model, since in a model an Integer
type could only be used in a when-clause. Typical declaration of a color value:
</p>

<blockquote>
<pre>
  Real color[3](each min=0, each max=255);
</pre>
</blockquote>

<p>
This definition is also available as type
<A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.RealColor"
>Modelica.Mechanics.MultiBody.Types.RealColor</a>.
</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.ColorsS.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors_ColorMaps.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps"
>ColorMaps</A>
</TD><TD>Library of functions returning color maps</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvgS.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg"
>colorMapToSvg</A>
</TD><TD>Save a color map on file in svg (scalable vector graphics) format</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvgS.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Colors.scalarToColor" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.scalarToColor"
>scalarToColor</A>
</TD><TD>Map a scalar to a color using a color map</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE colorMapToSvg<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors"
>Modelica.Mechanics.MultiBody.Visualizers.Colors</A>.colorMapToSvg</H2>
<B>Save a color map on file in svg (scalable vector graphics) format</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<h4>Syntax</h4>
<blockquote><pre>
Colors.<b>colorMapToSvg</b>(colorMap);
Colors.<b>colorMapToSvg</b>(colorMap,
                     fileName   = "colorMap.svg",
                     width      =  10,  // [mm]
                     height     = 100,  // [mm]
                     x          =  20,  // [mm]
                     y          =  10,  // [mm]
                     T_min      =   0,
                     T_max      = 100,
                     nScalars   =  11,
                     format     = ".3g",
                     fontSize   =  11,  // [pt]
                     textWidth  =   8,  // [mm]
                     caption    = "",
                     headerType = Colors.colorMapToSvg.Header.svgBeginAndEnd)
                                                           // svgBegin
                                                           // svgEnd
                                                           // svgNoHeader
</pre></blockquote>
<h4>Description</h4>
<p>
This function saves the color map "Real colorMap[:,3]" on file "fileName"
in svg format. The color map has a width of "width" and a height of "height" and
the upper left corner is placed at coordinates "(x,y)".
Over the color map, a caption "caption" is placed.
On the right side of the color map, a set of scalar field values T is
displayed where "T_min" is placed at colorMap[1,:],
"T_max" is placed at colorMap[end,:] and "nScalars" values between
"T_min" and "T_max" (including T_min and T_max) are shown.
The printing format of the numbers is defined with "format", see definition below.
With argument "headerType" it is defined whether "svg" begin and end
lines are printed. If the "begin" svg tag shall be printed, file "fileName"
is deleted, if it already exists. Otherwise, all output is appended to the
file "fileName".
</p>

<p>
A "svg" file can be displayed by a web browser, such as
<a href="http://www.mozilla.org/firefox">Firefox</a> by dragging the
file in the browser window.
Alternatively, a svg-file can be loaded in a graphics program,
such as the free <a href="http://inkscape.org">Incscape</a>,
can be manipulated and can be exported in other graphic formats.
The following image was generated with a call to "colorMapToSvg", the
generated file was loaded in Incscape and exported in "png" format:
</p>

<blockquote>
<img src="../Resources/Images/MultiBody/Visualizers/Colors/jet.png">
</blockquote>

<p>
The "format" argument defines the string formating according to
ANSI-C without "%" and "*" character<br>
(e.g., ".6g", "14.5e", "+6f"). In particular:
</p>

<p>
format = "[&lt;flags&gt;] [&lt;width&gt;] [.&lt;precision&gt;] &lt;conversion&gt;"
with
</p>

<blockquote>
<table>
<tr>
  <td>&lt;flags&gt;</td>
  <td> zero, one or more of<br>
       "-": left adjustment of the converted number<br>
       "+": number will always be printed with a sign<br>
       "0": padding to the field width with leading zeros</td></tr>
<tr>
  <td>&lt;width&gt;</td>
  <td> Minimum field width. The converted number will be printed in a field at<br>
       least this wide and wider if necessary. If the converted number has <br>
       fewer characters it will be padded on the left (or the right depending<br>
       on &lt;flags&gt;) with blanks or 0 (depending on &lt;flags&gt;).</td></tr>
<tr>
  <td>&lt;precision&gt;</td>
  <td> The number of digits to be printed after the decimal point for <br>
       e, E, or f conversions, or the number of significant digits for <br>
       g or G conversions.</td></tr>
<tr>
  <td> &lt;conversion&gt;</td>
  <td> = "e": Exponential notation using a  lower case e<br>
       = "E": Exponential notation using an upper case E<br>
       = "f": Fixed point notation<br>
       = "g": Either "e" or "f"<br>
       = "G": Same as "g", but with upper case E</td></tr></table>
</table>
</blockquote>
<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>colorMap[:, 3]</TD><TD>&nbsp;</TD><TD>Color map to be stored in svg format</TD></TR>
<TR><TD>String</TD><TD>fileName</TD><TD>&quot;colorMap.svg&quot;</TD><TD>File where the svg representation shall be stored</TD></TR>
<TR><TD>Real</TD><TD>width</TD><TD>10</TD><TD>Width in svg-figure [mm]</TD></TR>
<TR><TD>Real</TD><TD>height</TD><TD>100</TD><TD>Height in svg-figure [mm]</TD></TR>
<TR><TD>Real</TD><TD>x</TD><TD>20</TD><TD>X-Coordinate of left upper corner [mm]</TD></TR>
<TR><TD>Real</TD><TD>y</TD><TD>10</TD><TD>Y-Coordinate of left upper corner [mm]</TD></TR>
<TR><TD>Real</TD><TD>T_min</TD><TD>0</TD><TD>Value of scalar corresponding to colorMap[1,:]</TD></TR>
<TR><TD>Real</TD><TD>T_max</TD><TD>100</TD><TD>Value of scalar corresponding to colorMap[end,:]</TD></TR>
<TR><TD>Integer</TD><TD>nScalars</TD><TD>11</TD><TD>Number of scalars to be displayed at the right side</TD></TR>
<TR><TD>String</TD><TD>format</TD><TD>&quot;.3g&quot;</TD><TD>Format of the numbers</TD></TR>
<TR><TD>Real</TD><TD>fontSize</TD><TD>11</TD><TD>Font size in [pt]</TD></TR>
<TR><TD>Real</TD><TD>textWidth</TD><TD>8</TD><TD>Numbers are right justified starting at x+width+textWidth [mm]</TD></TR>
<TR><TD>String</TD><TD>caption</TD><TD>&quot;&quot;</TD><TD>Caption above the map</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg.HeaderType"
>HeaderType</A></TD><TD>headerType</TD><TD>Colors.colorMapToSvg.HeaderT...</TD><TD>Type of header</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> colorMapToSvg <font color="darkgreen">
  &quot;Save a color map on file in svg (scalable vector graphics) format&quot;</font>
 <font color="blue">encapsulated </font><font color="blue">type</font> HeaderType = <font color="blue">enumeration</font>(
      svgBeginAndEnd,
      svgBegin,
      svgEnd,
      noHeader);
  <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;
  <font color="blue">input </font>Real colorMap[:,3] <font color="darkgreen">&quot;Color map to be stored in svg format&quot;</font>;
  <font color="blue">input </font>String fileName=&quot;colorMap.svg&quot; <font color="darkgreen">
    &quot;File where the svg representation shall be stored&quot;</font>;
  <font color="blue">input </font>Real width(unit=&quot;mm&quot;)=10 <font color="darkgreen">&quot;Width in svg-figure&quot;</font>;
  <font color="blue">input </font>Real height(unit=&quot;mm&quot;)=100 <font color="darkgreen">&quot;Height in svg-figure&quot;</font>;
  <font color="blue">input </font>Real x(unit=&quot;mm&quot;)=20 <font color="darkgreen">&quot;X-Coordinate of left upper corner&quot;</font>;
  <font color="blue">input </font>Real y(unit=&quot;mm&quot;)=10 <font color="darkgreen">&quot;Y-Coordinate of left upper corner&quot;</font>;
  <font color="blue">input </font>Real T_min=0 <font color="darkgreen">&quot;Value of scalar corresponding to colorMap[1,:]&quot;</font>;
  <font color="blue">input </font>Real T_max=100 <font color="darkgreen">&quot;Value of scalar corresponding to colorMap[end,:]&quot;</font>;
  <font color="blue">input </font>Integer nScalars=11 <font color="darkgreen">
    &quot;Number of scalars to be displayed at the right side&quot;</font>;
  <font color="blue">input </font>String format=&quot;.3g&quot; <font color="darkgreen">&quot;Format of the numbers&quot;</font>;
  <font color="blue">input </font>Real fontSize=11 <font color="darkgreen">&quot;Font size in [pt]&quot;</font>;
  <font color="blue">input </font>Real textWidth(unit=&quot;mm&quot;)=8 <font color="darkgreen">
    &quot;Numbers are right justified starting at x+width+textWidth&quot;</font>;
  <font color="blue">input </font>String caption=&quot;&quot; <font color="darkgreen">&quot;Caption above the map&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg.HeaderType"
>HeaderType</A> headerType=Colors.colorMapToSvg.HeaderType.svgBeginAndEnd <font color="darkgreen">
    &quot;Type of header&quot;</font>;
<font color="blue">protected </font>
  Integer nc =<font color="red"> size</font>(colorMap,1);
  Real dy=height/nc;
  Real yy=y-dy;
  String strWidth=<font color="red">String</font>(width);
  String strHeight=<font color="red">String</font>(dy);
  Real T;
  Integer ni;
  <font color="blue">constant </font>Real ptToMm=127/360 <font color="darkgreen">&quot;1 Point = ptToMm mm&quot;</font>;
  Real fontHeight(unit=&quot;mm&quot;) = fontSize*ptToMm;
  Real xx=x+width+textWidth;
  String strXX=<font color="red">String</font>(xx);
  Real xHeading=x+width/2;
  Real yHeading=y-1.2*fontHeight;
<font color="blue">algorithm </font>
  <font color="blue">if </font>headerType==HeaderType.svgBeginAndEnd<font color="blue"> or </font>
     headerType==HeaderType.svgBegin<font color="blue"> then</font>
    <font color="red"> Modelica.Utilities.Files.remove</font>(fileName);
    <font color="red"> print</font>(&quot;... generating svg-file: &quot; +<font color="red"> Modelica.Utilities.Files.fullPathName</font>(fileName));
  <font color="blue">end if</font>;
  <font color="blue">if </font>caption&lt;&gt;&quot;&quot;<font color="blue"> then</font>
    <font color="red"> print</font>(&quot;... &quot; + caption);
  <font color="blue">end if</font>;

  <font color="blue">if </font>headerType==HeaderType.svgBeginAndEnd<font color="blue"> or </font>
     headerType==HeaderType.svgBegin<font color="blue"> then</font>
    <font color="red"> print</font>(&quot;&lt;svg xmlns=\&quot;http://www.w3.org/2000/svg\&quot;&gt;&quot;, fileName);
  <font color="blue">end if</font>;

  <font color="red">print</font>(&quot;  &lt;g&gt;&quot;, fileName);

  <font color="darkgreen">// Print colors</font>
  <font color="blue">for </font>i<font color="blue"> in </font>nc:-1:1<font color="blue"> loop</font>
    <font color="darkgreen"> // print:  &lt;rect x=&quot;XXmm&quot; y=&quot;XXmm&quot; width=&quot;YYmm&quot; height=&quot;ZZmm&quot; style=&quot;fill:rgb(100,128,255);stroke:none&quot;/&gt;</font>
     yy :=yy + dy;
    <font color="red"> print</font>(&quot;    &lt;rect x=\&quot;&quot; +<font color="red"> String</font>(x) +
           &quot;mm\&quot; y=\&quot;&quot; +<font color="red"> String</font>(yy) +
           &quot;mm\&quot; width=\&quot;&quot; + strWidth +
           &quot;mm\&quot; height=\&quot;&quot; + strHeight +
           &quot;mm\&quot; style=\&quot;fill:rgb(&quot; +<font color="red"> String</font>(<font color="red">integer</font>(colorMap[i,1])) + &quot;,&quot;
                                    +<font color="red"> String</font>(<font color="red">integer</font>(colorMap[i,2])) + &quot;,&quot;
                                    +<font color="red"> String</font>(<font color="red">integer</font>(colorMap[i,3])) +
           &quot;);stroke:none\&quot;/&gt;&quot;, fileName);
  <font color="blue">end for</font>;

  <font color="darkgreen">// Print numbers</font>
  ni :=<font color="blue">if </font>nScalars == 1<font color="blue"> then </font>2<font color="blue"> else </font><font color="blue">if </font>nScalars &lt; 1<font color="blue"> then </font>
                             0<font color="blue"> else </font>nScalars;
  dy:=height/(ni-1);
  yy:=y - dy+0.3*fontHeight;
  <font color="blue">for </font>i<font color="blue"> in </font>ni:-1:1<font color="blue"> loop</font>
    <font color="darkgreen">// print: &lt;text x=&quot;22mm&quot; y=&quot;12mm&quot; font-family=&quot;Arial,sans-serif&quot; font-size=&quot;11pt&quot;&gt;1.2345&lt;/text&gt;</font>
    yy :=yy + dy;
    T := T_min + (T_max - T_min)*(i-1)/(ni-1);
    <font color="red">print</font>(&quot;    &lt;text x=\&quot;&quot; + strXX +
          &quot;mm\&quot; y=\&quot;&quot; +<font color="red"> String</font>(yy) +
          &quot;mm\&quot; font-family=\&quot;Fixedsys\&quot; font-size=\&quot;&quot; +<font color="red"> String</font>(fontSize) +
          &quot;pt\&quot; text-anchor=\&quot;end\&quot;&gt;&quot; +<font color="red"> String</font>(T,format=format) +
          &quot;&lt;/text&gt;&quot;, fileName);
  <font color="blue">end for</font>;

  <font color="blue">if </font>caption &lt;&gt; &quot;&quot;<font color="blue"> then</font>
    <font color="red"> print</font>(&quot;   &lt;text x=\&quot;&quot; +<font color="red"> String</font>(xHeading) +
           &quot;mm\&quot; y=\&quot;&quot; +<font color="red"> String</font>(yHeading) +
           &quot;mm\&quot; font-family=\&quot;Fixedsys\&quot; font-size=\&quot;&quot; +<font color="red"> String</font>(fontSize) +
           &quot;pt\&quot; text-anchor=\&quot;middle\&quot;&gt;&quot; + caption +
           &quot;&lt;/text&gt;&quot;, fileName);
  <font color="blue">end if</font>;

  <font color="red">print</font>(&quot;  &lt;/g&gt;&quot;, fileName);

  <font color="blue">if </font>headerType==HeaderType.svgBeginAndEnd<font color="blue"> or </font>
     headerType==HeaderType.svgEnd<font color="blue"> then</font>
    <font color="red"> print</font>(&quot;&lt;/svg&gt;&quot;,fileName);
  <font color="blue">end if</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>colorMapToSvg;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE scalarToColor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody.Visualizers.Colors.scalarToColor"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors"
>Modelica.Mechanics.MultiBody.Visualizers.Colors</A>.scalarToColor</H2>
<B>Map a scalar to a color using a color map</B><p>
<P><H3>Information</H3></P>
<PRE></pre>
<h4>Syntax</h4>
<blockquote><pre>
//Real T, T_min, T_max, colorMap[:,3];
Colors.<b>scalarToColor</b>(T, T_min, T_max, colorMap);
</pre></blockquote>
<h4>Description</h4>
<p>
This function returns an rgb color Real[3] that corresponds to the value of "T".
The color is selected from the colorMap by interpolation so that
"T_min" corresponds to "colorMap[1,:]" and
"T_max" corresponds to "colorMap[end,:]".
</p>

<h4>See also</h4>
<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors_ColorMaps.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.ColorMaps"
>ColorMaps</a>,
<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Colors.html#Modelica.Mechanics.MultiBody.Visualizers.Colors.colorMapToSvg"
>colorMapToSvg</a>,
<A HREF="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers.PipeWithScalarField"
>PipeWithScalarField</a>.

<pre></PRE><P>

<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>T</TD><TD>&nbsp;</TD><TD>Scalar value</TD></TR>
<TR><TD>Real</TD><TD>T_min</TD><TD>&nbsp;</TD><TD>T &lt;= T_min is mapped to colorMap[1,:]</TD></TR>
<TR><TD>Real</TD><TD>T_max</TD><TD>&nbsp;</TD><TD>T &gt;= T_max is mapped to colorMap[end,:]</TD></TR>
<TR><TD>Real</TD><TD>colorMap[:, 3]</TD><TD>&nbsp;</TD><TD>Color map</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>color[3]</TD><TD>Color of scalar value T</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> scalarToColor <font color="darkgreen">&quot;Map a scalar to a color using a color map&quot;</font>
  <font color="blue">input </font>Real T <font color="darkgreen">&quot;Scalar value&quot;</font>;
  <font color="blue">input </font>Real T_min <font color="darkgreen">&quot;T &lt;= T_min is mapped to colorMap[1,:]&quot;</font>;
  <font color="blue">input </font>Real T_max <font color="darkgreen">&quot;T &gt;= T_max is mapped to colorMap[end,:]&quot;</font>;
  <font color="blue">input </font>Real colorMap[:,3] <font color="darkgreen">&quot;Color map&quot;</font>;
  <font color="blue">output </font>Real color[3] <font color="darkgreen">&quot;Color of scalar value T&quot;</font>;
<font color="blue">algorithm </font>
  color :=colorMap[<font color="red">integer</font>((<font color="red">size</font>(colorMap, 1) - 1)/(T_max - T_min)*
                            <font color="red">min</font>((<font color="red">max</font>(T,T_min) - T_min), T_max) + 1), :];
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>scalarToColor;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:40 2010.
</address></BODY>
</HTML>
